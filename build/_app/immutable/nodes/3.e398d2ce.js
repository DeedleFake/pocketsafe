import{s as L,n as G,l as P,k as h,m as Z,c as ae,u as le,g as ie,d as re,b as H,r as J,e as ue}from"../chunks/scheduler.c0af0a0f.js";import{S as O,i as j,e as K,a as m,f as d,g as v,h as y,y as b,B as N,z as q,j as z,d as k,t as w,C as Q,s as U,r as $,c as E,u as I,k as x,v as B,x as C,D as oe,w as S,m as ee,n as te,o as fe}from"../chunks/index.8a19a5c7.js";import{h as pe}from"../chunks/singletons.8c5f125c.js";import{g as A,p as ce,c as _e}from"../chunks/pocketbase.336cc0bb.js";const V=pe("goto");function de(a){let e,s,l,n=[{type:"text"},{class:"px-4 py-2 ring rounded-lg"},a[2]],r={};for(let t=0;t<n.length;t+=1)r=h(r,n[t]);return{c(){e=v("input"),this.h()},l(t){e=y(t,"INPUT",{type:!0,class:!0}),this.h()},h(){b(e,r)},m(t,i){m(t,e,i),e.autofocus&&e.focus(),N(e,a[0]),s||(l=q(e,"input",a[4]),s=!0)},p(t,i){b(e,r=A(n,[{type:"text"},{class:"px-4 py-2 ring rounded-lg"},i&4&&t[2]])),i&1&&e.value!==t[0]&&N(e,t[0])},d(t){t&&d(e),s=!1,l()}}}function me(a){let e,s,l,n=[{type:"password"},{class:"px-4 py-2 ring rounded-lg"},a[2]],r={};for(let t=0;t<n.length;t+=1)r=h(r,n[t]);return{c(){e=v("input"),this.h()},l(t){e=y(t,"INPUT",{type:!0,class:!0}),this.h()},h(){b(e,r)},m(t,i){m(t,e,i),e.autofocus&&e.focus(),N(e,a[0]),s||(l=q(e,"input",a[3]),s=!0)},p(t,i){b(e,r=A(n,[{type:"password"},{class:"px-4 py-2 ring rounded-lg"},i&4&&t[2]])),i&1&&e.value!==t[0]&&N(e,t[0])},d(t){t&&d(e),s=!1,l()}}}function he(a){let e;function s(r,t){return r[1]?me:de}let l=s(a),n=l(a);return{c(){n.c(),e=K()},l(r){n.l(r),e=K()},m(r,t){n.m(r,t),m(r,e,t)},p(r,[t]){l===(l=s(r))&&n?n.p(r,t):(n.d(1),n=l(r),n&&(n.c(),n.m(e.parentNode,e)))},i:G,o:G,d(r){r&&d(e),n.d(r)}}}function ge(a,e,s){const l=["password","value"];let n=P(e,l),{password:r=!1}=e,{value:t=""}=e;function i(){t=this.value,s(0,t)}function f(){t=this.value,s(0,t)}return a.$$set=p=>{e=h(h({},e),Z(p)),s(2,n=P(e,l)),"password"in p&&s(1,r=p.password),"value"in p&&s(0,t=p.value)},[t,r,n,i,f]}class X extends O{constructor(e){super(),j(this,e,ge,he,L,{password:1,value:0})}}function be(a){let e,s;const l=a[2].default,n=ae(l,a,a[1],null);let r=[{class:"btn-primary"},a[0]],t={};for(let i=0;i<r.length;i+=1)t=h(t,r[i]);return{c(){e=v("button"),n&&n.c(),this.h()},l(i){e=y(i,"BUTTON",{class:!0});var f=z(e);n&&n.l(f),f.forEach(d),this.h()},h(){b(e,t)},m(i,f){m(i,e,f),n&&n.m(e,null),e.autofocus&&e.focus(),s=!0},p(i,[f]){n&&n.p&&(!s||f&2)&&le(n,l,i,i[1],s?re(l,i[1],f,null):ie(i[1]),null),b(e,t=A(r,[{class:"btn-primary"},f&1&&i[0]]))},i(i){s||(k(n,i),s=!0)},o(i){w(n,i),s=!1},d(i){i&&d(e),n&&n.d(i)}}}function ve(a,e,s){const l=[];let n=P(e,l),{$$slots:r={},$$scope:t}=e;return a.$$set=i=>{e=h(h({},e),Z(i)),s(0,n=P(e,l)),"$$scope"in i&&s(1,t=i.$$scope)},[n,t,r]}class ye extends O{constructor(e){super(),j(this,e,ve,be,L,{})}}function Y(a){let e,s;return{c(){e=v("span"),s=ee(a[2]),this.h()},l(l){e=y(l,"SPAN",{class:!0});var n=z(e);s=te(n,a[2]),n.forEach(d),this.h()},h(){x(e,"class","text-red-500")},m(l,n){m(l,e,n),C(e,s)},p(l,n){n&4&&fe(s,l[2])},d(l){l&&d(e)}}}function ke(a){let e;return{c(){e=ee("Login")},l(s){e=te(s,"Login")},m(s,l){m(s,e,l)},d(s){s&&d(e)}}}function we(a){let e,s,l,n,r,t,i,f,p,g,_,D,c=a[2]&&Y(a);function se(u){a[6](u)}let F={placeholder:"E-mail address..."};a[0]!==void 0&&(F.value=a[0]),l=new X({props:F}),H.push(()=>Q(l,"value",se));function ne(u){a[7](u)}let M={password:!0,placeholder:"Password..."};return a[1]!==void 0&&(M.value=a[1]),t=new X({props:M}),H.push(()=>Q(t,"value",ne)),p=new ye({props:{type:"submit",disabled:!a[0]||!a[1],$$slots:{default:[ke]},$$scope:{ctx:a}}}),{c(){c&&c.c(),e=U(),s=v("form"),$(l.$$.fragment),r=U(),$(t.$$.fragment),f=U(),$(p.$$.fragment),this.h()},l(u){c&&c.l(u),e=E(u),s=y(u,"FORM",{class:!0});var o=z(s);I(l.$$.fragment,o),r=E(o),I(t.$$.fragment,o),f=E(o),I(p.$$.fragment,o),o.forEach(d),this.h()},h(){x(s,"class","flex flex-col items-start gap-4")},m(u,o){c&&c.m(u,o),m(u,e,o),m(u,s,o),B(l,s,null),C(s,r),B(t,s,null),C(s,f),B(p,s,null),g=!0,_||(D=q(s,"submit",oe(a[3])),_=!0)},p(u,[o]){u[2]?c?c.p(u,o):(c=Y(u),c.c(),c.m(e.parentNode,e)):c&&(c.d(1),c=null);const R={};!n&&o&1&&(n=!0,R.value=u[0],J(()=>n=!1)),l.$set(R);const W={};!i&&o&2&&(i=!0,W.value=u[1],J(()=>i=!1)),t.$set(W);const T={};o&3&&(T.disabled=!u[0]||!u[1]),o&256&&(T.$$scope={dirty:o,ctx:u}),p.$set(T)},i(u){g||(k(l.$$.fragment,u),k(t.$$.fragment,u),k(p.$$.fragment,u),g=!0)},o(u){w(l.$$.fragment,u),w(t.$$.fragment,u),w(p.$$.fragment,u),g=!1},d(u){u&&(d(e),d(s)),c&&c.d(u),S(l),S(t),S(p),_=!1,D()}}}function Pe(a,e,s){let l;ue(a,_e,_=>s(5,l=_));let{redirect:n="/"}=e,r="",t="",i="";async function f(){try{await ce.collection("users").authWithPassword(r,t),await V(n)}catch(_){console.error(_),s(2,i=i(400,"Incorrect login information."))}}function p(_){r=_,s(0,r)}function g(_){t=_,s(1,t)}return a.$$set=_=>{"redirect"in _&&s(4,n=_.redirect)},a.$$.update=()=>{a.$$.dirty&48&&l&&V(n)},[r,t,i,f,n,l,p,g]}class Ee extends O{constructor(e){super(),j(this,e,Pe,we,L,{redirect:4})}}export{Ee as component};
