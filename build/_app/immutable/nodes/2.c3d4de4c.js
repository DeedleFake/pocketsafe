import{x as gn,y as bn,z as ve,A as vn,s as W,n as te,g as C,c as N,h as P,i as L,d as D,k as O,u as ne,p as ie,q as oe,B as E,C as he,D as le,E as se,F as ce,v as we,r as ke,f as ge,l as Y,m as X,e as V,w as U,G as Ce,H as St,I as Pe,J as _n,K as Ct,L as Pt,M as ct,N as yn,o as wn,O as Be,P as Ue}from"../chunks/scheduler.df21a823.js";import{h as Z,t as _,c as x,b as v,S as G,i as z,d as b,v as M,e as p,g as S,a as w,n as F,o as ue,j as T,k as j,m as I,l as $,p as Oe,q as Re,s as me}from"../chunks/index.99917230.js";import{j as kn,w as Ot,k as Rt,l as Et}from"../chunks/singletons.cbc1b287.js";const Sn=typeof window<"u"?window:typeof globalThis<"u"?globalThis:global;function at(s,e){const t=e.token={};function n(i,o,l,r){if(e.token!==t)return;e.resolved=r;let c=e.ctx;l!==void 0&&(c=c.slice(),c[l]=r);const a=i&&(e.current=i)(c);let u=!1;e.block&&(e.blocks?e.blocks.forEach((f,d)=>{d!==o&&f&&(Z(),_(f,1,1,()=>{e.blocks[d]===f&&(e.blocks[d]=null)}),x())}):e.block.d(1),a.c(),v(a,1),a.m(e.mount(),e.anchor),u=!0),e.block=a,e.blocks&&(e.blocks[o]=a),u&&vn()}if(gn(s)){const i=bn();if(s.then(o=>{ve(i),n(e.then,1,e.value,o),ve(null)},o=>{if(ve(i),n(e.catch,2,e.error,o),ve(null),!e.hasCatch)throw o}),e.current!==e.pending)return n(e.pending,0),!0}else{if(e.current!==e.then)return n(e.then,1,e.value,s),!0;e.resolved=s}}function Cn(s,e,t){const n=e.slice(),{resolved:i}=s;s.current===s.then&&(n[s.value]=i),s.current===s.catch&&(n[s.error]=i),s.block.p(n,t)}function Ee(s,e){const t={},n={},i={$$scope:1};let o=s.length;for(;o--;){const l=s[o],r=e[o];if(r){for(const c in l)c in r||(n[c]=1);for(const c in r)i[c]||(t[c]=r[c],i[c]=1);s[o]=r}else for(const c in l)i[c]=1}for(const l in n)l in t||(t[l]=void 0);return t}const _e="src/lib/Nav.svelte",Pn=s=>({}),ut=s=>({}),On=s=>({}),dt=s=>({}),Rn=s=>({}),ft=s=>({});function Ae(s){let e,t,n,i,o,l,r;const c=s[1].start,a=te(c,s,s[0],ft),u=s[1].middle,f=te(u,s,s[0],dt),d=s[1].end,h=te(d,s,s[0],ut),m={c:function(){e=C("div"),t=C("div"),a&&a.c(),n=N(),i=C("div"),f&&f.c(),o=N(),l=C("div"),h&&h.c(),this.h()},l:function(y){e=P(y,"DIV",{class:!0});var g=L(e);t=P(g,"DIV",{class:!0});var J=L(t);a&&a.l(J),J.forEach(p),n=D(g),i=P(g,"DIV",{class:!0});var ae=L(i);f&&f.l(ae),ae.forEach(p),o=D(g),l=P(g,"DIV",{class:!0});var A=L(l);h&&h.l(A),A.forEach(p),g.forEach(p),this.h()},h:function(){S(t,"class","flex flex-row gap-2 items-center"),O(t,_e,13,1,139),S(i,"class","flex flex-row gap-2 items-center"),O(i,_e,14,1,214),S(l,"class","flex flex-row gap-2 items-center"),O(l,_e,15,1,290),S(e,"class","min-h-8 p-2 flex flex-row justify-between outline outline-2 outline-slate-300 dark:outline-slate-700 "),O(e,_e,0,0,0)},m:function(y,g){w(y,e,g),F(e,t),a&&a.m(t,null),F(e,n),F(e,i),f&&f.m(i,null),F(e,o),F(e,l),h&&h.m(l,null),r=!0},p:function(y,[g]){a&&a.p&&(!r||g&1)&&ne(a,c,y,y[0],r?oe(c,y[0],g,Rn):ie(y[0]),ft),f&&f.p&&(!r||g&1)&&ne(f,u,y,y[0],r?oe(u,y[0],g,On):ie(y[0]),dt),h&&h.p&&(!r||g&1)&&ne(h,d,y,y[0],r?oe(d,y[0],g,Pn):ie(y[0]),ut)},i:function(y){r||(v(a,y),v(f,y),v(h,y),r=!0)},o:function(y){_(a,y),_(f,y),_(h,y),r=!1},d:function(y){y&&p(e),a&&a.d(y),f&&f.d(y),h&&h.d(y)}};return b("SvelteRegisterBlock",{block:m,id:Ae.name,type:"component",source:"",ctx:s}),m}function En(s,e,t){let{$$slots:n={},$$scope:i}=e;M("Nav",n,["start","middle","end"]);const o=[];return Object.keys(e).forEach(l=>{!~o.indexOf(l)&&l.slice(0,2)!=="$$"&&l!=="slot"&&console.warn(`<Nav> was created with unknown prop '${l}'`)}),s.$$set=l=>{"$$scope"in l&&t(0,i=l.$$scope)},[i,n]}class Tt extends G{constructor(e){super(e),z(this,e,En,Ae,W,{}),b("SvelteRegisterComponent",{component:this,tagName:"Nav",options:e,id:Ae.name})}}const Tn="src/lib/Body.svelte";function Ne(s){let e,t;const n=s[1].default,i=te(n,s,s[0],null),o={c:function(){e=C("div"),i&&i.c(),this.h()},l:function(r){e=P(r,"DIV",{class:!0});var c=L(e);i&&i.l(c),c.forEach(p),this.h()},h:function(){S(e,"class","flex flex-col grow justify-center items-center gap-2"),O(e,Tn,0,0,0)},m:function(r,c){w(r,e,c),i&&i.m(e,null),t=!0},p:function(r,[c]){i&&i.p&&(!t||c&1)&&ne(i,n,r,r[0],t?oe(n,r[0],c,null):ie(r[0]),null)},i:function(r){t||(v(i,r),t=!0)},o:function(r){_(i,r),t=!1},d:function(r){r&&p(e),i&&i.d(r)}};return b("SvelteRegisterBlock",{block:o,id:Ne.name,type:"component",source:"",ctx:s}),o}function jn(s,e,t){let{$$slots:n={},$$scope:i}=e;M("Body",n,["default"]);const o=[];return Object.keys(e).forEach(l=>{!~o.indexOf(l)&&l.slice(0,2)!=="$$"&&l!=="slot"&&console.warn(`<Body> was created with unknown prop '${l}'`)}),s.$$set=l=>{"$$scope"in l&&t(0,i=l.$$scope)},[i,n]}class Te extends G{constructor(e){super(e),z(this,e,jn,Ne,W,{}),b("SvelteRegisterComponent",{component:this,tagName:"Body",options:e,id:Ne.name})}}const ht=kn("goto"),In="src/lib/Button.svelte";function De(s){let e,t,n,i,o;const l=s[7].default,r=te(l,s,s[6],null);let c=[{class:t="px-2 border-4 rounded-2xl text-white transition-all "+s[1]+" "+s[0]},s[3]],a={};for(let f=0;f<c.length;f+=1)a=E(a,c[f]);const u={c:function(){e=C("button"),r&&r.c(),this.h()},l:function(d){e=P(d,"BUTTON",{class:!0});var h=L(e);r&&r.l(h),h.forEach(p),this.h()},h:function(){ce(e,a),O(e,In,42,0,835)},m:function(d,h){w(d,e,h),r&&r.m(e,null),e.autofocus&&e.focus(),n=!0,i||(o=ue(e,"click",s[2],!1,!1,!1,!1),i=!0)},p:function(d,[h]){r&&r.p&&(!n||h&64)&&ne(r,l,d,d[6],n?oe(l,d[6],h,null):ie(d[6]),null),ce(e,a=Ee(c,[(!n||h&3&&t!==(t="px-2 border-4 rounded-2xl text-white transition-all "+d[1]+" "+d[0]))&&{class:t},h&8&&d[3]]))},i:function(d){n||(v(r,d),n=!0)},o:function(d){_(r,d),n=!1},d:function(d){d&&p(e),r&&r.d(d),i=!1,o()}};return b("SvelteRegisterBlock",{block:u,id:De.name,type:"component",source:"",ctx:s}),u}function $n(s,e,t){let n,i;const o=["href","secondary"];let l=he(e,o),{$$slots:r={},$$scope:c}=e;M("Button",r,["default"]);let{href:a=null}=e,{secondary:u=!1}=e;const f=le();async function d(h){f("click",h,{cancelable:!0})&&a&&await ht(a)}return s.$$set=h=>{t(9,e=E(E({},e),se(h))),t(3,l=he(e,o)),"href"in h&&t(4,a=h.href),"secondary"in h&&t(5,u=h.secondary),"$$scope"in h&&t(6,c=h.$$scope)},s.$capture_state=()=>({createEventDispatcher:le,goto:ht,href:a,secondary:u,dispatch:f,click:d,extraStyle:i,mode:n}),s.$inject_state=h=>{t(9,e=E(E({},e),h)),"href"in e&&t(4,a=h.href),"secondary"in e&&t(5,u=h.secondary),"extraStyle"in e&&t(0,i=h.extraStyle),"mode"in e&&t(1,n=h.mode)},e&&"$$inject"in e&&s.$inject_state(e.$$inject),s.$$.update=()=>{s.$$.dirty&32&&t(1,n=u?`
			bg-teal-500
			border-teal-400
			hover:bg-teal-600
			hover:border-teal-500
			active:bg-teal-700
			active:border-teal-600
			disabled:bg-teal-200
			disabled:text-teal-700
			disabled:border-teal-300
			`:`
			bg-cyan-500
			border-cyan-400
			hover:bg-cyan-600
			hover:border-cyan-500
			active:bg-cyan-700
			active:border-cyan-600
			disabled:bg-cyan-200
			disabled:text-cyan-700
			disabled:border-cyan-300
			`),t(0,i=e.class??"")},e=se(e),[i,n,d,l,a,u,c,r]}class pe extends G{constructor(e){super(e),z(this,e,$n,De,W,{href:4,secondary:5}),b("SvelteRegisterComponent",{component:this,tagName:"Button",options:e,id:De.name})}get href(){throw new Error("<Button>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set href(e){throw new Error("<Button>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get secondary(){throw new Error("<Button>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set secondary(e){throw new Error("<Button>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}}function B(s,e,t,n){return new(t||(t=Promise))(function(i,o){function l(a){try{c(n.next(a))}catch(u){o(u)}}function r(a){try{c(n.throw(a))}catch(u){o(u)}}function c(a){a.done?i(a.value):function(f){return f instanceof t?f:new t(function(d){d(f)})}(a.value).then(l,r)}c((n=n.apply(s,e||[])).next())})}class Q extends Error{constructor(e){var t,n,i,o;super("ClientResponseError"),this.url="",this.status=0,this.response={},this.isAbort=!1,this.originalError=null,Object.setPrototypeOf(this,Q.prototype),e!==null&&typeof e=="object"&&(this.url=typeof e.url=="string"?e.url:"",this.status=typeof e.status=="number"?e.status:0,this.isAbort=!!e.isAbort,this.originalError=e.originalError,e.response!==null&&typeof e.response=="object"?this.response=e.response:e.data!==null&&typeof e.data=="object"?this.response=e.data:this.response={}),this.originalError||e instanceof Q||(this.originalError=e),typeof DOMException<"u"&&e instanceof DOMException&&(this.isAbort=!0),this.name="ClientResponseError "+this.status,this.message=(t=this.response)===null||t===void 0?void 0:t.message,this.message||(this.isAbort?this.message="The request was autocancelled. You can find more info in https://github.com/pocketbase/js-sdk#auto-cancellation.":!((o=(i=(n=this.originalError)===null||n===void 0?void 0:n.cause)===null||i===void 0?void 0:i.message)===null||o===void 0)&&o.includes("ECONNREFUSED ::1")?this.message="Failed to connect to the PocketBase server. Try changing the SDK URL from localhost to 127.0.0.1 (https://github.com/pocketbase/js-sdk/issues/21).":this.message="Something went wrong while processing your request.")}get data(){return this.response}toJSON(){return Object.assign({},this)}}const ye=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/;function Bn(s,e){const t={};if(typeof s!="string")return t;const n=Object.assign({},e||{}).decode||Ln;let i=0;for(;i<s.length;){const o=s.indexOf("=",i);if(o===-1)break;let l=s.indexOf(";",i);if(l===-1)l=s.length;else if(l<o){i=s.lastIndexOf(";",o-1)+1;continue}const r=s.slice(i,o).trim();if(t[r]===void 0){let c=s.slice(o+1,l).trim();c.charCodeAt(0)===34&&(c=c.slice(1,-1));try{t[r]=n(c)}catch{t[r]=c}}i=l+1}return t}function mt(s,e,t){const n=Object.assign({},t||{}),i=n.encode||qn;if(!ye.test(s))throw new TypeError("argument name is invalid");const o=i(e);if(o&&!ye.test(o))throw new TypeError("argument val is invalid");let l=s+"="+o;if(n.maxAge!=null){const r=n.maxAge-0;if(isNaN(r)||!isFinite(r))throw new TypeError("option maxAge is invalid");l+="; Max-Age="+Math.floor(r)}if(n.domain){if(!ye.test(n.domain))throw new TypeError("option domain is invalid");l+="; Domain="+n.domain}if(n.path){if(!ye.test(n.path))throw new TypeError("option path is invalid");l+="; Path="+n.path}if(n.expires){if(!function(c){return Object.prototype.toString.call(c)==="[object Date]"||c instanceof Date}(n.expires)||isNaN(n.expires.valueOf()))throw new TypeError("option expires is invalid");l+="; Expires="+n.expires.toUTCString()}if(n.httpOnly&&(l+="; HttpOnly"),n.secure&&(l+="; Secure"),n.priority)switch(typeof n.priority=="string"?n.priority.toLowerCase():n.priority){case"low":l+="; Priority=Low";break;case"medium":l+="; Priority=Medium";break;case"high":l+="; Priority=High";break;default:throw new TypeError("option priority is invalid")}if(n.sameSite)switch(typeof n.sameSite=="string"?n.sameSite.toLowerCase():n.sameSite){case!0:l+="; SameSite=Strict";break;case"lax":l+="; SameSite=Lax";break;case"strict":l+="; SameSite=Strict";break;case"none":l+="; SameSite=None";break;default:throw new TypeError("option sameSite is invalid")}return l}function Ln(s){return s.indexOf("%")!==-1?decodeURIComponent(s):s}function qn(s){return encodeURIComponent(s)}let jt;function Se(s){if(s)try{const e=decodeURIComponent(jt(s.split(".")[1]).split("").map(function(t){return"%"+("00"+t.charCodeAt(0).toString(16)).slice(-2)}).join(""));return JSON.parse(e)||{}}catch{}return{}}function It(s,e=0){let t=Se(s);return!(Object.keys(t).length>0&&(!t.exp||t.exp-e>Date.now()/1e3))}jt=typeof atob=="function"?atob:s=>{let e=String(s).replace(/=+$/,"");if(e.length%4==1)throw new Error("'atob' failed: The string to be decoded is not correctly encoded.");for(var t,n,i=0,o=0,l="";n=e.charAt(o++);~n&&(t=i%4?64*t+n:n,i++%4)?l+=String.fromCharCode(255&t>>(-2*i&6)):0)n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(n);return l};const pt="pb_auth";class Un{constructor(){this.baseToken="",this.baseModel=null,this._onChangeCallbacks=[]}get token(){return this.baseToken}get model(){return this.baseModel}get isValid(){return!It(this.token)}get isAdmin(){return Se(this.token).type==="admin"}get isAuthRecord(){return Se(this.token).type==="authRecord"}save(e,t){this.baseToken=e||"",this.baseModel=t||null,this.triggerChange()}clear(){this.baseToken="",this.baseModel=null,this.triggerChange()}loadFromCookie(e,t=pt){const n=Bn(e||"")[t]||"";let i={};try{i=JSON.parse(n),(typeof i===null||typeof i!="object"||Array.isArray(i))&&(i={})}catch{}this.save(i.token||"",i.model||null)}exportToCookie(e,t=pt){var n,i;const o={secure:!0,sameSite:!0,httpOnly:!0,path:"/"},l=Se(this.token);l!=null&&l.exp?o.expires=new Date(1e3*l.exp):o.expires=new Date("1970-01-01"),e=Object.assign({},o,e);const r={token:this.token,model:this.model?JSON.parse(JSON.stringify(this.model)):null};let c=mt(t,JSON.stringify(r),e);const a=typeof Blob<"u"?new Blob([c]).size:c.length;if(r.model&&a>4096){r.model={id:(n=r==null?void 0:r.model)===null||n===void 0?void 0:n.id,email:(i=r==null?void 0:r.model)===null||i===void 0?void 0:i.email};const u=["collectionId","username","verified"];for(const f in this.model)u.includes(f)&&(r.model[f]=this.model[f]);c=mt(t,JSON.stringify(r),e)}return c}onChange(e,t=!1){return this._onChangeCallbacks.push(e),t&&e(this.token,this.model),()=>{for(let n=this._onChangeCallbacks.length-1;n>=0;n--)if(this._onChangeCallbacks[n]==e)return delete this._onChangeCallbacks[n],void this._onChangeCallbacks.splice(n,1)}}triggerChange(){for(const e of this._onChangeCallbacks)e&&e(this.token,this.model)}}class An extends Un{constructor(e="pocketbase_auth"){super(),this.storageFallback={},this.storageKey=e,this._bindStorageEvent()}get token(){return(this._storageGet(this.storageKey)||{}).token||""}get model(){return(this._storageGet(this.storageKey)||{}).model||null}save(e,t){this._storageSet(this.storageKey,{token:e,model:t}),super.save(e,t)}clear(){this._storageRemove(this.storageKey),super.clear()}_storageGet(e){if(typeof window<"u"&&(window!=null&&window.localStorage)){const t=window.localStorage.getItem(e)||"";try{return JSON.parse(t)}catch{return t}}return this.storageFallback[e]}_storageSet(e,t){if(typeof window<"u"&&(window!=null&&window.localStorage)){let n=t;typeof t!="string"&&(n=JSON.stringify(t)),window.localStorage.setItem(e,n)}else this.storageFallback[e]=t}_storageRemove(e){var t;typeof window<"u"&&(window!=null&&window.localStorage)&&((t=window.localStorage)===null||t===void 0||t.removeItem(e)),delete this.storageFallback[e]}_bindStorageEvent(){typeof window<"u"&&(window!=null&&window.localStorage)&&window.addEventListener&&window.addEventListener("storage",e=>{if(e.key!=this.storageKey)return;const t=this._storageGet(this.storageKey)||{};super.save(t.token||"",t.model||null)})}}class de{constructor(e){this.client=e}}class Nn extends de{getAll(e){return e=Object.assign({method:"GET"},e),this.client.send("/api/settings",e)}update(e,t){return t=Object.assign({method:"PATCH",body:e},t),this.client.send("/api/settings",t)}testS3(e="storage",t){return t=Object.assign({method:"POST",body:{filesystem:e}},t),this.client.send("/api/settings/test/s3",t).then(()=>!0)}testEmail(e,t,n){return n=Object.assign({method:"POST",body:{email:e,template:t}},n),this.client.send("/api/settings/test/email",n).then(()=>!0)}generateAppleClientSecret(e,t,n,i,o,l){return l=Object.assign({method:"POST",body:{clientId:e,teamId:t,keyId:n,privateKey:i,duration:o}},l),this.client.send("/api/settings/apple/generate-client-secret",l)}}class rt extends de{decode(e){return e}getFullList(e,t){if(typeof e=="number")return this._getFullList(e,t);let n=500;return(t=Object.assign({},e,t)).batch&&(n=t.batch,delete t.batch),this._getFullList(n,t)}getList(e=1,t=30,n){return(n=Object.assign({method:"GET"},n)).query=Object.assign({page:e,perPage:t},n.query),this.client.send(this.baseCrudPath,n).then(i=>{var o;return i.items=((o=i.items)===null||o===void 0?void 0:o.map(l=>this.decode(l)))||[],i})}getFirstListItem(e,t){return(t=Object.assign({requestKey:"one_by_filter_"+this.baseCrudPath+"_"+e},t)).query=Object.assign({filter:e,skipTotal:1},t.query),this.getList(1,1,t).then(n=>{var i;if(!(!((i=n==null?void 0:n.items)===null||i===void 0)&&i.length))throw new Q({status:404,data:{code:404,message:"The requested resource wasn't found.",data:{}}});return n.items[0]})}getOne(e,t){return t=Object.assign({method:"GET"},t),this.client.send(this.baseCrudPath+"/"+encodeURIComponent(e),t).then(n=>this.decode(n))}create(e,t){return t=Object.assign({method:"POST",body:e},t),this.client.send(this.baseCrudPath,t).then(n=>this.decode(n))}update(e,t,n){return n=Object.assign({method:"PATCH",body:t},n),this.client.send(this.baseCrudPath+"/"+encodeURIComponent(e),n).then(i=>this.decode(i))}delete(e,t){return t=Object.assign({method:"DELETE"},t),this.client.send(this.baseCrudPath+"/"+encodeURIComponent(e),t).then(()=>!0)}_getFullList(e=500,t){(t=t||{}).query=Object.assign({skipTotal:1},t.query);let n=[],i=o=>B(this,void 0,void 0,function*(){return this.getList(o,e||500,t).then(l=>{const r=l.items;return n=n.concat(r),r.length==l.perPage?i(o+1):n})});return i(1)}}function K(s,e,t,n){const i=n!==void 0;return i||t!==void 0?i?(console.warn(s),e.body=Object.assign({},e.body,t),e.query=Object.assign({},e.query,n),e):Object.assign(e,t):e}function Le(s){var e,t;(t=(e=s)._resetAutoRefresh)===null||t===void 0||t.call(e)}class Dn extends rt{get baseCrudPath(){return"/api/admins"}update(e,t,n){return super.update(e,t,n).then(i=>{var o,l;return((o=this.client.authStore.model)===null||o===void 0?void 0:o.id)===i.id&&((l=this.client.authStore.model)===null||l===void 0?void 0:l.collectionId)===void 0&&this.client.authStore.save(this.client.authStore.token,i),i})}delete(e,t){return super.delete(e,t).then(n=>{var i,o;return n&&((i=this.client.authStore.model)===null||i===void 0?void 0:i.id)===e&&((o=this.client.authStore.model)===null||o===void 0?void 0:o.collectionId)===void 0&&this.client.authStore.clear(),n})}authResponse(e){const t=this.decode((e==null?void 0:e.admin)||{});return e!=null&&e.token&&(e!=null&&e.admin)&&this.client.authStore.save(e.token,t),Object.assign({},e,{token:(e==null?void 0:e.token)||"",admin:t})}authWithPassword(e,t,n,i){return B(this,void 0,void 0,function*(){let o={method:"POST",body:{identity:e,password:t}};o=K("This form of authWithPassword(email, pass, body?, query?) is deprecated. Consider replacing it with authWithPassword(email, pass, options?).",o,n,i);const l=o.autoRefreshThreshold;delete o.autoRefreshThreshold,o.autoRefresh||Le(this.client);let r=yield this.client.send(this.baseCrudPath+"/auth-with-password",o);return r=this.authResponse(r),l&&function(a,u,f,d){Le(a);const h=a.beforeSend,m=a.authStore.model,R=a.authStore.onChange((y,g)=>{(!y||(g==null?void 0:g.id)!=(m==null?void 0:m.id)||(g!=null&&g.collectionId||m!=null&&m.collectionId)&&(g==null?void 0:g.collectionId)!=(m==null?void 0:m.collectionId))&&Le(a)});a._resetAutoRefresh=function(){R(),a.beforeSend=h,delete a._resetAutoRefresh},a.beforeSend=(y,g)=>B(this,void 0,void 0,function*(){var J;const ae=a.authStore.token;if(!((J=g.query)===null||J===void 0)&&J.autoRefresh)return h?h(y,g):{url:y,sendOptions:g};let A=a.authStore.isValid;if(A&&It(a.authStore.token,u))try{yield f()}catch{A=!1}A||(yield d());const k=g.headers||{};for(let q in k)if(q.toLowerCase()=="authorization"&&ae==k[q]&&a.authStore.token){k[q]=a.authStore.token;break}return g.headers=k,h?h(y,g):{url:y,sendOptions:g}})}(this.client,l,()=>this.authRefresh({autoRefresh:!0}),()=>this.authWithPassword(e,t,Object.assign({autoRefresh:!0},o))),r})}authRefresh(e,t){let n={method:"POST"};return n=K("This form of authRefresh(body?, query?) is deprecated. Consider replacing it with authRefresh(options?).",n,e,t),this.client.send(this.baseCrudPath+"/auth-refresh",n).then(this.authResponse.bind(this))}requestPasswordReset(e,t,n){let i={method:"POST",body:{email:e}};return i=K("This form of requestPasswordReset(email, body?, query?) is deprecated. Consider replacing it with requestPasswordReset(email, options?).",i,t,n),this.client.send(this.baseCrudPath+"/request-password-reset",i).then(()=>!0)}confirmPasswordReset(e,t,n,i,o){let l={method:"POST",body:{token:e,password:t,passwordConfirm:n}};return l=K("This form of confirmPasswordReset(resetToken, password, passwordConfirm, body?, query?) is deprecated. Consider replacing it with confirmPasswordReset(resetToken, password, passwordConfirm, options?).",l,i,o),this.client.send(this.baseCrudPath+"/confirm-password-reset",l).then(()=>!0)}}class $t extends de{constructor(){super(...arguments),this.clientId="",this.eventSource=null,this.subscriptions={},this.lastSentTopics=[],this.maxConnectTimeout=15e3,this.reconnectAttempts=0,this.maxReconnectAttempts=1/0,this.predefinedReconnectIntervals=[200,300,500,1e3,1200,1500,2e3],this.pendingConnects=[]}get isConnected(){return!!this.eventSource&&!!this.clientId&&!this.pendingConnects.length}subscribe(e,t){var n;return B(this,void 0,void 0,function*(){if(!e)throw new Error("topic must be set.");const i=function(o){const l=o;let r;try{r=JSON.parse(l==null?void 0:l.data)}catch{}t(r||{})};return this.subscriptions[e]||(this.subscriptions[e]=[]),this.subscriptions[e].push(i),this.isConnected?this.subscriptions[e].length===1?yield this.submitSubscriptions():(n=this.eventSource)===null||n===void 0||n.addEventListener(e,i):yield this.connect(),()=>B(this,void 0,void 0,function*(){return this.unsubscribeByTopicAndListener(e,i)})})}unsubscribe(e){var t;return B(this,void 0,void 0,function*(){if(this.hasSubscriptionListeners(e)){if(e){for(let n of this.subscriptions[e])(t=this.eventSource)===null||t===void 0||t.removeEventListener(e,n);delete this.subscriptions[e]}else this.subscriptions={};this.hasSubscriptionListeners()?this.hasSubscriptionListeners(e)||(yield this.submitSubscriptions()):this.disconnect()}})}unsubscribeByPrefix(e){var t;return B(this,void 0,void 0,function*(){let n=!1;for(let i in this.subscriptions)if(i.startsWith(e)){n=!0;for(let o of this.subscriptions[i])(t=this.eventSource)===null||t===void 0||t.removeEventListener(i,o);delete this.subscriptions[i]}n&&(this.hasSubscriptionListeners()?yield this.submitSubscriptions():this.disconnect())})}unsubscribeByTopicAndListener(e,t){var n;return B(this,void 0,void 0,function*(){if(!Array.isArray(this.subscriptions[e])||!this.subscriptions[e].length)return;let i=!1;for(let o=this.subscriptions[e].length-1;o>=0;o--)this.subscriptions[e][o]===t&&(i=!0,delete this.subscriptions[e][o],this.subscriptions[e].splice(o,1),(n=this.eventSource)===null||n===void 0||n.removeEventListener(e,t));i&&(this.subscriptions[e].length||delete this.subscriptions[e],this.hasSubscriptionListeners()?this.hasSubscriptionListeners(e)||(yield this.submitSubscriptions()):this.disconnect())})}hasSubscriptionListeners(e){var t,n;if(this.subscriptions=this.subscriptions||{},e)return!!(!((t=this.subscriptions[e])===null||t===void 0)&&t.length);for(let i in this.subscriptions)if(!((n=this.subscriptions[i])===null||n===void 0)&&n.length)return!0;return!1}submitSubscriptions(){return B(this,void 0,void 0,function*(){if(this.clientId)return this.addAllSubscriptionListeners(),this.lastSentTopics=this.getNonEmptySubscriptionTopics(),this.client.send("/api/realtime",{method:"POST",body:{clientId:this.clientId,subscriptions:this.lastSentTopics},query:{requestKey:this.getSubscriptionsCancelKey()}}).catch(e=>{if(!(e!=null&&e.isAbort))throw e})})}getSubscriptionsCancelKey(){return"realtime_"+this.clientId}getNonEmptySubscriptionTopics(){const e=[];for(let t in this.subscriptions)this.subscriptions[t].length&&e.push(t);return e}addAllSubscriptionListeners(){if(this.eventSource){this.removeAllSubscriptionListeners();for(let e in this.subscriptions)for(let t of this.subscriptions[e])this.eventSource.addEventListener(e,t)}}removeAllSubscriptionListeners(){if(this.eventSource)for(let e in this.subscriptions)for(let t of this.subscriptions[e])this.eventSource.removeEventListener(e,t)}connect(){return B(this,void 0,void 0,function*(){if(!(this.reconnectAttempts>0))return new Promise((e,t)=>{this.pendingConnects.push({resolve:e,reject:t}),this.pendingConnects.length>1||this.initConnect()})})}initConnect(){this.disconnect(!0),clearTimeout(this.connectTimeoutId),this.connectTimeoutId=setTimeout(()=>{this.connectErrorHandler(new Error("EventSource connect took too long."))},this.maxConnectTimeout),this.eventSource=new EventSource(this.client.buildUrl("/api/realtime")),this.eventSource.onerror=e=>{this.connectErrorHandler(new Error("Failed to establish realtime connection."))},this.eventSource.addEventListener("PB_CONNECT",e=>{const t=e;this.clientId=t==null?void 0:t.lastEventId,this.submitSubscriptions().then(()=>B(this,void 0,void 0,function*(){let n=3;for(;this.hasUnsentSubscriptions()&&n>0;)n--,yield this.submitSubscriptions()})).then(()=>{for(let n of this.pendingConnects)n.resolve();this.pendingConnects=[],this.reconnectAttempts=0,clearTimeout(this.reconnectTimeoutId),clearTimeout(this.connectTimeoutId)}).catch(n=>{this.clientId="",this.connectErrorHandler(n)})})}hasUnsentSubscriptions(){const e=this.getNonEmptySubscriptionTopics();if(e.length!=this.lastSentTopics.length)return!0;for(const t of e)if(!this.lastSentTopics.includes(t))return!0;return!1}connectErrorHandler(e){if(clearTimeout(this.connectTimeoutId),clearTimeout(this.reconnectTimeoutId),!this.clientId&&!this.reconnectAttempts||this.reconnectAttempts>this.maxReconnectAttempts){for(let n of this.pendingConnects)n.reject(new Q(e));return this.pendingConnects=[],void this.disconnect()}this.disconnect(!0);const t=this.predefinedReconnectIntervals[this.reconnectAttempts]||this.predefinedReconnectIntervals[this.predefinedReconnectIntervals.length-1];this.reconnectAttempts++,this.reconnectTimeoutId=setTimeout(()=>{this.initConnect()},t)}disconnect(e=!1){var t;if(clearTimeout(this.connectTimeoutId),clearTimeout(this.reconnectTimeoutId),this.removeAllSubscriptionListeners(),this.client.cancelRequest(this.getSubscriptionsCancelKey()),(t=this.eventSource)===null||t===void 0||t.close(),this.eventSource=null,this.clientId="",!e){this.reconnectAttempts=0;for(let n of this.pendingConnects)n.resolve();this.pendingConnects=[]}}}class Fn extends rt{constructor(e,t){super(e),this.collectionIdOrName=t}get baseCrudPath(){return this.baseCollectionPath+"/records"}get baseCollectionPath(){return"/api/collections/"+encodeURIComponent(this.collectionIdOrName)}subscribeOne(e,t){return B(this,void 0,void 0,function*(){return console.warn("PocketBase: subscribeOne(recordId, callback) is deprecated. Please replace it with subscribe(recordId, callback)."),this.client.realtime.subscribe(this.collectionIdOrName+"/"+e,t)})}subscribe(e,t){return B(this,void 0,void 0,function*(){if(typeof e=="function")return console.warn("PocketBase: subscribe(callback) is deprecated. Please replace it with subscribe('*', callback)."),this.client.realtime.subscribe(this.collectionIdOrName,e);if(!t)throw new Error("Missing subscription callback.");if(e==="")throw new Error("Missing topic.");let n=this.collectionIdOrName;return e!=="*"&&(n+="/"+e),this.client.realtime.subscribe(n,t)})}unsubscribe(e){return B(this,void 0,void 0,function*(){return e==="*"?this.client.realtime.unsubscribe(this.collectionIdOrName):e?this.client.realtime.unsubscribe(this.collectionIdOrName+"/"+e):this.client.realtime.unsubscribeByPrefix(this.collectionIdOrName)})}getFullList(e,t){if(typeof e=="number")return super.getFullList(e,t);const n=Object.assign({},e,t);return super.getFullList(n)}getList(e=1,t=30,n){return super.getList(e,t,n)}getFirstListItem(e,t){return super.getFirstListItem(e,t)}getOne(e,t){return super.getOne(e,t)}create(e,t){return super.create(e,t)}update(e,t,n){return super.update(e,t,n).then(i=>{var o,l,r;return((o=this.client.authStore.model)===null||o===void 0?void 0:o.id)!==(i==null?void 0:i.id)||((l=this.client.authStore.model)===null||l===void 0?void 0:l.collectionId)!==this.collectionIdOrName&&((r=this.client.authStore.model)===null||r===void 0?void 0:r.collectionName)!==this.collectionIdOrName||this.client.authStore.save(this.client.authStore.token,i),i})}delete(e,t){return super.delete(e,t).then(n=>{var i,o,l;return!n||((i=this.client.authStore.model)===null||i===void 0?void 0:i.id)!==e||((o=this.client.authStore.model)===null||o===void 0?void 0:o.collectionId)!==this.collectionIdOrName&&((l=this.client.authStore.model)===null||l===void 0?void 0:l.collectionName)!==this.collectionIdOrName||this.client.authStore.clear(),n})}authResponse(e){const t=this.decode((e==null?void 0:e.record)||{});return this.client.authStore.save(e==null?void 0:e.token,t),Object.assign({},e,{token:(e==null?void 0:e.token)||"",record:t})}listAuthMethods(e){return e=Object.assign({method:"GET"},e),this.client.send(this.baseCollectionPath+"/auth-methods",e).then(t=>Object.assign({},t,{usernamePassword:!!(t!=null&&t.usernamePassword),emailPassword:!!(t!=null&&t.emailPassword),authProviders:Array.isArray(t==null?void 0:t.authProviders)?t==null?void 0:t.authProviders:[]}))}authWithPassword(e,t,n,i){let o={method:"POST",body:{identity:e,password:t}};return o=K("This form of authWithPassword(usernameOrEmail, pass, body?, query?) is deprecated. Consider replacing it with authWithPassword(usernameOrEmail, pass, options?).",o,n,i),this.client.send(this.baseCollectionPath+"/auth-with-password",o).then(l=>this.authResponse(l))}authWithOAuth2Code(e,t,n,i,o,l,r){let c={method:"POST",body:{provider:e,code:t,codeVerifier:n,redirectUrl:i,createData:o}};return c=K("This form of authWithOAuth2Code(provider, code, codeVerifier, redirectUrl, createData?, body?, query?) is deprecated. Consider replacing it with authWithOAuth2Code(provider, code, codeVerifier, redirectUrl, createData?, options?).",c,l,r),this.client.send(this.baseCollectionPath+"/auth-with-oauth2",c).then(a=>this.authResponse(a))}authWithOAuth2(...e){return B(this,void 0,void 0,function*(){if(e.length>1||typeof(e==null?void 0:e[0])=="string")return console.warn("PocketBase: This form of authWithOAuth2() is deprecated and may get removed in the future. Please replace with authWithOAuth2Code() OR use the authWithOAuth2() realtime form as shown in https://pocketbase.io/docs/authentication/#oauth2-integration."),this.authWithOAuth2Code((e==null?void 0:e[0])||"",(e==null?void 0:e[1])||"",(e==null?void 0:e[2])||"",(e==null?void 0:e[3])||"",(e==null?void 0:e[4])||{},(e==null?void 0:e[5])||{},(e==null?void 0:e[6])||{});const t=(e==null?void 0:e[0])||{},n=(yield this.listAuthMethods()).authProviders.find(c=>c.name===t.provider);if(!n)throw new Q(new Error(`Missing or invalid provider "${t.provider}".`));const i=this.client.buildUrl("/api/oauth2-redirect"),o=new $t(this.client);let l=null;function r(){l==null||l.close(),o.unsubscribe()}return t.urlCallback||(l=gt(void 0)),new Promise((c,a)=>B(this,void 0,void 0,function*(){var u;try{yield o.subscribe("@oauth2",m=>B(this,void 0,void 0,function*(){const R=o.clientId;try{if(!m.state||R!==m.state)throw new Error("State parameters don't match.");const y=Object.assign({},t);delete y.provider,delete y.scopes,delete y.createData,delete y.urlCallback;const g=yield this.authWithOAuth2Code(n.name,m.code,n.codeVerifier,i,t.createData,y);c(g)}catch(y){a(new Q(y))}r()}));const f={state:o.clientId};!((u=t.scopes)===null||u===void 0)&&u.length&&(f.scope=t.scopes.join(" "));const d=this._replaceQueryParams(n.authUrl+i,f);yield(t.urlCallback||function(m){l?l.location.href=m:l=gt(m)})(d)}catch(f){r(),a(new Q(f))}}))})}authRefresh(e,t){let n={method:"POST"};return n=K("This form of authRefresh(body?, query?) is deprecated. Consider replacing it with authRefresh(options?).",n,e,t),this.client.send(this.baseCollectionPath+"/auth-refresh",n).then(i=>this.authResponse(i))}requestPasswordReset(e,t,n){let i={method:"POST",body:{email:e}};return i=K("This form of requestPasswordReset(email, body?, query?) is deprecated. Consider replacing it with requestPasswordReset(email, options?).",i,t,n),this.client.send(this.baseCollectionPath+"/request-password-reset",i).then(()=>!0)}confirmPasswordReset(e,t,n,i,o){let l={method:"POST",body:{token:e,password:t,passwordConfirm:n}};return l=K("This form of confirmPasswordReset(token, password, passwordConfirm, body?, query?) is deprecated. Consider replacing it with confirmPasswordReset(token, password, passwordConfirm, options?).",l,i,o),this.client.send(this.baseCollectionPath+"/confirm-password-reset",l).then(()=>!0)}requestVerification(e,t,n){let i={method:"POST",body:{email:e}};return i=K("This form of requestVerification(email, body?, query?) is deprecated. Consider replacing it with requestVerification(email, options?).",i,t,n),this.client.send(this.baseCollectionPath+"/request-verification",i).then(()=>!0)}confirmVerification(e,t,n){let i={method:"POST",body:{token:e}};return i=K("This form of confirmVerification(token, body?, query?) is deprecated. Consider replacing it with confirmVerification(token, options?).",i,t,n),this.client.send(this.baseCollectionPath+"/confirm-verification",i).then(()=>!0)}requestEmailChange(e,t,n){let i={method:"POST",body:{newEmail:e}};return i=K("This form of requestEmailChange(newEmail, body?, query?) is deprecated. Consider replacing it with requestEmailChange(newEmail, options?).",i,t,n),this.client.send(this.baseCollectionPath+"/request-email-change",i).then(()=>!0)}confirmEmailChange(e,t,n,i){let o={method:"POST",body:{token:e,password:t}};return o=K("This form of confirmEmailChange(token, password, body?, query?) is deprecated. Consider replacing it with confirmEmailChange(token, password, options?).",o,n,i),this.client.send(this.baseCollectionPath+"/confirm-email-change",o).then(()=>!0)}listExternalAuths(e,t){return t=Object.assign({method:"GET"},t),this.client.send(this.baseCrudPath+"/"+encodeURIComponent(e)+"/external-auths",t)}unlinkExternalAuth(e,t,n){return n=Object.assign({method:"DELETE"},n),this.client.send(this.baseCrudPath+"/"+encodeURIComponent(e)+"/external-auths/"+encodeURIComponent(t),n).then(()=>!0)}_replaceQueryParams(e,t={}){let n=e,i="";e.indexOf("?")>=0&&(n=e.substring(0,e.indexOf("?")),i=e.substring(e.indexOf("?")+1));const o={},l=i.split("&");for(const r of l){if(r=="")continue;const c=r.split("=");o[decodeURIComponent(c[0].replace(/\+/g," "))]=decodeURIComponent((c[1]||"").replace(/\+/g," "))}for(let r in t)t.hasOwnProperty(r)&&(t[r]==null?delete o[r]:o[r]=t[r]);i="";for(let r in o)o.hasOwnProperty(r)&&(i!=""&&(i+="&"),i+=encodeURIComponent(r.replace(/%20/g,"+"))+"="+encodeURIComponent(o[r].replace(/%20/g,"+")));return i!=""?n+"?"+i:n}}function gt(s){if(typeof window>"u"||!(window!=null&&window.open))throw new Q(new Error("Not in a browser context - please pass a custom urlCallback function."));let e=1024,t=768,n=window.innerWidth,i=window.innerHeight;e=e>n?n:e,t=t>i?i:t;let o=n/2-e/2,l=i/2-t/2;return window.open(s,"popup_window","width="+e+",height="+t+",top="+l+",left="+o+",resizable,menubar=no")}class Vn extends rt{get baseCrudPath(){return"/api/collections"}import(e,t=!1,n){return B(this,void 0,void 0,function*(){return n=Object.assign({method:"PUT",body:{collections:e,deleteMissing:t}},n),this.client.send(this.baseCrudPath+"/import",n).then(()=>!0)})}}class Kn extends de{getRequestsList(e=1,t=30,n){return(n=Object.assign({method:"GET"},n)).query=Object.assign({page:e,perPage:t},n.query),this.client.send("/api/logs/requests",n)}getRequest(e,t){return t=Object.assign({method:"GET"},t),this.client.send("/api/logs/requests/"+encodeURIComponent(e),t)}getRequestsStats(e){return e=Object.assign({method:"GET"},e),this.client.send("/api/logs/requests/stats",e)}}class Wn extends de{check(e){return e=Object.assign({method:"GET"},e),this.client.send("/api/health",e)}}class Gn extends de{getUrl(e,t,n={}){if(!t||!(e!=null&&e.id)||!(e!=null&&e.collectionId)&&!(e!=null&&e.collectionName))return"";const i=[];i.push("api"),i.push("files"),i.push(encodeURIComponent(e.collectionId||e.collectionName)),i.push(encodeURIComponent(e.id)),i.push(encodeURIComponent(t));let o=this.client.buildUrl(i.join("/"));if(Object.keys(n).length){n.download===!1&&delete n.download;const l=new URLSearchParams(n);o+=(o.includes("?")?"&":"?")+l}return o}getToken(e){return e=Object.assign({method:"POST"},e),this.client.send("/api/files/token",e).then(t=>(t==null?void 0:t.token)||"")}}class zn extends de{getFullList(e){return e=Object.assign({method:"GET"},e),this.client.send("/api/backups",e)}create(e,t){return t=Object.assign({method:"POST",body:{name:e}},t),this.client.send("/api/backups",t).then(()=>!0)}upload(e,t){return t=Object.assign({method:"POST",body:e},t),this.client.send("/api/backups/upload",t).then(()=>!0)}delete(e,t){return t=Object.assign({method:"DELETE"},t),this.client.send(`/api/backups/${encodeURIComponent(e)}`,t).then(()=>!0)}restore(e,t){return t=Object.assign({method:"POST"},t),this.client.send(`/api/backups/${encodeURIComponent(e)}/restore`,t).then(()=>!0)}getDownloadUrl(e,t){return this.client.buildUrl(`/api/backups/${encodeURIComponent(t)}?token=${encodeURIComponent(e)}`)}}const Mn=["requestKey","$cancelKey","$autoCancel","fetch","headers","body","query","params","cache","credentials","headers","integrity","keepalive","method","mode","redirect","referrer","referrerPolicy","signal","window"];class Hn{constructor(e="/",t,n="en-US"){this.cancelControllers={},this.recordServices={},this.enableAutoCancellation=!0,this.baseUrl=e,this.lang=n,this.authStore=t||new An,this.admins=new Dn(this),this.collections=new Vn(this),this.files=new Gn(this),this.logs=new Kn(this),this.settings=new Nn(this),this.realtime=new $t(this),this.health=new Wn(this),this.backups=new zn(this)}collection(e){return this.recordServices[e]||(this.recordServices[e]=new Fn(this,e)),this.recordServices[e]}autoCancellation(e){return this.enableAutoCancellation=!!e,this}cancelRequest(e){return this.cancelControllers[e]&&(this.cancelControllers[e].abort(),delete this.cancelControllers[e]),this}cancelAllRequests(){for(let e in this.cancelControllers)this.cancelControllers[e].abort();return this.cancelControllers={},this}getFileUrl(e,t,n={}){return this.files.getUrl(e,t,n)}buildUrl(e){var t;let n=this.baseUrl;return typeof window>"u"||!window.location||n.startsWith("https://")||n.startsWith("http://")||(n=!((t=window.location.origin)===null||t===void 0)&&t.endsWith("/")?window.location.origin.substring(0,window.location.origin.length-1):window.location.origin||"",this.baseUrl.startsWith("/")||(n+=window.location.pathname||"/",n+=n.endsWith("/")?"":"/"),n+=this.baseUrl),e&&(n+=n.endsWith("/")?"":"/",n+=e.startsWith("/")?e.substring(1):e),n}send(e,t){return B(this,void 0,void 0,function*(){t=this.initSendOptions(e,t);let n=this.buildUrl(e);if(this.beforeSend){const i=Object.assign({},yield this.beforeSend(n,t));i.url!==void 0||i.options!==void 0?(n=i.url||n,t=i.options||t):Object.keys(i).length&&(t=i,console!=null&&console.warn&&console.warn("Deprecated format of beforeSend return: please use `return { url, options }`, instead of `return options`."))}if(t.query!==void 0){const i=this.serializeQueryParams(t.query);i&&(n+=(n.includes("?")?"&":"?")+i),delete t.query}return this.getHeader(t.headers,"Content-Type")=="application/json"&&t.body&&typeof t.body!="string"&&(t.body=JSON.stringify(t.body)),(t.fetch||fetch)(n,t).then(i=>B(this,void 0,void 0,function*(){let o={};try{o=yield i.json()}catch{}if(this.afterSend&&(o=yield this.afterSend(i,o)),i.status>=400)throw new Q({url:i.url,status:i.status,data:o});return o})).catch(i=>{throw new Q(i)})})}initSendOptions(e,t){(t=Object.assign({method:"GET"},t)).query=t.query||{},t.body=this.convertToFormDataIfNeeded(t.body);for(let n in t)Mn.includes(n)||(t.query[n]=t[n],delete t[n]);if(t.query=Object.assign({},t.params,t.query),t.requestKey===void 0&&(t.$autoCancel===!1||t.query.$autoCancel===!1?t.requestKey=null:(t.$cancelKey||t.query.$cancelKey)&&(t.requestKey=t.$cancelKey||t.query.$cancelKey)),delete t.$autoCancel,delete t.query.$autoCancel,delete t.$cancelKey,delete t.query.$cancelKey,this.getHeader(t.headers,"Content-Type")!==null||this.isFormData(t.body)||(t.headers=Object.assign({},t.headers,{"Content-Type":"application/json"})),this.getHeader(t.headers,"Accept-Language")===null&&(t.headers=Object.assign({},t.headers,{"Accept-Language":this.lang})),this.authStore.token&&this.getHeader(t.headers,"Authorization")===null&&(t.headers=Object.assign({},t.headers,{Authorization:this.authStore.token})),this.enableAutoCancellation&&t.requestKey!==null){const n=t.requestKey||(t.method||"GET")+e;delete t.requestKey,this.cancelRequest(n);const i=new AbortController;this.cancelControllers[n]=i,t.signal=i.signal}return t}convertToFormDataIfNeeded(e){if(typeof FormData>"u"||e===void 0||typeof e!="object"||e===null||this.isFormData(e)||!this.hasBlobField(e))return e;const t=new FormData;for(let n in e){const i=Array.isArray(e[n])?e[n]:[e[n]];for(let o of i)t.append(n,o)}return t}hasBlobField(e){for(let t in e){const n=Array.isArray(e[t])?e[t]:[e[t]];for(let i of n)if(typeof Blob<"u"&&i instanceof Blob||typeof File<"u"&&i instanceof File)return!0}return!1}getHeader(e,t){e=e||{},t=t.toLowerCase();for(let n in e)if(n.toLowerCase()==t)return e[n];return null}isFormData(e){return e&&(e.constructor.name==="FormData"||typeof FormData<"u"&&e instanceof FormData)}serializeQueryParams(e){const t=[];for(const n in e){if(e[n]===null)continue;const i=e[n],o=encodeURIComponent(n);if(Array.isArray(i))for(const l of i)t.push(o+"="+encodeURIComponent(l));else i instanceof Date?t.push(o+"="+encodeURIComponent(i.toISOString())):typeof i!==null&&typeof i=="object"?t.push(o+"="+encodeURIComponent(JSON.stringify(i))):t.push(o+"="+encodeURIComponent(i))}return t.join("&")}}const H=new Hn(window.location.origin),re=Ot(H.authStore.model);function Fe(s){return H.files.getUrl(s,s.file,{thumb:"96x96f"})}H.authStore.onChange((s,e)=>{re.set(e)});const Jn="src/lib/UploadButton.svelte";function Bt(s){let e;const t={c:function(){e=Y("Upload")},l:function(i){e=X(i,"Upload")},m:function(i,o){w(i,e,o)},d:function(i){i&&p(e)}};return b("SvelteRegisterBlock",{block:t,id:Bt.name,type:"slot",source:"(35:0) <Button on:click={() => input.click()}>",ctx:s}),t}function Ve(s){let e,t,n,i,o,l;e=new pe({props:{$$slots:{default:[Bt]},$$scope:{ctx:s}},$$inline:!0}),e.$on("click",s[2]);const r={c:function(){T(e.$$.fragment),t=N(),n=C("input"),this.h()},l:function(a){j(e.$$.fragment,a),t=D(a),n=P(a,"INPUT",{type:!0,class:!0}),this.h()},h:function(){S(n,"type","file"),S(n,"class","hidden"),O(n,Jn,35,0,623)},m:function(a,u){I(e,a,u),w(a,t,u),w(a,n,u),s[3](n),i=!0,o||(l=ue(n,"change",s[4]),o=!0)},p:function(a,[u]){const f={};u&256&&(f.$$scope={dirty:u,ctx:a}),e.$set(f)},i:function(a){i||(v(e.$$.fragment,a),i=!0)},o:function(a){_(e.$$.fragment,a),i=!1},d:function(a){a&&(p(t),p(n)),$(e,a),s[3](null),o=!1,l()}};return b("SvelteRegisterBlock",{block:r,id:Ve.name,type:"component",source:"",ctx:s}),r}function Qn(s,e,t){let n;we(re,"currentUser"),ke(s,re,m=>t(5,n=m));let{$$slots:i={},$$scope:o}=e;M("UploadButton",i,[]);const l=le();let r=null,c=null;async function a(){let m=[];for(const R of c)m.push(H.collection("files").create({name:R.name,file:R,owner:n.id}));await Promise.all(m),l("upload",c),t(0,c=null)}const u=[];Object.keys(e).forEach(m=>{!~u.indexOf(m)&&m.slice(0,2)!=="$$"&&m!=="slot"&&console.warn(`<UploadButton> was created with unknown prop '${m}'`)});const f=()=>r.click();function d(m){ge[m?"unshift":"push"](()=>{r=m,t(1,r)})}function h(){c=this.files,t(0,c)}return s.$capture_state=()=>({createEventDispatcher:le,Button:pe,pb:H,currentUser:re,dispatch:l,input:r,files:c,upload:a,$currentUser:n}),s.$inject_state=m=>{"input"in m&&t(1,r=m.input),"files"in m&&t(0,c=m.files)},e&&"$$inject"in e&&s.$inject_state(e.$$inject),s.$$.update=()=>{s.$$.dirty&1&&c&&a()},[c,r,f,d,h]}class Lt extends G{constructor(e){super(e),z(this,e,Qn,Ve,W,{}),b("SvelteRegisterComponent",{component:this,tagName:"UploadButton",options:e,id:Ve.name})}}const qt="src/lib/TextInput.svelte";function Ut(s){let e,t,n,i=[{type:"text"},{class:s[2]},s[3]],o={};for(let r=0;r<i.length;r+=1)o=E(o,i[r]);const l={c:function(){e=C("input"),this.h()},l:function(c){e=P(c,"INPUT",{type:!0,class:!0}),this.h()},h:function(){ce(e,o),O(e,qt,26,1,438)},m:function(c,a){w(c,e,a),e.autofocus&&e.focus(),Ce(e,s[0]),t||(n=ue(e,"input",s[5]),t=!0)},p:function(c,a){ce(e,o=Ee(i,[{type:"text"},{class:c[2]},a&8&&c[3]])),a&1&&e.value!==c[0]&&Ce(e,c[0])},d:function(c){c&&p(e),t=!1,n()}};return b("SvelteRegisterBlock",{block:l,id:Ut.name,type:"else",source:"(26:0) {:else}",ctx:s}),l}function At(s){let e,t,n,i=[{type:"password"},{class:s[2]},s[3]],o={};for(let r=0;r<i.length;r+=1)o=E(o,i[r]);const l={c:function(){e=C("input"),this.h()},l:function(c){e=P(c,"INPUT",{type:!0,class:!0}),this.h()},h:function(){ce(e,o),O(e,qt,24,1,361)},m:function(c,a){w(c,e,a),e.autofocus&&e.focus(),Ce(e,s[0]),t||(n=ue(e,"input",s[4]),t=!0)},p:function(c,a){ce(e,o=Ee(i,[{type:"password"},{class:c[2]},a&8&&c[3]])),a&1&&e.value!==c[0]&&Ce(e,c[0])},d:function(c){c&&p(e),t=!1,n()}};return b("SvelteRegisterBlock",{block:l,id:At.name,type:"if",source:"(24:0) {#if password}",ctx:s}),l}function Ke(s){let e;function t(l,r){return l[1]?At:Ut}let n=t(s),i=n(s);const o={c:function(){i.c(),e=V()},l:function(r){i.l(r),e=V()},m:function(r,c){i.m(r,c),w(r,e,c)},p:function(r,[c]){n===(n=t(r))&&i?i.p(r,c):(i.d(1),i=n(r),i&&(i.c(),i.m(e.parentNode,e)))},i:U,o:U,d:function(r){r&&p(e),i.d(r)}};return b("SvelteRegisterBlock",{block:o,id:Ke.name,type:"component",source:"",ctx:s}),o}function Yn(s,e,t){const n=["password","value"];let i=he(e,n),{$$slots:o={},$$scope:l}=e;M("TextInput",o,[]);let{password:r=!1}=e,{value:c=""}=e;const a=`
		px-2
		py-1
		rounded-2xl
		border-4
		transition-all
		text-slate-100
		outline-none
		border-cyan-500
		dark:text-slate-800
		hover:border-cyan-600
		focus:border-cyan-700
		disabled:bg-cyan-200
		disabled:text-cyan-700
		disabled:border-cyan-300
	`;function u(){c=this.value,t(0,c)}function f(){c=this.value,t(0,c)}return s.$$set=d=>{e=E(E({},e),se(d)),t(3,i=he(e,n)),"password"in d&&t(1,r=d.password),"value"in d&&t(0,c=d.value)},s.$capture_state=()=>({password:r,value:c,style:a}),s.$inject_state=d=>{"password"in e&&t(1,r=d.password),"value"in e&&t(0,c=d.value)},e&&"$$inject"in e&&s.$inject_state(e.$$inject),[c,r,a,i,u,f]}class be extends G{constructor(e){super(e),z(this,e,Yn,Ke,W,{password:1,value:0}),b("SvelteRegisterComponent",{component:this,tagName:"TextInput",options:e,id:Ke.name})}get password(){throw new Error("<TextInput>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set password(e){throw new Error("<TextInput>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get value(){throw new Error("<TextInput>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set value(e){throw new Error("<TextInput>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}}const Xn="src/lib/Search.svelte";function We(s){let e,t,n,i,o,l;function r(u){s[2](u)}let c={placeholder:"Search..."};s[0]!==void 0&&(c.value=s[0]),t=new be({props:c,$$inline:!0}),ge.push(()=>Oe(t,"value",r));const a={c:function(){e=C("form"),T(t.$$.fragment),this.h()},l:function(f){e=P(f,"FORM",{class:!0});var d=L(e);j(t.$$.fragment,d),d.forEach(p),this.h()},h:function(){S(e,"class","contents"),O(e,Xn,14,0,236)},m:function(f,d){w(f,e,d),I(t,e,null),i=!0,o||(l=ue(e,"submit",St(s[1]),!1,!0,!1,!1),o=!0)},p:function(f,[d]){const h={};!n&&d&1&&(n=!0,h.value=f[0],Pe(()=>n=!1)),t.$set(h)},i:function(f){i||(v(t.$$.fragment,f),i=!0)},o:function(f){_(t.$$.fragment,f),i=!1},d:function(f){f&&p(e),$(t),o=!1,l()}};return b("SvelteRegisterBlock",{block:a,id:We.name,type:"component",source:"",ctx:s}),a}function Zn(s,e,t){let{$$slots:n={},$$scope:i}=e;M("Search",n,[]);const o=le();let{value:l=""}=e;function r(){o("submit",l)}const c=["value"];Object.keys(e).forEach(u=>{!~c.indexOf(u)&&u.slice(0,2)!=="$$"&&u!=="slot"&&console.warn(`<Search> was created with unknown prop '${u}'`)});function a(u){l=u,t(0,l)}return s.$$set=u=>{"value"in u&&t(0,l=u.value)},s.$capture_state=()=>({createEventDispatcher:le,TextInput:be,dispatch:o,value:l,submit:r}),s.$inject_state=u=>{"value"in u&&t(0,l=u.value)},e&&"$$inject"in e&&s.$inject_state(e.$$inject),[l,r,a]}class Nt extends G{constructor(e){super(e),z(this,e,Zn,We,W,{value:0}),b("SvelteRegisterComponent",{component:this,tagName:"Search",options:e,id:We.name})}get value(){throw new Error("<Search>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set value(e){throw new Error("<Search>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}}const xn="src/lib/Link.svelte";function Ge(s){let e,t,n,i,o;const l=s[4].default,r=te(l,s,s[3],null);let c=[{class:t="text-cyan-500 hover:text-cyan-600 active:text-cyan-700 transition-all "+s[1]},{href:s[0]},s[2]],a={};for(let f=0;f<c.length;f+=1)a=E(a,c[f]);const u={c:function(){e=C("a"),r&&r.c(),this.h()},l:function(d){e=P(d,"A",{class:!0,href:!0});var h=L(e);r&&r.l(h),h.forEach(p),this.h()},h:function(){ce(e,a),O(e,xn,6,0,117)},m:function(d,h){w(d,e,h),r&&r.m(e,null),n=!0,i||(o=ue(e,"click",s[5],!1,!1,!1,!1),i=!0)},p:function(d,[h]){r&&r.p&&(!n||h&8)&&ne(r,l,d,d[3],n?oe(l,d[3],h,null):ie(d[3]),null),ce(e,a=Ee(c,[(!n||h&2&&t!==(t="text-cyan-500 hover:text-cyan-600 active:text-cyan-700 transition-all "+d[1]))&&{class:t},(!n||h&1)&&{href:d[0]},h&4&&d[2]]))},i:function(d){n||(v(r,d),n=!0)},o:function(d){_(r,d),n=!1},d:function(d){d&&p(e),r&&r.d(d),i=!1,o()}};return b("SvelteRegisterBlock",{block:u,id:Ge.name,type:"component",source:"",ctx:s}),u}function ei(s,e,t){let n;const i=["href"];let o=he(e,i),{$$slots:l={},$$scope:r}=e;M("Link",l,["default"]);let{href:c=""}=e;function a(u){_n.call(this,s,u)}return s.$$set=u=>{t(6,e=E(E({},e),se(u))),t(2,o=he(e,i)),"href"in u&&t(0,c=u.href),"$$scope"in u&&t(3,r=u.$$scope)},s.$capture_state=()=>({href:c,extraStyle:n}),s.$inject_state=u=>{t(6,e=E(E({},e),u)),"href"in e&&t(0,c=u.href),"extraStyle"in e&&t(1,n=u.extraStyle)},e&&"$$inject"in e&&s.$inject_state(e.$$inject),s.$$.update=()=>{t(1,n=e.class??"")},e=se(e),[c,n,o,r,l,a]}class fe extends G{constructor(e){super(e),z(this,e,ei,Ge,W,{href:0}),b("SvelteRegisterComponent",{component:this,tagName:"Link",options:e,id:Ge.name})}get href(){throw new Error("<Link>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set href(e){throw new Error("<Link>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}}const je="src/lib/Pager.svelte";function bt(s,e,t){const n=s.slice();return n[7]=e[t],n}function ze(s){let e,t,n,i="...",o;e=new fe({props:{$$slots:{default:[Dt]},$$scope:{ctx:s}},$$inline:!0}),e.$on("click",s[3]);const l={c:function(){T(e.$$.fragment),t=N(),n=C("div"),n.textContent=i,this.h()},l:function(c){j(e.$$.fragment,c),t=D(c),n=P(c,"DIV",{"data-svelte-h":!0}),Pt(n)!=="svelte-12rhcfw"&&(n.textContent=i),this.h()},h:function(){O(n,je,24,2,464)},m:function(c,a){I(e,c,a),w(c,t,a),w(c,n,a),o=!0},p:function(c,a){const u={};a&1024&&(u.$$scope={dirty:a,ctx:c}),e.$set(u)},i:function(c){o||(v(e.$$.fragment,c),o=!0)},o:function(c){_(e.$$.fragment,c),o=!1},d:function(c){c&&(p(t),p(n)),$(e,c)}};return b("SvelteRegisterBlock",{block:l,id:ze.name,type:"if",source:"(23:1) {#if page !== 1}",ctx:s}),l}function Dt(s){let e;const t={c:function(){e=Y("1")},l:function(i){e=X(i,"1")},m:function(i,o){w(i,e,o)},d:function(i){i&&p(e)}};return b("SvelteRegisterBlock",{block:t,id:Dt.name,type:"slot",source:"(24:2) <Link on:click={(ev) => select(ev, 1)}>",ctx:s}),t}function Ft(s){let e,t;function n(...o){return s[4](s[7],...o)}e=new fe({props:{$$slots:{default:[Kt]},$$scope:{ctx:s}},$$inline:!0}),e.$on("click",n);const i={c:function(){T(e.$$.fragment)},l:function(l){j(e.$$.fragment,l)},m:function(l,r){I(e,l,r),t=!0},p:function(l,r){s=l;const c={};r&1025&&(c.$$scope={dirty:r,ctx:s}),e.$set(c)},i:function(l){t||(v(e.$$.fragment,l),t=!0)},o:function(l){_(e.$$.fragment,l),t=!1},d:function(l){$(e,l)}};return b("SvelteRegisterBlock",{block:i,id:Ft.name,type:"if",source:"(30:31) ",ctx:s}),i}function Vt(s){let e,t;const n={c:function(){e=C("div"),t=Y(s[0]),this.h()},l:function(o){e=P(o,"DIV",{});var l=L(e);t=X(l,s[0]),l.forEach(p),this.h()},h:function(){O(e,je,28,3,569)},m:function(o,l){w(o,e,l),F(e,t)},p:function(o,l){l&1&&me(t,o[0])},i:U,o:U,d:function(o){o&&p(e)}};return b("SvelteRegisterBlock",{block:n,id:Vt.name,type:"if",source:"(28:2) {#if p === page}",ctx:s}),n}function Kt(s){let e=s[7]+"",t;const n={c:function(){t=Y(e)},l:function(o){t=X(o,e)},m:function(o,l){w(o,t,l)},p:function(o,l){l&1&&e!==(e=o[7]+"")&&me(t,e)},d:function(o){o&&p(t)}};return b("SvelteRegisterBlock",{block:n,id:Kt.name,type:"slot",source:"(31:3) <Link on:click={(ev) => select(ev, p)}>",ctx:s}),n}function Me(s){let e,t,n,i;const o=[Vt,Ft],l=[];function r(a,u){return a[7]===a[0]?0:a[7]>1&&a[7]<a[1]?1:-1}~(e=r(s))&&(t=l[e]=o[e](s));const c={c:function(){t&&t.c(),n=V()},l:function(u){t&&t.l(u),n=V()},m:function(u,f){~e&&l[e].m(u,f),w(u,n,f),i=!0},p:function(u,f){let d=e;e=r(u),e===d?~e&&l[e].p(u,f):(t&&(Z(),_(l[d],1,1,()=>{l[d]=null}),x()),~e?(t=l[e],t?t.p(u,f):(t=l[e]=o[e](u),t.c()),v(t,1),t.m(n.parentNode,n)):t=null)},i:function(u){i||(v(t),i=!0)},o:function(u){_(t),i=!1},d:function(u){u&&p(n),~e&&l[e].d(u)}};return b("SvelteRegisterBlock",{block:c,id:Me.name,type:"each",source:"(27:1) {#each [page - 2, page - 1, page, page + 1, page + 2] as p}",ctx:s}),c}function He(s){let e,t="...",n,i,o;i=new fe({props:{$$slots:{default:[Wt]},$$scope:{ctx:s}},$$inline:!0}),i.$on("click",s[5]);const l={c:function(){e=C("div"),e.textContent=t,n=N(),T(i.$$.fragment),this.h()},l:function(c){e=P(c,"DIV",{"data-svelte-h":!0}),Pt(e)!=="svelte-12rhcfw"&&(e.textContent=t),n=D(c),j(i.$$.fragment,c),this.h()},h:function(){O(e,je,34,2,713)},m:function(c,a){w(c,e,a),w(c,n,a),I(i,c,a),o=!0},p:function(c,a){const u={};a&1026&&(u.$$scope={dirty:a,ctx:c}),i.$set(u)},i:function(c){o||(v(i.$$.fragment,c),o=!0)},o:function(c){_(i.$$.fragment,c),o=!1},d:function(c){c&&(p(e),p(n)),$(i,c)}};return b("SvelteRegisterBlock",{block:l,id:He.name,type:"if",source:"(34:1) {#if page !== pages}",ctx:s}),l}function Wt(s){let e;const t={c:function(){e=Y(s[1])},l:function(i){e=X(i,s[1])},m:function(i,o){w(i,e,o)},p:function(i,o){o&2&&me(e,i[1])},d:function(i){i&&p(e)}};return b("SvelteRegisterBlock",{block:t,id:Wt.name,type:"slot",source:"(36:2) <Link on:click={(ev) => select(ev, pages)}>",ctx:s}),t}function Je(s){let e,t,n,i,o=s[0]!==1&&ze(s),l=Re([s[0]-2,s[0]-1,s[0],s[0]+1,s[0]+2]),r=[];for(let f=0;f<5;f+=1)r[f]=Me(bt(s,l,f));const c=f=>_(r[f],1,1,()=>{r[f]=null});let a=s[0]!==s[1]&&He(s);const u={c:function(){e=C("div"),o&&o.c(),t=N();for(let d=0;d<5;d+=1)r[d].c();n=N(),a&&a.c(),this.h()},l:function(d){e=P(d,"DIV",{class:!0});var h=L(e);o&&o.l(h),t=D(h);for(let m=0;m<5;m+=1)r[m].l(h);n=D(h),a&&a.l(h),h.forEach(p),this.h()},h:function(){S(e,"class","flex flex-row justify-between items-center gap-4"),O(e,je,21,0,331)},m:function(d,h){w(d,e,h),o&&o.m(e,null),F(e,t);for(let m=0;m<5;m+=1)r[m]&&r[m].m(e,null);F(e,n),a&&a.m(e,null),i=!0},p:function(d,[h]){if(d[0]!==1?o?(o.p(d,h),h&1&&v(o,1)):(o=ze(d),o.c(),v(o,1),o.m(e,t)):o&&(Z(),_(o,1,1,()=>{o=null}),x()),h&7){l=Re([d[0]-2,d[0]-1,d[0],d[0]+1,d[0]+2]);let m;for(m=0;m<5;m+=1){const R=bt(d,l,m);r[m]?(r[m].p(R,h),v(r[m],1)):(r[m]=Me(R),r[m].c(),v(r[m],1),r[m].m(e,n))}for(Z(),m=5;m<5;m+=1)c(m);x()}d[0]!==d[1]?a?(a.p(d,h),h&3&&v(a,1)):(a=He(d),a.c(),v(a,1),a.m(e,null)):a&&(Z(),_(a,1,1,()=>{a=null}),x())},i:function(d){if(!i){v(o);for(let h=0;h<5;h+=1)v(r[h]);v(a),i=!0}},o:function(d){_(o),r=r.filter(Boolean);for(let h=0;h<5;h+=1)_(r[h]);_(a),i=!1},d:function(d){d&&p(e),o&&o.d(),Ct(r,d),a&&a.d()}};return b("SvelteRegisterBlock",{block:u,id:Je.name,type:"component",source:"",ctx:s}),u}function ti(s,e,t){let{$$slots:n={},$$scope:i}=e;M("Pager",n,[]);const o=le();let{page:l=1}=e,{pages:r=1}=e;function c(h,m){h==null||h.preventDefault(),t(0,l=m),o("change",m)}const a=["page","pages"];Object.keys(e).forEach(h=>{!~a.indexOf(h)&&h.slice(0,2)!=="$$"&&h!=="slot"&&console.warn(`<Pager> was created with unknown prop '${h}'`)});const u=h=>c(h,1),f=(h,m)=>c(m,h),d=h=>c(h,r);return s.$$set=h=>{"page"in h&&t(0,l=h.page),"pages"in h&&t(1,r=h.pages)},s.$capture_state=()=>({createEventDispatcher:le,Link:fe,dispatch:o,page:l,pages:r,select:c}),s.$inject_state=h=>{"page"in h&&t(0,l=h.page),"pages"in h&&t(1,r=h.pages)},e&&"$$inject"in e&&s.$inject_state(e.$$inject),s.$$.update=()=>{s.$$.dirty&3&&l>r&&c(null,r)},[l,r,c,u,f,d]}class Gt extends G{constructor(e){super(e),z(this,e,ti,Je,W,{page:0,pages:1}),b("SvelteRegisterComponent",{component:this,tagName:"Pager",options:e,id:Je.name})}get page(){throw new Error("<Pager>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set page(e){throw new Error("<Pager>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get pages(){throw new Error("<Pager>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set pages(e){throw new Error("<Pager>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}}const{console:ni}=Sn,vt="src/lib/Login.svelte";function zt(s){let e;const t={c:function(){e=Y("Login")},l:function(i){e=X(i,"Login")},m:function(i,o){w(i,e,o)},d:function(i){i&&p(e)}};return b("SvelteRegisterBlock",{block:t,id:zt.name,type:"slot",source:'(29:2) <Button type=\\"submit\\" disabled={!email || !password}>',ctx:s}),t}function Mt(s){let e,t,n,i,o,l,r,c,a,u,f,d,h,m;function R(A){s[4](A)}let y={placeholder:"E-mail address..."};s[0]!==void 0&&(y.value=s[0]),o=new be({props:y,$$inline:!0}),ge.push(()=>Oe(o,"value",R));function g(A){s[5](A)}let J={password:!0,placeholder:"Password..."};s[1]!==void 0&&(J.value=s[1]),c=new be({props:J,$$inline:!0}),ge.push(()=>Oe(c,"value",g)),f=new pe({props:{type:"submit",disabled:!s[0]||!s[1],$$slots:{default:[zt]},$$scope:{ctx:s}},$$inline:!0});const ae={c:function(){e=C("div"),t=Y(s[2]),n=N(),i=C("form"),T(o.$$.fragment),r=N(),T(c.$$.fragment),u=N(),T(f.$$.fragment),this.h()},l:function(k){e=P(k,"DIV",{class:!0});var q=L(e);t=X(q,s[2]),q.forEach(p),n=D(k),i=P(k,"FORM",{class:!0});var ee=L(i);j(o.$$.fragment,ee),r=D(ee),j(c.$$.fragment,ee),u=D(ee),j(f.$$.fragment,ee),ee.forEach(p),this.h()},h:function(){S(e,"class","text-red-500"),ct(e,"invisible",!s[2]),O(e,vt,23,1,516),S(i,"class","flex flex-col items-end gap-4"),O(i,vt,25,1,583)},m:function(k,q){w(k,e,q),F(e,t),w(k,n,q),w(k,i,q),I(o,i,null),F(i,r),I(c,i,null),F(i,u),I(f,i,null),d=!0,h||(m=ue(i,"submit",St(s[3]),!1,!0,!1,!1),h=!0)},p:function(k,q){(!d||q&4)&&me(t,k[2]),(!d||q&4)&&ct(e,"invisible",!k[2]);const ee={};!l&&q&1&&(l=!0,ee.value=k[0],Pe(()=>l=!1)),o.$set(ee);const lt={};!a&&q&2&&(a=!0,lt.value=k[1],Pe(()=>a=!1)),c.$set(lt);const $e={};q&3&&($e.disabled=!k[0]||!k[1]),q&64&&($e.$$scope={dirty:q,ctx:k}),f.$set($e)},i:function(k){d||(v(o.$$.fragment,k),v(c.$$.fragment,k),v(f.$$.fragment,k),d=!0)},o:function(k){_(o.$$.fragment,k),_(c.$$.fragment,k),_(f.$$.fragment,k),d=!1},d:function(k){k&&(p(e),p(n),p(i)),$(o),$(c),$(f),h=!1,m()}};return b("SvelteRegisterBlock",{block:ae,id:Mt.name,type:"slot",source:"(23:0) <Body>",ctx:s}),ae}function Qe(s){let e,t;e=new Te({props:{$$slots:{default:[Mt]},$$scope:{ctx:s}},$$inline:!0});const n={c:function(){T(e.$$.fragment)},l:function(o){j(e.$$.fragment,o)},m:function(o,l){I(e,o,l),t=!0},p:function(o,[l]){const r={};l&71&&(r.$$scope={dirty:l,ctx:o}),e.$set(r)},i:function(o){t||(v(e.$$.fragment,o),t=!0)},o:function(o){_(e.$$.fragment,o),t=!1},d:function(o){$(e,o)}};return b("SvelteRegisterBlock",{block:n,id:Qe.name,type:"component",source:"",ctx:s}),n}function ii(s,e,t){let{$$slots:n={},$$scope:i}=e;M("Login",n,[]);let o="",l="",r=null;async function c(){try{await H.collection("users").authWithPassword(o,l)}catch(d){console.error(d),t(2,r="Incorrect login information.");return}}const a=[];Object.keys(e).forEach(d=>{!~a.indexOf(d)&&d.slice(0,2)!=="$$"&&d!=="slot"&&ni.warn(`<Login> was created with unknown prop '${d}'`)});function u(d){o=d,t(0,o)}function f(d){l=d,t(1,l)}return s.$capture_state=()=>({TextInput:be,Button:pe,Body:Te,pb:H,currentUser:re,email:o,password:l,error:r,login:c}),s.$inject_state=d=>{"email"in d&&t(0,o=d.email),"password"in d&&t(1,l=d.password),"error"in d&&t(2,r=d.error)},e&&"$$inject"in e&&s.$inject_state(e.$$inject),[o,l,r,c,u,f]}class Ht extends G{constructor(e){super(e),z(this,e,ii,Qe,W,{}),b("SvelteRegisterComponent",{component:this,tagName:"Login",options:e,id:Qe.name})}}const oi="src/lib/Grid.svelte";function Ye(s){let e,t,n;const i=s[2].default,o=te(i,s,s[1],null),l={c:function(){e=C("div"),o&&o.c(),this.h()},l:function(c){e=P(c,"DIV",{class:!0});var a=L(e);o&&o.l(a),a.forEach(p),this.h()},h:function(){S(e,"class",t="flex flex-row flex-wrap justify-center items-start gap-4 "+s[0]),O(e,oi,4,0,54)},m:function(c,a){w(c,e,a),o&&o.m(e,null),n=!0},p:function(c,[a]){o&&o.p&&(!n||a&2)&&ne(o,i,c,c[1],n?oe(i,c[1],a,null):ie(c[1]),null),(!n||a&1&&t!==(t="flex flex-row flex-wrap justify-center items-start gap-4 "+c[0]))&&S(e,"class",t)},i:function(c){n||(v(o,c),n=!0)},o:function(c){_(o,c),n=!1},d:function(c){c&&p(e),o&&o.d(c)}};return b("SvelteRegisterBlock",{block:l,id:Ye.name,type:"component",source:"",ctx:s}),l}function si(s,e,t){let n,{$$slots:i={},$$scope:o}=e;return M("Grid",i,["default"]),s.$$set=l=>{t(3,e=E(E({},e),se(l))),"$$scope"in l&&t(1,o=l.$$scope)},s.$capture_state=()=>({extraStyle:n}),s.$inject_state=l=>{t(3,e=E(E({},e),l)),"extraStyle"in e&&t(0,n=l.extraStyle)},e&&"$$inject"in e&&s.$inject_state(e.$$inject),s.$$.update=()=>{t(0,n=e.class)},e=se(e),[n,o,i]}class Jt extends G{constructor(e){super(e),z(this,e,si,Ye,W,{}),b("SvelteRegisterComponent",{component:this,tagName:"Grid",options:e,id:Ye.name})}}const Xe="src/lib/Card.svelte",ri=s=>({}),_t=s=>({}),li=s=>({}),yt=s=>({});function Ze(s){let e,t;const n=s[5].subtitle,i=te(n,s,s[4],_t),o={c:function(){e=C("div"),i&&i.c(),this.h()},l:function(r){e=P(r,"DIV",{class:!0});var c=L(e);i&&i.l(c),c.forEach(p),this.h()},h:function(){S(e,"class","flex flex-col items-center overflow-x-auto"),O(e,Xe,48,2,648)},m:function(r,c){w(r,e,c),i&&i.m(e,null),t=!0},p:function(r,c){i&&i.p&&(!t||c&16)&&ne(i,n,r,r[4],t?oe(n,r[4],c,ri):ie(r[4]),_t)},i:function(r){t||(v(i,r),t=!0)},o:function(r){_(i,r),t=!1},d:function(r){r&&p(e),i&&i.d(r)}};return b("SvelteRegisterBlock",{block:o,id:Ze.name,type:"if",source:"(48:1) {#if $$slots['subtitle']}",ctx:s}),o}function xe(s){let e,t,n,i,o;const l=s[5].image,r=te(l,s,s[4],yt);let c=s[2].subtitle&&Ze(s);const a={c:function(){e=C("div"),t=C("div"),r&&r.c(),n=N(),c&&c.c(),this.h()},l:function(f){e=P(f,"DIV",{class:!0});var d=L(e);t=P(d,"DIV",{class:!0});var h=L(t);r&&r.l(h),h.forEach(p),n=D(d),c&&c.l(d),d.forEach(p),this.h()},h:function(){S(t,"class","flex flex-col grow justify-center items-stretch rounded-lg overflow-hidden transition-all group-hover:opacity-80 "),O(t,Xe,32,1,425),S(e,"class",i="group flex flex-col p-2 gap-2 rounded-2xl shadow-lg bg-slate-100 transition-all dark:bg-slate-900 dark:outline dark:outline-2 dark:outline-cyan-900 hover:shadow-xl "+s[1]+" "+s[0]),O(e,Xe,12,0,184)},m:function(f,d){w(f,e,d),F(e,t),r&&r.m(t,null),F(e,n),c&&c.m(e,null),o=!0},p:function(f,[d]){r&&r.p&&(!o||d&16)&&ne(r,l,f,f[4],o?oe(l,f[4],d,li):ie(f[4]),yt),f[2].subtitle?c?(c.p(f,d),d&4&&v(c,1)):(c=Ze(f),c.c(),v(c,1),c.m(e,null)):c&&(Z(),_(c,1,1,()=>{c=null}),x()),(!o||d&3&&i!==(i="group flex flex-col p-2 gap-2 rounded-2xl shadow-lg bg-slate-100 transition-all dark:bg-slate-900 dark:outline dark:outline-2 dark:outline-cyan-900 hover:shadow-xl "+f[1]+" "+f[0]))&&S(e,"class",i)},i:function(f){o||(v(r,f),v(c),o=!0)},o:function(f){_(r,f),_(c),o=!1},d:function(f){f&&p(e),r&&r.d(f),c&&c.d()}};return b("SvelteRegisterBlock",{block:a,id:xe.name,type:"component",source:"",ctx:s}),a}function ci(s,e,t){let n,i,{$$slots:o={},$$scope:l}=e;M("Card",o,["image","subtitle"]);const r=yn(o);let{size:c="md"}=e;return s.$$set=a=>{t(6,e=E(E({},e),se(a))),"size"in a&&t(3,c=a.size),"$$scope"in a&&t(4,l=a.$$scope)},s.$capture_state=()=>({size:c,extraStyle:i,sizeStyle:n}),s.$inject_state=a=>{t(6,e=E(E({},e),a)),"size"in e&&t(3,c=a.size),"extraStyle"in e&&t(0,i=a.extraStyle),"sizeStyle"in e&&t(1,n=a.sizeStyle)},e&&"$$inject"in e&&s.$inject_state(e.$$inject),s.$$.update=()=>{s.$$.dirty&8&&t(1,n={sm:"w-24 h-24",md:"w-48 h-48",lg:"w-96 h-96"}[c]??"w-48 h-48"),t(0,i=e.class)},e=se(e),[i,n,r,c,l,o]}class Qt extends G{constructor(e){super(e),z(this,e,ci,xe,W,{size:3}),b("SvelteRegisterComponent",{component:this,tagName:"Card",options:e,id:xe.name})}get size(){throw new Error("<Card>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set size(e){throw new Error("<Card>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}}const wt="src/lib/CircularProgress.svelte";function et(s){let e,t;const n={c:function(){e=C("div"),t=C("div"),this.h()},l:function(o){e=P(o,"DIV",{class:!0});var l=L(e);t=P(l,"DIV",{class:!0}),L(t).forEach(p),l.forEach(p),this.h()},h:function(){S(t,"class","w-full h-full rounded-full bg-slate-200 dark:bg-slate-800 "),O(t,wt,13,1,140),S(e,"class","w-8 h-8 p-0.5 rounded-full animate-spin bg-gradient-to-r from-transparent via-transparent to-teal-500 "),O(e,wt,0,0,0)},m:function(o,l){w(o,e,l),F(e,t)},p:U,i:U,o:U,d:function(o){o&&p(e)}};return b("SvelteRegisterBlock",{block:n,id:et.name,type:"component",source:"",ctx:s}),n}function ai(s,e){let{$$slots:t={},$$scope:n}=e;M("CircularProgress",t,[]);const i=[];return Object.keys(e).forEach(o=>{!~i.indexOf(o)&&o.slice(0,2)!=="$$"&&o!=="slot"&&console.warn(`<CircularProgress> was created with unknown prop '${o}'`)}),[]}class Yt extends G{constructor(e){super(e),z(this,e,ai,et,W,{}),b("SvelteRegisterComponent",{component:this,tagName:"CircularProgress",options:e,id:et.name})}}function Xt(s){return s=new URL(s),s.hash?new URLSearchParams(s.hash.substring(1)):new URLSearchParams}const ui=Ot(window.location,s=>{const e=t=>{s(t.newURL)};return window.addEventListener("hashchange",e),()=>{window.removeEventListener("hashchange",e)}}),Zt={subscribe:Rt(ui,s=>Xt(s)).subscribe,set:s=>{window.location.hash=s}};function qe(s,e,t=n=>n){return{subscribe:Rt(Zt,n=>t(n.get(s)??e)).subscribe,set:n=>{window.location.hash=xt(Xt(window.location),{[s]:n}).toString()}}}function xt(s,e={}){return Object.entries(e).reduce((t,[n,i])=>(t.set(n,i),t),s??new URLSearchParams)}const Ie="src/routes/+page.svelte";function kt(s,e,t){const n=s.slice();return n[11]=e[t],n}function en(s){let e,t;const n={c:function(){e=C("img"),this.h()},l:function(o){e=P(o,"IMG",{class:!0,src:!0,alt:!0}),this.h()},h:function(){S(e,"class","max-h-8"),Ue(e.src,t=Et+"/favicon.png")||S(e,"src",t),S(e,"alt","PocketSafe"),O(e,Ie,64,3,1440)},m:function(o,l){w(o,e,l)},p:U,d:function(o){o&&p(e)}};return b("SvelteRegisterBlock",{block:n,id:en.name,type:"slot",source:'(64:2) <Link class=\\"hover:opacity-50 transition-all\\" href=\\"/\\">',ctx:s}),n}function tt(s){let e,t;e=new Lt({$$inline:!0}),e.$on("upload",s[8]);const n={c:function(){T(e.$$.fragment)},l:function(o){j(e.$$.fragment,o)},m:function(o,l){I(e,o,l),t=!0},p:U,i:function(o){t||(v(e.$$.fragment,o),t=!0)},o:function(o){_(e.$$.fragment,o),t=!1},d:function(o){$(e,o)}};return b("SvelteRegisterBlock",{block:n,id:tt.name,type:"if",source:"(67:2) {#if $currentUser}",ctx:s}),n}function tn(s){let e,t,n,i;e=new fe({props:{class:"hover:opacity-50 transition-all",href:"/",$$slots:{default:[en]},$$scope:{ctx:s}},$$inline:!0});let o=s[1]&&tt(s);const l={c:function(){T(e.$$.fragment),t=N(),o&&o.c(),n=V()},l:function(c){j(e.$$.fragment,c),t=D(c),o&&o.l(c),n=V()},m:function(c,a){I(e,c,a),w(c,t,a),o&&o.m(c,a),w(c,n,a),i=!0},p:function(c,a){const u={};a&16384&&(u.$$scope={dirty:a,ctx:c}),e.$set(u),c[1]?o?(o.p(c,a),a&2&&v(o,1)):(o=tt(c),o.c(),v(o,1),o.m(n.parentNode,n)):o&&(Z(),_(o,1,1,()=>{o=null}),x())},i:function(c){i||(v(e.$$.fragment,c),v(o),i=!0)},o:function(c){_(e.$$.fragment,c),_(o),i=!1},d:function(c){c&&(p(t),p(n)),$(e,c),o&&o.d(c)}};return b("SvelteRegisterBlock",{block:l,id:tn.name,type:"slot",source:'(63:1) <svelte:fragment slot=\\"start\\">',ctx:s}),l}function nn(s){let e,t;e=new Nt({$$inline:!0}),e.$on("submit",s[6]);const n={c:function(){T(e.$$.fragment)},l:function(o){j(e.$$.fragment,o)},m:function(o,l){I(e,o,l),t=!0},p:U,i:function(o){t||(v(e.$$.fragment,o),t=!0)},o:function(o){_(e.$$.fragment,o),t=!1},d:function(o){$(e,o)}};return b("SvelteRegisterBlock",{block:n,id:nn.name,type:"slot",source:'(72:1) <svelte:fragment slot=\\"middle\\">',ctx:s}),n}function nt(s){let e,t=s[1].username+"",n,i,o,l;o=new pe({props:{$$slots:{default:[on]},$$scope:{ctx:s}},$$inline:!0}),o.$on("click",s[5]);const r={c:function(){e=C("div"),n=Y(t),i=N(),T(o.$$.fragment),this.h()},l:function(a){e=P(a,"DIV",{});var u=L(e);n=X(u,t),u.forEach(p),i=D(a),j(o.$$.fragment,a),this.h()},h:function(){O(e,Ie,77,3,1758)},m:function(a,u){w(a,e,u),F(e,n),w(a,i,u),I(o,a,u),l=!0},p:function(a,u){(!l||u&2)&&t!==(t=a[1].username+"")&&me(n,t);const f={};u&16384&&(f.$$scope={dirty:u,ctx:a}),o.$set(f)},i:function(a){l||(v(o.$$.fragment,a),l=!0)},o:function(a){_(o.$$.fragment,a),l=!1},d:function(a){a&&(p(e),p(i)),$(o,a)}};return b("SvelteRegisterBlock",{block:r,id:nt.name,type:"if",source:"(77:2) {#if $currentUser}",ctx:s}),r}function on(s){let e;const t={c:function(){e=Y("Logout")},l:function(i){e=X(i,"Logout")},m:function(i,o){w(i,e,o)},d:function(i){i&&p(e)}};return b("SvelteRegisterBlock",{block:t,id:on.name,type:"slot",source:"(79:3) <Button on:click={logout}>",ctx:s}),t}function sn(s){let e,t,n=s[1]&&nt(s);const i={c:function(){n&&n.c(),e=V()},l:function(l){n&&n.l(l),e=V()},m:function(l,r){n&&n.m(l,r),w(l,e,r),t=!0},p:function(l,r){l[1]?n?(n.p(l,r),r&2&&v(n,1)):(n=nt(l),n.c(),v(n,1),n.m(e.parentNode,e)):n&&(Z(),_(n,1,1,()=>{n=null}),x())},i:function(l){t||(v(n),t=!0)},o:function(l){_(n),t=!1},d:function(l){l&&p(e),n&&n.d(l)}};return b("SvelteRegisterBlock",{block:i,id:sn.name,type:"slot",source:'(76:1) <svelte:fragment slot=\\"end\\">',ctx:s}),i}function rn(s){let e,t;e=new Ht({$$inline:!0});const n={c:function(){T(e.$$.fragment)},l:function(o){j(e.$$.fragment,o)},m:function(o,l){I(e,o,l),t=!0},p:U,i:function(o){t||(v(e.$$.fragment,o),t=!0)},o:function(o){_(e.$$.fragment,o),t=!1},d:function(o){$(e,o)}};return b("SvelteRegisterBlock",{block:n,id:rn.name,type:"else",source:"(110:1) {:else}",ctx:s}),n}function ln(s){let e,t,n,i={ctx:s,current:null,token:null,hasCatch:!1,pending:mn,then:an,catch:cn,value:2,blocks:[,,,]};at(t=s[2],i);const o={c:function(){e=V(),i.block.c()},l:function(r){e=V(),i.block.l(r)},m:function(r,c){w(r,e,c),i.block.m(r,i.anchor=c),i.mount=()=>e.parentNode,i.anchor=e,n=!0},p:function(r,c){s=r,i.ctx=s,c&4&&t!==(t=s[2])&&at(t,i)||Cn(i,s,c)},i:function(r){n||(v(i.block),n=!0)},o:function(r){for(let c=0;c<3;c+=1){const a=i.blocks[c];_(a)}n=!1},d:function(r){r&&p(e),i.block.d(r),i.token=null,i=null}};return b("SvelteRegisterBlock",{block:o,id:ln.name,type:"if",source:"(85:1) {#if $currentUser}",ctx:s}),o}function cn(s){const e={c:U,l:U,m:U,p:U,i:U,o:U,d:U};return b("SvelteRegisterBlock",{block:e,id:cn.name,type:"catch",source:"(1:0) <script>  import { onMount }",ctx:s}),e}function an(s){let e,t,n,i,o,l,r=s[2].totalItems==0&&it(s);t=new Jt({props:{$$slots:{default:[hn]},$$scope:{ctx:s}},$$inline:!0});function c(f){s[9](f)}let a={pages:s[2].totalPages};s[0]!==void 0&&(a.page=s[0]),i=new Gt({props:a,$$inline:!0}),ge.push(()=>Oe(i,"page",c));const u={c:function(){r&&r.c(),e=N(),T(t.$$.fragment),n=N(),T(i.$$.fragment)},l:function(d){r&&r.l(d),e=D(d),j(t.$$.fragment,d),n=D(d),j(i.$$.fragment,d)},m:function(d,h){r&&r.m(d,h),w(d,e,h),I(t,d,h),w(d,n,h),I(i,d,h),l=!0},p:function(d,h){d[2].totalItems==0?r||(r=it(d),r.c(),r.m(e.parentNode,e)):r&&(r.d(1),r=null);const m={};h&16388&&(m.$$scope={dirty:h,ctx:d}),t.$set(m);const R={};h&4&&(R.pages=d[2].totalPages),!o&&h&1&&(o=!0,R.page=d[0],Pe(()=>o=!1)),i.$set(R)},i:function(d){l||(v(t.$$.fragment,d),v(i.$$.fragment,d),l=!0)},o:function(d){_(t.$$.fragment,d),_(i.$$.fragment,d),l=!1},d:function(d){d&&(p(e),p(n)),r&&r.d(d),$(t,d),$(i,d)}};return b("SvelteRegisterBlock",{block:u,id:an.name,type:"then",source:"(88:2) {:then files}",ctx:s}),u}function it(s){let e;const t={c:function(){e=Y("No files.")},l:function(i){e=X(i,"No files.")},m:function(i,o){w(i,e,o)},d:function(i){i&&p(e)}};return b("SvelteRegisterBlock",{block:t,id:it.name,type:"if",source:"(89:3) {#if files.totalItems == 0}",ctx:s}),t}function un(s){let e,t,n;const i={c:function(){e=C("img"),this.h()},l:function(l){e=P(l,"IMG",{slot:!0,class:!0,src:!0,alt:!0}),this.h()},h:function(){S(e,"slot","image"),S(e,"class","rounded-lg grow object-cover"),Ue(e.src,t=Fe(s[11]))||S(e,"src",t),S(e,"alt",n=s[11].file),O(e,Ie,95,7,2136)},m:function(l,r){w(l,e,r)},p:function(l,r){r&4&&!Ue(e.src,t=Fe(l[11]))&&S(e,"src",t),r&4&&n!==(n=l[11].file)&&S(e,"alt",n)},d:function(l){l&&p(e)}};return b("SvelteRegisterBlock",{block:i,id:un.name,type:"slot",source:"(96:7) ",ctx:s}),i}function dn(s){let e,t=s[11].name+"",n;const i={c:function(){e=C("div"),n=Y(t),this.h()},l:function(l){e=P(l,"DIV",{slot:!0});var r=L(e);n=X(r,t),r.forEach(p),this.h()},h:function(){S(e,"slot","subtitle"),O(e,Ie,101,7,2278)},m:function(l,r){w(l,e,r),F(e,n)},p:function(l,r){r&4&&t!==(t=l[11].name+"")&&me(n,t)},d:function(l){l&&p(e)}};return b("SvelteRegisterBlock",{block:i,id:dn.name,type:"slot",source:"(102:7) ",ctx:s}),i}function fn(s){let e,t,n;e=new Qt({props:{size:"lg",$$slots:{subtitle:[dn],image:[un]},$$scope:{ctx:s}},$$inline:!0});const i={c:function(){T(e.$$.fragment),t=N()},l:function(l){j(e.$$.fragment,l),t=D(l)},m:function(l,r){I(e,l,r),w(l,t,r),n=!0},p:function(l,r){const c={};r&16388&&(c.$$scope={dirty:r,ctx:l}),e.$set(c)},i:function(l){n||(v(e.$$.fragment,l),n=!0)},o:function(l){_(e.$$.fragment,l),n=!1},d:function(l){l&&p(t),$(e,l)}};return b("SvelteRegisterBlock",{block:i,id:fn.name,type:"slot",source:"(94:5) <Link href={pb.files.getUrl(file, file.file)}>",ctx:s}),i}function ot(s){let e,t;e=new fe({props:{href:H.files.getUrl(s[11],s[11].file),$$slots:{default:[fn]},$$scope:{ctx:s}},$$inline:!0});const n={c:function(){T(e.$$.fragment)},l:function(o){j(e.$$.fragment,o)},m:function(o,l){I(e,o,l),t=!0},p:function(o,l){const r={};l&4&&(r.href=H.files.getUrl(o[11],o[11].file)),l&16388&&(r.$$scope={dirty:l,ctx:o}),e.$set(r)},i:function(o){t||(v(e.$$.fragment,o),t=!0)},o:function(o){_(e.$$.fragment,o),t=!1},d:function(o){$(e,o)}};return b("SvelteRegisterBlock",{block:n,id:ot.name,type:"each",source:"(93:4) {#each files.items as file}",ctx:s}),n}function hn(s){let e,t,n=Re(s[2].items),i=[];for(let r=0;r<n.length;r+=1)i[r]=ot(kt(s,n,r));const o=r=>_(i[r],1,1,()=>{i[r]=null}),l={c:function(){for(let c=0;c<i.length;c+=1)i[c].c();e=V()},l:function(c){for(let a=0;a<i.length;a+=1)i[a].l(c);e=V()},m:function(c,a){for(let u=0;u<i.length;u+=1)i[u]&&i[u].m(c,a);w(c,e,a),t=!0},p:function(c,a){if(a&4){n=Re(c[2].items);let u;for(u=0;u<n.length;u+=1){const f=kt(c,n,u);i[u]?(i[u].p(f,a),v(i[u],1)):(i[u]=ot(f),i[u].c(),v(i[u],1),i[u].m(e.parentNode,e))}for(Z(),u=n.length;u<i.length;u+=1)o(u);x()}},i:function(c){if(!t){for(let a=0;a<n.length;a+=1)v(i[a]);t=!0}},o:function(c){i=i.filter(Boolean);for(let a=0;a<i.length;a+=1)_(i[a]);t=!1},d:function(c){c&&p(e),Ct(i,c)}};return b("SvelteRegisterBlock",{block:l,id:hn.name,type:"slot",source:"(92:3) <Grid>",ctx:s}),l}function mn(s){let e,t;e=new Yt({$$inline:!0});const n={c:function(){T(e.$$.fragment)},l:function(o){j(e.$$.fragment,o)},m:function(o,l){I(e,o,l),t=!0},p:U,i:function(o){t||(v(e.$$.fragment,o),t=!0)},o:function(o){_(e.$$.fragment,o),t=!1},d:function(o){$(e,o)}};return b("SvelteRegisterBlock",{block:n,id:mn.name,type:"pending",source:"(86:16)     <CircularProgress />   {:then files}",ctx:s}),n}function pn(s){let e,t,n,i;const o=[ln,rn],l=[];function r(a,u){return a[1]?0:1}e=r(s),t=l[e]=o[e](s);const c={c:function(){t.c(),n=V()},l:function(u){t.l(u),n=V()},m:function(u,f){l[e].m(u,f),w(u,n,f),i=!0},p:function(u,f){let d=e;e=r(u),e===d?l[e].p(u,f):(Z(),_(l[d],1,1,()=>{l[d]=null}),x(),t=l[e],t?t.p(u,f):(t=l[e]=o[e](u),t.c()),v(t,1),t.m(n.parentNode,n))},i:function(u){i||(v(t),i=!0)},o:function(u){_(t),i=!1},d:function(u){u&&p(n),l[e].d(u)}};return b("SvelteRegisterBlock",{block:c,id:pn.name,type:"slot",source:"(84:0) <Body>",ctx:s}),c}function st(s){let e,t,n,i;e=new Tt({props:{$$slots:{end:[sn],middle:[nn],start:[tn]},$$scope:{ctx:s}},$$inline:!0}),n=new Te({props:{$$slots:{default:[pn]},$$scope:{ctx:s}},$$inline:!0});const o={c:function(){T(e.$$.fragment),t=N(),T(n.$$.fragment)},l:function(r){j(e.$$.fragment,r),t=D(r),j(n.$$.fragment,r)},m:function(r,c){I(e,r,c),w(r,t,c),I(n,r,c),i=!0},p:function(r,[c]){const a={};c&16387&&(a.$$scope={dirty:c,ctx:r}),e.$set(a);const u={};c&16391&&(u.$$scope={dirty:c,ctx:r}),n.$set(u)},i:function(r){i||(v(e.$$.fragment,r),v(n.$$.fragment,r),i=!0)},o:function(r){_(e.$$.fragment,r),_(n.$$.fragment,r),i=!1},d:function(r){r&&p(t),$(e,r),$(n,r)}};return b("SvelteRegisterBlock",{block:o,id:st.name,type:"component",source:"",ctx:s}),o}function di(s,e,t){let n,i,o;we(re,"currentUser"),ke(s,re,g=>t(1,o=g));let{$$slots:l={},$$scope:r}=e;M("Page",l,[]);let c=null;const a=qe("page",1,g=>parseInt(g,10));we(a,"page"),ke(s,a,g=>t(0,i=g));const u=qe("filter","");we(u,"filter"),ke(s,u,g=>t(7,n=g));function f(g){H.authStore.clear()}async function d(g={}){c!=null&&await c,t(2,c=H.collection("files").getList(i,30,{sort:"-created",filter:`name~"${encodeURIComponent(n)}"`,...g}))}function h(g){const{detail:J}=g;Be(a,i=1,i),Be(u,n=J,n)}const m=[];Object.keys(e).forEach(g=>{!~m.indexOf(g)&&g.slice(0,2)!=="$$"&&g!=="slot"&&console.warn(`<Page> was created with unknown prop '${g}'`)});const R=()=>Be(a,i=1,i);function y(g){i=g,a.set(i)}return s.$capture_state=()=>({onMount:wn,assets:Et,Nav:Tt,Body:Te,UploadButton:Lt,Search:Nt,Pager:Gt,Login:Ht,Grid:Jt,Card:Qt,Link:fe,Button:pe,CircularProgress:Yt,pb:H,currentUser:re,thumbnail:Fe,fragment:Zt,fragmentVar:qe,rehash:xt,files:c,page:a,filter:u,logout:f,loadFiles:d,search:h,$filter:n,$page:i,$currentUser:o}),s.$inject_state=g=>{"files"in g&&t(2,c=g.files)},e&&"$$inject"in e&&s.$inject_state(e.$$inject),s.$$.update=()=>{if(s.$$.dirty&131&&o){let g=!1;isNaN(i)||(g=!0),n&&(g=!0),g&&d()}},[i,o,c,a,u,f,h,n,R,y]}class pi extends G{constructor(e){super(e),z(this,e,di,st,W,{}),b("SvelteRegisterComponent",{component:this,tagName:"Page",options:e,id:st.name})}}export{pi as component};
