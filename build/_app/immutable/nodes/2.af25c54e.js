import{x as un,y as fn,z as ve,A as dn,s as G,n as ne,g as P,c as D,h as O,i as q,d as F,k as R,u as ie,p as oe,q as se,B as E,C as he,D as ce,E as re,F as ae,v as Be,r as Le,f as ge,l as X,m as Z,e as K,w as N,G as Se,H as wt,I as Ce,J as hn,K as kt,L as St,M as rt,N as mn,o as pn,O as gn,P as Ue}from"../chunks/scheduler.df21a823.js";import{h as x,t as v,c as ee,b,S as z,i as M,d as g,v as H,e as p,g as C,a as y,n as V,o as ue,j as I,k as $,m as B,l as L,p as Pe,q as Oe,s as me}from"../chunks/index.99917230.js";import{j as bn,w as Ct,k as vn,l as Pt}from"../chunks/singletons.4108229e.js";const _n=typeof window<"u"?window:typeof globalThis<"u"?globalThis:global;function lt(s,e){const t=e.token={};function n(i,o,l,r){if(e.token!==t)return;e.resolved=r;let c=e.ctx;l!==void 0&&(c=c.slice(),c[l]=r);const a=i&&(e.current=i)(c);let u=!1;e.block&&(e.blocks?e.blocks.forEach((f,d)=>{d!==o&&f&&(x(),v(f,1,1,()=>{e.blocks[d]===f&&(e.blocks[d]=null)}),ee())}):e.block.d(1),a.c(),b(a,1),a.m(e.mount(),e.anchor),u=!0),e.block=a,e.blocks&&(e.blocks[o]=a),u&&dn()}if(un(s)){const i=fn();if(s.then(o=>{ve(i),n(e.then,1,e.value,o),ve(null)},o=>{if(ve(i),n(e.catch,2,e.error,o),ve(null),!e.hasCatch)throw o}),e.current!==e.pending)return n(e.pending,0),!0}else{if(e.current!==e.then)return n(e.then,1,e.value,s),!0;e.resolved=s}}function yn(s,e,t){const n=e.slice(),{resolved:i}=s;s.current===s.then&&(n[s.value]=i),s.current===s.catch&&(n[s.error]=i),s.block.p(n,t)}function Re(s,e){const t={},n={},i={$$scope:1};let o=s.length;for(;o--;){const l=s[o],r=e[o];if(r){for(const c in l)c in r||(n[c]=1);for(const c in r)i[c]||(t[c]=r[c],i[c]=1);s[o]=r}else for(const c in l)i[c]=1}for(const l in n)l in t||(t[l]=void 0);return t}const _e="src/lib/Nav.svelte",wn=s=>({}),ct=s=>({}),kn=s=>({}),at=s=>({}),Sn=s=>({}),ut=s=>({});function qe(s){let e,t,n,i,o,l,r;const c=s[1].start,a=ne(c,s,s[0],ut),u=s[1].middle,f=ne(u,s,s[0],at),d=s[1].end,h=ne(d,s,s[0],ct),m={c:function(){e=P("div"),t=P("div"),a&&a.c(),n=D(),i=P("div"),f&&f.c(),o=D(),l=P("div"),h&&h.c(),this.h()},l:function(_){e=O(_,"DIV",{class:!0});var k=q(e);t=O(k,"DIV",{class:!0});var w=q(t);a&&a.l(w),w.forEach(p),n=F(k),i=O(k,"DIV",{class:!0});var J=q(i);f&&f.l(J),J.forEach(p),o=F(k),l=O(k,"DIV",{class:!0});var j=q(l);h&&h.l(j),j.forEach(p),k.forEach(p),this.h()},h:function(){C(t,"class","flex flex-row gap-2 items-center"),R(t,_e,13,1,139),C(i,"class","flex flex-row gap-2 items-center"),R(i,_e,14,1,214),C(l,"class","flex flex-row gap-2 items-center"),R(l,_e,15,1,290),C(e,"class","min-h-8 p-2 flex flex-row justify-between outline outline-2 outline-slate-300 dark:outline-slate-700 "),R(e,_e,0,0,0)},m:function(_,k){y(_,e,k),V(e,t),a&&a.m(t,null),V(e,n),V(e,i),f&&f.m(i,null),V(e,o),V(e,l),h&&h.m(l,null),r=!0},p:function(_,[k]){a&&a.p&&(!r||k&1)&&ie(a,c,_,_[0],r?se(c,_[0],k,Sn):oe(_[0]),ut),f&&f.p&&(!r||k&1)&&ie(f,u,_,_[0],r?se(u,_[0],k,kn):oe(_[0]),at),h&&h.p&&(!r||k&1)&&ie(h,d,_,_[0],r?se(d,_[0],k,wn):oe(_[0]),ct)},i:function(_){r||(b(a,_),b(f,_),b(h,_),r=!0)},o:function(_){v(a,_),v(f,_),v(h,_),r=!1},d:function(_){_&&p(e),a&&a.d(_),f&&f.d(_),h&&h.d(_)}};return g("SvelteRegisterBlock",{block:m,id:qe.name,type:"component",source:"",ctx:s}),m}function Cn(s,e,t){let{$$slots:n={},$$scope:i}=e;H("Nav",n,["start","middle","end"]);const o=[];return Object.keys(e).forEach(l=>{!~o.indexOf(l)&&l.slice(0,2)!=="$$"&&l!=="slot"&&console.warn(`<Nav> was created with unknown prop '${l}'`)}),s.$$set=l=>{"$$scope"in l&&t(0,i=l.$$scope)},[i,n]}class Ot extends z{constructor(e){super(e),M(this,e,Cn,qe,G,{}),g("SvelteRegisterComponent",{component:this,tagName:"Nav",options:e,id:qe.name})}}const Pn="src/lib/Body.svelte";function Ae(s){let e,t;const n=s[1].default,i=ne(n,s,s[0],null),o={c:function(){e=P("div"),i&&i.c(),this.h()},l:function(r){e=O(r,"DIV",{class:!0});var c=q(e);i&&i.l(c),c.forEach(p),this.h()},h:function(){C(e,"class","flex flex-col grow justify-center items-center gap-2"),R(e,Pn,0,0,0)},m:function(r,c){y(r,e,c),i&&i.m(e,null),t=!0},p:function(r,[c]){i&&i.p&&(!t||c&1)&&ie(i,n,r,r[0],t?se(n,r[0],c,null):oe(r[0]),null)},i:function(r){t||(b(i,r),t=!0)},o:function(r){v(i,r),t=!1},d:function(r){r&&p(e),i&&i.d(r)}};return g("SvelteRegisterBlock",{block:o,id:Ae.name,type:"component",source:"",ctx:s}),o}function On(s,e,t){let{$$slots:n={},$$scope:i}=e;H("Body",n,["default"]);const o=[];return Object.keys(e).forEach(l=>{!~o.indexOf(l)&&l.slice(0,2)!=="$$"&&l!=="slot"&&console.warn(`<Body> was created with unknown prop '${l}'`)}),s.$$set=l=>{"$$scope"in l&&t(0,i=l.$$scope)},[i,n]}class Ee extends z{constructor(e){super(e),M(this,e,On,Ae,G,{}),g("SvelteRegisterComponent",{component:this,tagName:"Body",options:e,id:Ae.name})}}const ft=bn("goto"),Rn="src/lib/Button.svelte";function Ne(s){let e,t,n,i,o;const l=s[7].default,r=ne(l,s,s[6],null);let c=[{class:t="px-2 border-4 rounded-2xl text-white transition-all "+s[1]+" "+s[0]},s[3]],a={};for(let f=0;f<c.length;f+=1)a=E(a,c[f]);const u={c:function(){e=P("button"),r&&r.c(),this.h()},l:function(d){e=O(d,"BUTTON",{class:!0});var h=q(e);r&&r.l(h),h.forEach(p),this.h()},h:function(){ae(e,a),R(e,Rn,42,0,835)},m:function(d,h){y(d,e,h),r&&r.m(e,null),e.autofocus&&e.focus(),n=!0,i||(o=ue(e,"click",s[2],!1,!1,!1,!1),i=!0)},p:function(d,[h]){r&&r.p&&(!n||h&64)&&ie(r,l,d,d[6],n?se(l,d[6],h,null):oe(d[6]),null),ae(e,a=Re(c,[(!n||h&3&&t!==(t="px-2 border-4 rounded-2xl text-white transition-all "+d[1]+" "+d[0]))&&{class:t},h&8&&d[3]]))},i:function(d){n||(b(r,d),n=!0)},o:function(d){v(r,d),n=!1},d:function(d){d&&p(e),r&&r.d(d),i=!1,o()}};return g("SvelteRegisterBlock",{block:u,id:Ne.name,type:"component",source:"",ctx:s}),u}function En(s,e,t){let n,i;const o=["href","secondary"];let l=he(e,o),{$$slots:r={},$$scope:c}=e;H("Button",r,["default"]);let{href:a=null}=e,{secondary:u=!1}=e;const f=ce();async function d(h){f("click",h,{cancelable:!0})&&a&&await ft(a)}return s.$$set=h=>{t(9,e=E(E({},e),re(h))),t(3,l=he(e,o)),"href"in h&&t(4,a=h.href),"secondary"in h&&t(5,u=h.secondary),"$$scope"in h&&t(6,c=h.$$scope)},s.$capture_state=()=>({createEventDispatcher:ce,goto:ft,href:a,secondary:u,dispatch:f,click:d,extraStyle:i,mode:n}),s.$inject_state=h=>{t(9,e=E(E({},e),h)),"href"in e&&t(4,a=h.href),"secondary"in e&&t(5,u=h.secondary),"extraStyle"in e&&t(0,i=h.extraStyle),"mode"in e&&t(1,n=h.mode)},e&&"$$inject"in e&&s.$inject_state(e.$$inject),s.$$.update=()=>{s.$$.dirty&32&&t(1,n=u?`
			bg-teal-500
			border-teal-400
			hover:bg-teal-600
			hover:border-teal-500
			active:bg-teal-700
			active:border-teal-600
			disabled:bg-teal-200
			disabled:text-teal-700
			disabled:border-teal-300
			`:`
			bg-cyan-500
			border-cyan-400
			hover:bg-cyan-600
			hover:border-cyan-500
			active:bg-cyan-700
			active:border-cyan-600
			disabled:bg-cyan-200
			disabled:text-cyan-700
			disabled:border-cyan-300
			`),t(0,i=e.class??"")},e=re(e),[i,n,d,l,a,u,c,r]}class pe extends z{constructor(e){super(e),M(this,e,En,Ne,G,{href:4,secondary:5}),g("SvelteRegisterComponent",{component:this,tagName:"Button",options:e,id:Ne.name})}get href(){throw new Error("<Button>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set href(e){throw new Error("<Button>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get secondary(){throw new Error("<Button>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set secondary(e){throw new Error("<Button>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}}function U(s,e,t,n){return new(t||(t=Promise))(function(i,o){function l(a){try{c(n.next(a))}catch(u){o(u)}}function r(a){try{c(n.throw(a))}catch(u){o(u)}}function c(a){a.done?i(a.value):function(f){return f instanceof t?f:new t(function(d){d(f)})}(a.value).then(l,r)}c((n=n.apply(s,e||[])).next())})}class Y extends Error{constructor(e){var t,n,i,o;super("ClientResponseError"),this.url="",this.status=0,this.response={},this.isAbort=!1,this.originalError=null,Object.setPrototypeOf(this,Y.prototype),e!==null&&typeof e=="object"&&(this.url=typeof e.url=="string"?e.url:"",this.status=typeof e.status=="number"?e.status:0,this.isAbort=!!e.isAbort,this.originalError=e.originalError,e.response!==null&&typeof e.response=="object"?this.response=e.response:e.data!==null&&typeof e.data=="object"?this.response=e.data:this.response={}),this.originalError||e instanceof Y||(this.originalError=e),typeof DOMException<"u"&&e instanceof DOMException&&(this.isAbort=!0),this.name="ClientResponseError "+this.status,this.message=(t=this.response)===null||t===void 0?void 0:t.message,this.message||(this.isAbort?this.message="The request was autocancelled. You can find more info in https://github.com/pocketbase/js-sdk#auto-cancellation.":!((o=(i=(n=this.originalError)===null||n===void 0?void 0:n.cause)===null||i===void 0?void 0:i.message)===null||o===void 0)&&o.includes("ECONNREFUSED ::1")?this.message="Failed to connect to the PocketBase server. Try changing the SDK URL from localhost to 127.0.0.1 (https://github.com/pocketbase/js-sdk/issues/21).":this.message="Something went wrong while processing your request.")}get data(){return this.response}toJSON(){return Object.assign({},this)}}const ye=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/;function Tn(s,e){const t={};if(typeof s!="string")return t;const n=Object.assign({},e||{}).decode||jn;let i=0;for(;i<s.length;){const o=s.indexOf("=",i);if(o===-1)break;let l=s.indexOf(";",i);if(l===-1)l=s.length;else if(l<o){i=s.lastIndexOf(";",o-1)+1;continue}const r=s.slice(i,o).trim();if(t[r]===void 0){let c=s.slice(o+1,l).trim();c.charCodeAt(0)===34&&(c=c.slice(1,-1));try{t[r]=n(c)}catch{t[r]=c}}i=l+1}return t}function dt(s,e,t){const n=Object.assign({},t||{}),i=n.encode||In;if(!ye.test(s))throw new TypeError("argument name is invalid");const o=i(e);if(o&&!ye.test(o))throw new TypeError("argument val is invalid");let l=s+"="+o;if(n.maxAge!=null){const r=n.maxAge-0;if(isNaN(r)||!isFinite(r))throw new TypeError("option maxAge is invalid");l+="; Max-Age="+Math.floor(r)}if(n.domain){if(!ye.test(n.domain))throw new TypeError("option domain is invalid");l+="; Domain="+n.domain}if(n.path){if(!ye.test(n.path))throw new TypeError("option path is invalid");l+="; Path="+n.path}if(n.expires){if(!function(c){return Object.prototype.toString.call(c)==="[object Date]"||c instanceof Date}(n.expires)||isNaN(n.expires.valueOf()))throw new TypeError("option expires is invalid");l+="; Expires="+n.expires.toUTCString()}if(n.httpOnly&&(l+="; HttpOnly"),n.secure&&(l+="; Secure"),n.priority)switch(typeof n.priority=="string"?n.priority.toLowerCase():n.priority){case"low":l+="; Priority=Low";break;case"medium":l+="; Priority=Medium";break;case"high":l+="; Priority=High";break;default:throw new TypeError("option priority is invalid")}if(n.sameSite)switch(typeof n.sameSite=="string"?n.sameSite.toLowerCase():n.sameSite){case!0:l+="; SameSite=Strict";break;case"lax":l+="; SameSite=Lax";break;case"strict":l+="; SameSite=Strict";break;case"none":l+="; SameSite=None";break;default:throw new TypeError("option sameSite is invalid")}return l}function jn(s){return s.indexOf("%")!==-1?decodeURIComponent(s):s}function In(s){return encodeURIComponent(s)}let Rt;function ke(s){if(s)try{const e=decodeURIComponent(Rt(s.split(".")[1]).split("").map(function(t){return"%"+("00"+t.charCodeAt(0).toString(16)).slice(-2)}).join(""));return JSON.parse(e)||{}}catch{}return{}}function Et(s,e=0){let t=ke(s);return!(Object.keys(t).length>0&&(!t.exp||t.exp-e>Date.now()/1e3))}Rt=typeof atob=="function"?atob:s=>{let e=String(s).replace(/=+$/,"");if(e.length%4==1)throw new Error("'atob' failed: The string to be decoded is not correctly encoded.");for(var t,n,i=0,o=0,l="";n=e.charAt(o++);~n&&(t=i%4?64*t+n:n,i++%4)?l+=String.fromCharCode(255&t>>(-2*i&6)):0)n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(n);return l};const ht="pb_auth";class $n{constructor(){this.baseToken="",this.baseModel=null,this._onChangeCallbacks=[]}get token(){return this.baseToken}get model(){return this.baseModel}get isValid(){return!Et(this.token)}get isAdmin(){return ke(this.token).type==="admin"}get isAuthRecord(){return ke(this.token).type==="authRecord"}save(e,t){this.baseToken=e||"",this.baseModel=t||null,this.triggerChange()}clear(){this.baseToken="",this.baseModel=null,this.triggerChange()}loadFromCookie(e,t=ht){const n=Tn(e||"")[t]||"";let i={};try{i=JSON.parse(n),(typeof i===null||typeof i!="object"||Array.isArray(i))&&(i={})}catch{}this.save(i.token||"",i.model||null)}exportToCookie(e,t=ht){var n,i;const o={secure:!0,sameSite:!0,httpOnly:!0,path:"/"},l=ke(this.token);l!=null&&l.exp?o.expires=new Date(1e3*l.exp):o.expires=new Date("1970-01-01"),e=Object.assign({},o,e);const r={token:this.token,model:this.model?JSON.parse(JSON.stringify(this.model)):null};let c=dt(t,JSON.stringify(r),e);const a=typeof Blob<"u"?new Blob([c]).size:c.length;if(r.model&&a>4096){r.model={id:(n=r==null?void 0:r.model)===null||n===void 0?void 0:n.id,email:(i=r==null?void 0:r.model)===null||i===void 0?void 0:i.email};const u=["collectionId","username","verified"];for(const f in this.model)u.includes(f)&&(r.model[f]=this.model[f]);c=dt(t,JSON.stringify(r),e)}return c}onChange(e,t=!1){return this._onChangeCallbacks.push(e),t&&e(this.token,this.model),()=>{for(let n=this._onChangeCallbacks.length-1;n>=0;n--)if(this._onChangeCallbacks[n]==e)return delete this._onChangeCallbacks[n],void this._onChangeCallbacks.splice(n,1)}}triggerChange(){for(const e of this._onChangeCallbacks)e&&e(this.token,this.model)}}class Bn extends $n{constructor(e="pocketbase_auth"){super(),this.storageFallback={},this.storageKey=e,this._bindStorageEvent()}get token(){return(this._storageGet(this.storageKey)||{}).token||""}get model(){return(this._storageGet(this.storageKey)||{}).model||null}save(e,t){this._storageSet(this.storageKey,{token:e,model:t}),super.save(e,t)}clear(){this._storageRemove(this.storageKey),super.clear()}_storageGet(e){if(typeof window<"u"&&(window!=null&&window.localStorage)){const t=window.localStorage.getItem(e)||"";try{return JSON.parse(t)}catch{return t}}return this.storageFallback[e]}_storageSet(e,t){if(typeof window<"u"&&(window!=null&&window.localStorage)){let n=t;typeof t!="string"&&(n=JSON.stringify(t)),window.localStorage.setItem(e,n)}else this.storageFallback[e]=t}_storageRemove(e){var t;typeof window<"u"&&(window!=null&&window.localStorage)&&((t=window.localStorage)===null||t===void 0||t.removeItem(e)),delete this.storageFallback[e]}_bindStorageEvent(){typeof window<"u"&&(window!=null&&window.localStorage)&&window.addEventListener&&window.addEventListener("storage",e=>{if(e.key!=this.storageKey)return;const t=this._storageGet(this.storageKey)||{};super.save(t.token||"",t.model||null)})}}class fe{constructor(e){this.client=e}}class Ln extends fe{getAll(e){return e=Object.assign({method:"GET"},e),this.client.send("/api/settings",e)}update(e,t){return t=Object.assign({method:"PATCH",body:e},t),this.client.send("/api/settings",t)}testS3(e="storage",t){return t=Object.assign({method:"POST",body:{filesystem:e}},t),this.client.send("/api/settings/test/s3",t).then(()=>!0)}testEmail(e,t,n){return n=Object.assign({method:"POST",body:{email:e,template:t}},n),this.client.send("/api/settings/test/email",n).then(()=>!0)}generateAppleClientSecret(e,t,n,i,o,l){return l=Object.assign({method:"POST",body:{clientId:e,teamId:t,keyId:n,privateKey:i,duration:o}},l),this.client.send("/api/settings/apple/generate-client-secret",l)}}class ot extends fe{decode(e){return e}getFullList(e,t){if(typeof e=="number")return this._getFullList(e,t);let n=500;return(t=Object.assign({},e,t)).batch&&(n=t.batch,delete t.batch),this._getFullList(n,t)}getList(e=1,t=30,n){return(n=Object.assign({method:"GET"},n)).query=Object.assign({page:e,perPage:t},n.query),this.client.send(this.baseCrudPath,n).then(i=>{var o;return i.items=((o=i.items)===null||o===void 0?void 0:o.map(l=>this.decode(l)))||[],i})}getFirstListItem(e,t){return(t=Object.assign({requestKey:"one_by_filter_"+this.baseCrudPath+"_"+e},t)).query=Object.assign({filter:e,skipTotal:1},t.query),this.getList(1,1,t).then(n=>{var i;if(!(!((i=n==null?void 0:n.items)===null||i===void 0)&&i.length))throw new Y({status:404,data:{code:404,message:"The requested resource wasn't found.",data:{}}});return n.items[0]})}getOne(e,t){return t=Object.assign({method:"GET"},t),this.client.send(this.baseCrudPath+"/"+encodeURIComponent(e),t).then(n=>this.decode(n))}create(e,t){return t=Object.assign({method:"POST",body:e},t),this.client.send(this.baseCrudPath,t).then(n=>this.decode(n))}update(e,t,n){return n=Object.assign({method:"PATCH",body:t},n),this.client.send(this.baseCrudPath+"/"+encodeURIComponent(e),n).then(i=>this.decode(i))}delete(e,t){return t=Object.assign({method:"DELETE"},t),this.client.send(this.baseCrudPath+"/"+encodeURIComponent(e),t).then(()=>!0)}_getFullList(e=500,t){(t=t||{}).query=Object.assign({skipTotal:1},t.query);let n=[],i=o=>U(this,void 0,void 0,function*(){return this.getList(o,e||500,t).then(l=>{const r=l.items;return n=n.concat(r),r.length==l.perPage?i(o+1):n})});return i(1)}}function W(s,e,t,n){const i=n!==void 0;return i||t!==void 0?i?(console.warn(s),e.body=Object.assign({},e.body,t),e.query=Object.assign({},e.query,n),e):Object.assign(e,t):e}function $e(s){var e,t;(t=(e=s)._resetAutoRefresh)===null||t===void 0||t.call(e)}class Un extends ot{get baseCrudPath(){return"/api/admins"}update(e,t,n){return super.update(e,t,n).then(i=>{var o,l;return((o=this.client.authStore.model)===null||o===void 0?void 0:o.id)===i.id&&((l=this.client.authStore.model)===null||l===void 0?void 0:l.collectionId)===void 0&&this.client.authStore.save(this.client.authStore.token,i),i})}delete(e,t){return super.delete(e,t).then(n=>{var i,o;return n&&((i=this.client.authStore.model)===null||i===void 0?void 0:i.id)===e&&((o=this.client.authStore.model)===null||o===void 0?void 0:o.collectionId)===void 0&&this.client.authStore.clear(),n})}authResponse(e){const t=this.decode((e==null?void 0:e.admin)||{});return e!=null&&e.token&&(e!=null&&e.admin)&&this.client.authStore.save(e.token,t),Object.assign({},e,{token:(e==null?void 0:e.token)||"",admin:t})}authWithPassword(e,t,n,i){return U(this,void 0,void 0,function*(){let o={method:"POST",body:{identity:e,password:t}};o=W("This form of authWithPassword(email, pass, body?, query?) is deprecated. Consider replacing it with authWithPassword(email, pass, options?).",o,n,i);const l=o.autoRefreshThreshold;delete o.autoRefreshThreshold,o.autoRefresh||$e(this.client);let r=yield this.client.send(this.baseCrudPath+"/auth-with-password",o);return r=this.authResponse(r),l&&function(a,u,f,d){$e(a);const h=a.beforeSend,m=a.authStore.model,T=a.authStore.onChange((_,k)=>{(!_||(k==null?void 0:k.id)!=(m==null?void 0:m.id)||(k!=null&&k.collectionId||m!=null&&m.collectionId)&&(k==null?void 0:k.collectionId)!=(m==null?void 0:m.collectionId))&&$e(a)});a._resetAutoRefresh=function(){T(),a.beforeSend=h,delete a._resetAutoRefresh},a.beforeSend=(_,k)=>U(this,void 0,void 0,function*(){var w;const J=a.authStore.token;if(!((w=k.query)===null||w===void 0)&&w.autoRefresh)return h?h(_,k):{url:_,sendOptions:k};let j=a.authStore.isValid;if(j&&Et(a.authStore.token,u))try{yield f()}catch{j=!1}j||(yield d());const S=k.headers||{};for(let A in S)if(A.toLowerCase()=="authorization"&&J==S[A]&&a.authStore.token){S[A]=a.authStore.token;break}return k.headers=S,h?h(_,k):{url:_,sendOptions:k}})}(this.client,l,()=>this.authRefresh({autoRefresh:!0}),()=>this.authWithPassword(e,t,Object.assign({autoRefresh:!0},o))),r})}authRefresh(e,t){let n={method:"POST"};return n=W("This form of authRefresh(body?, query?) is deprecated. Consider replacing it with authRefresh(options?).",n,e,t),this.client.send(this.baseCrudPath+"/auth-refresh",n).then(this.authResponse.bind(this))}requestPasswordReset(e,t,n){let i={method:"POST",body:{email:e}};return i=W("This form of requestPasswordReset(email, body?, query?) is deprecated. Consider replacing it with requestPasswordReset(email, options?).",i,t,n),this.client.send(this.baseCrudPath+"/request-password-reset",i).then(()=>!0)}confirmPasswordReset(e,t,n,i,o){let l={method:"POST",body:{token:e,password:t,passwordConfirm:n}};return l=W("This form of confirmPasswordReset(resetToken, password, passwordConfirm, body?, query?) is deprecated. Consider replacing it with confirmPasswordReset(resetToken, password, passwordConfirm, options?).",l,i,o),this.client.send(this.baseCrudPath+"/confirm-password-reset",l).then(()=>!0)}}class Tt extends fe{constructor(){super(...arguments),this.clientId="",this.eventSource=null,this.subscriptions={},this.lastSentTopics=[],this.maxConnectTimeout=15e3,this.reconnectAttempts=0,this.maxReconnectAttempts=1/0,this.predefinedReconnectIntervals=[200,300,500,1e3,1200,1500,2e3],this.pendingConnects=[]}get isConnected(){return!!this.eventSource&&!!this.clientId&&!this.pendingConnects.length}subscribe(e,t){var n;return U(this,void 0,void 0,function*(){if(!e)throw new Error("topic must be set.");const i=function(o){const l=o;let r;try{r=JSON.parse(l==null?void 0:l.data)}catch{}t(r||{})};return this.subscriptions[e]||(this.subscriptions[e]=[]),this.subscriptions[e].push(i),this.isConnected?this.subscriptions[e].length===1?yield this.submitSubscriptions():(n=this.eventSource)===null||n===void 0||n.addEventListener(e,i):yield this.connect(),()=>U(this,void 0,void 0,function*(){return this.unsubscribeByTopicAndListener(e,i)})})}unsubscribe(e){var t;return U(this,void 0,void 0,function*(){if(this.hasSubscriptionListeners(e)){if(e){for(let n of this.subscriptions[e])(t=this.eventSource)===null||t===void 0||t.removeEventListener(e,n);delete this.subscriptions[e]}else this.subscriptions={};this.hasSubscriptionListeners()?this.hasSubscriptionListeners(e)||(yield this.submitSubscriptions()):this.disconnect()}})}unsubscribeByPrefix(e){var t;return U(this,void 0,void 0,function*(){let n=!1;for(let i in this.subscriptions)if(i.startsWith(e)){n=!0;for(let o of this.subscriptions[i])(t=this.eventSource)===null||t===void 0||t.removeEventListener(i,o);delete this.subscriptions[i]}n&&(this.hasSubscriptionListeners()?yield this.submitSubscriptions():this.disconnect())})}unsubscribeByTopicAndListener(e,t){var n;return U(this,void 0,void 0,function*(){if(!Array.isArray(this.subscriptions[e])||!this.subscriptions[e].length)return;let i=!1;for(let o=this.subscriptions[e].length-1;o>=0;o--)this.subscriptions[e][o]===t&&(i=!0,delete this.subscriptions[e][o],this.subscriptions[e].splice(o,1),(n=this.eventSource)===null||n===void 0||n.removeEventListener(e,t));i&&(this.subscriptions[e].length||delete this.subscriptions[e],this.hasSubscriptionListeners()?this.hasSubscriptionListeners(e)||(yield this.submitSubscriptions()):this.disconnect())})}hasSubscriptionListeners(e){var t,n;if(this.subscriptions=this.subscriptions||{},e)return!!(!((t=this.subscriptions[e])===null||t===void 0)&&t.length);for(let i in this.subscriptions)if(!((n=this.subscriptions[i])===null||n===void 0)&&n.length)return!0;return!1}submitSubscriptions(){return U(this,void 0,void 0,function*(){if(this.clientId)return this.addAllSubscriptionListeners(),this.lastSentTopics=this.getNonEmptySubscriptionTopics(),this.client.send("/api/realtime",{method:"POST",body:{clientId:this.clientId,subscriptions:this.lastSentTopics},query:{requestKey:this.getSubscriptionsCancelKey()}}).catch(e=>{if(!(e!=null&&e.isAbort))throw e})})}getSubscriptionsCancelKey(){return"realtime_"+this.clientId}getNonEmptySubscriptionTopics(){const e=[];for(let t in this.subscriptions)this.subscriptions[t].length&&e.push(t);return e}addAllSubscriptionListeners(){if(this.eventSource){this.removeAllSubscriptionListeners();for(let e in this.subscriptions)for(let t of this.subscriptions[e])this.eventSource.addEventListener(e,t)}}removeAllSubscriptionListeners(){if(this.eventSource)for(let e in this.subscriptions)for(let t of this.subscriptions[e])this.eventSource.removeEventListener(e,t)}connect(){return U(this,void 0,void 0,function*(){if(!(this.reconnectAttempts>0))return new Promise((e,t)=>{this.pendingConnects.push({resolve:e,reject:t}),this.pendingConnects.length>1||this.initConnect()})})}initConnect(){this.disconnect(!0),clearTimeout(this.connectTimeoutId),this.connectTimeoutId=setTimeout(()=>{this.connectErrorHandler(new Error("EventSource connect took too long."))},this.maxConnectTimeout),this.eventSource=new EventSource(this.client.buildUrl("/api/realtime")),this.eventSource.onerror=e=>{this.connectErrorHandler(new Error("Failed to establish realtime connection."))},this.eventSource.addEventListener("PB_CONNECT",e=>{const t=e;this.clientId=t==null?void 0:t.lastEventId,this.submitSubscriptions().then(()=>U(this,void 0,void 0,function*(){let n=3;for(;this.hasUnsentSubscriptions()&&n>0;)n--,yield this.submitSubscriptions()})).then(()=>{for(let n of this.pendingConnects)n.resolve();this.pendingConnects=[],this.reconnectAttempts=0,clearTimeout(this.reconnectTimeoutId),clearTimeout(this.connectTimeoutId)}).catch(n=>{this.clientId="",this.connectErrorHandler(n)})})}hasUnsentSubscriptions(){const e=this.getNonEmptySubscriptionTopics();if(e.length!=this.lastSentTopics.length)return!0;for(const t of e)if(!this.lastSentTopics.includes(t))return!0;return!1}connectErrorHandler(e){if(clearTimeout(this.connectTimeoutId),clearTimeout(this.reconnectTimeoutId),!this.clientId&&!this.reconnectAttempts||this.reconnectAttempts>this.maxReconnectAttempts){for(let n of this.pendingConnects)n.reject(new Y(e));return this.pendingConnects=[],void this.disconnect()}this.disconnect(!0);const t=this.predefinedReconnectIntervals[this.reconnectAttempts]||this.predefinedReconnectIntervals[this.predefinedReconnectIntervals.length-1];this.reconnectAttempts++,this.reconnectTimeoutId=setTimeout(()=>{this.initConnect()},t)}disconnect(e=!1){var t;if(clearTimeout(this.connectTimeoutId),clearTimeout(this.reconnectTimeoutId),this.removeAllSubscriptionListeners(),this.client.cancelRequest(this.getSubscriptionsCancelKey()),(t=this.eventSource)===null||t===void 0||t.close(),this.eventSource=null,this.clientId="",!e){this.reconnectAttempts=0;for(let n of this.pendingConnects)n.resolve();this.pendingConnects=[]}}}class qn extends ot{constructor(e,t){super(e),this.collectionIdOrName=t}get baseCrudPath(){return this.baseCollectionPath+"/records"}get baseCollectionPath(){return"/api/collections/"+encodeURIComponent(this.collectionIdOrName)}subscribeOne(e,t){return U(this,void 0,void 0,function*(){return console.warn("PocketBase: subscribeOne(recordId, callback) is deprecated. Please replace it with subscribe(recordId, callback)."),this.client.realtime.subscribe(this.collectionIdOrName+"/"+e,t)})}subscribe(e,t){return U(this,void 0,void 0,function*(){if(typeof e=="function")return console.warn("PocketBase: subscribe(callback) is deprecated. Please replace it with subscribe('*', callback)."),this.client.realtime.subscribe(this.collectionIdOrName,e);if(!t)throw new Error("Missing subscription callback.");if(e==="")throw new Error("Missing topic.");let n=this.collectionIdOrName;return e!=="*"&&(n+="/"+e),this.client.realtime.subscribe(n,t)})}unsubscribe(e){return U(this,void 0,void 0,function*(){return e==="*"?this.client.realtime.unsubscribe(this.collectionIdOrName):e?this.client.realtime.unsubscribe(this.collectionIdOrName+"/"+e):this.client.realtime.unsubscribeByPrefix(this.collectionIdOrName)})}getFullList(e,t){if(typeof e=="number")return super.getFullList(e,t);const n=Object.assign({},e,t);return super.getFullList(n)}getList(e=1,t=30,n){return super.getList(e,t,n)}getFirstListItem(e,t){return super.getFirstListItem(e,t)}getOne(e,t){return super.getOne(e,t)}create(e,t){return super.create(e,t)}update(e,t,n){return super.update(e,t,n).then(i=>{var o,l,r;return((o=this.client.authStore.model)===null||o===void 0?void 0:o.id)!==(i==null?void 0:i.id)||((l=this.client.authStore.model)===null||l===void 0?void 0:l.collectionId)!==this.collectionIdOrName&&((r=this.client.authStore.model)===null||r===void 0?void 0:r.collectionName)!==this.collectionIdOrName||this.client.authStore.save(this.client.authStore.token,i),i})}delete(e,t){return super.delete(e,t).then(n=>{var i,o,l;return!n||((i=this.client.authStore.model)===null||i===void 0?void 0:i.id)!==e||((o=this.client.authStore.model)===null||o===void 0?void 0:o.collectionId)!==this.collectionIdOrName&&((l=this.client.authStore.model)===null||l===void 0?void 0:l.collectionName)!==this.collectionIdOrName||this.client.authStore.clear(),n})}authResponse(e){const t=this.decode((e==null?void 0:e.record)||{});return this.client.authStore.save(e==null?void 0:e.token,t),Object.assign({},e,{token:(e==null?void 0:e.token)||"",record:t})}listAuthMethods(e){return e=Object.assign({method:"GET"},e),this.client.send(this.baseCollectionPath+"/auth-methods",e).then(t=>Object.assign({},t,{usernamePassword:!!(t!=null&&t.usernamePassword),emailPassword:!!(t!=null&&t.emailPassword),authProviders:Array.isArray(t==null?void 0:t.authProviders)?t==null?void 0:t.authProviders:[]}))}authWithPassword(e,t,n,i){let o={method:"POST",body:{identity:e,password:t}};return o=W("This form of authWithPassword(usernameOrEmail, pass, body?, query?) is deprecated. Consider replacing it with authWithPassword(usernameOrEmail, pass, options?).",o,n,i),this.client.send(this.baseCollectionPath+"/auth-with-password",o).then(l=>this.authResponse(l))}authWithOAuth2Code(e,t,n,i,o,l,r){let c={method:"POST",body:{provider:e,code:t,codeVerifier:n,redirectUrl:i,createData:o}};return c=W("This form of authWithOAuth2Code(provider, code, codeVerifier, redirectUrl, createData?, body?, query?) is deprecated. Consider replacing it with authWithOAuth2Code(provider, code, codeVerifier, redirectUrl, createData?, options?).",c,l,r),this.client.send(this.baseCollectionPath+"/auth-with-oauth2",c).then(a=>this.authResponse(a))}authWithOAuth2(...e){return U(this,void 0,void 0,function*(){if(e.length>1||typeof(e==null?void 0:e[0])=="string")return console.warn("PocketBase: This form of authWithOAuth2() is deprecated and may get removed in the future. Please replace with authWithOAuth2Code() OR use the authWithOAuth2() realtime form as shown in https://pocketbase.io/docs/authentication/#oauth2-integration."),this.authWithOAuth2Code((e==null?void 0:e[0])||"",(e==null?void 0:e[1])||"",(e==null?void 0:e[2])||"",(e==null?void 0:e[3])||"",(e==null?void 0:e[4])||{},(e==null?void 0:e[5])||{},(e==null?void 0:e[6])||{});const t=(e==null?void 0:e[0])||{},n=(yield this.listAuthMethods()).authProviders.find(c=>c.name===t.provider);if(!n)throw new Y(new Error(`Missing or invalid provider "${t.provider}".`));const i=this.client.buildUrl("/api/oauth2-redirect"),o=new Tt(this.client);let l=null;function r(){l==null||l.close(),o.unsubscribe()}return t.urlCallback||(l=mt(void 0)),new Promise((c,a)=>U(this,void 0,void 0,function*(){var u;try{yield o.subscribe("@oauth2",m=>U(this,void 0,void 0,function*(){const T=o.clientId;try{if(!m.state||T!==m.state)throw new Error("State parameters don't match.");const _=Object.assign({},t);delete _.provider,delete _.scopes,delete _.createData,delete _.urlCallback;const k=yield this.authWithOAuth2Code(n.name,m.code,n.codeVerifier,i,t.createData,_);c(k)}catch(_){a(new Y(_))}r()}));const f={state:o.clientId};!((u=t.scopes)===null||u===void 0)&&u.length&&(f.scope=t.scopes.join(" "));const d=this._replaceQueryParams(n.authUrl+i,f);yield(t.urlCallback||function(m){l?l.location.href=m:l=mt(m)})(d)}catch(f){r(),a(new Y(f))}}))})}authRefresh(e,t){let n={method:"POST"};return n=W("This form of authRefresh(body?, query?) is deprecated. Consider replacing it with authRefresh(options?).",n,e,t),this.client.send(this.baseCollectionPath+"/auth-refresh",n).then(i=>this.authResponse(i))}requestPasswordReset(e,t,n){let i={method:"POST",body:{email:e}};return i=W("This form of requestPasswordReset(email, body?, query?) is deprecated. Consider replacing it with requestPasswordReset(email, options?).",i,t,n),this.client.send(this.baseCollectionPath+"/request-password-reset",i).then(()=>!0)}confirmPasswordReset(e,t,n,i,o){let l={method:"POST",body:{token:e,password:t,passwordConfirm:n}};return l=W("This form of confirmPasswordReset(token, password, passwordConfirm, body?, query?) is deprecated. Consider replacing it with confirmPasswordReset(token, password, passwordConfirm, options?).",l,i,o),this.client.send(this.baseCollectionPath+"/confirm-password-reset",l).then(()=>!0)}requestVerification(e,t,n){let i={method:"POST",body:{email:e}};return i=W("This form of requestVerification(email, body?, query?) is deprecated. Consider replacing it with requestVerification(email, options?).",i,t,n),this.client.send(this.baseCollectionPath+"/request-verification",i).then(()=>!0)}confirmVerification(e,t,n){let i={method:"POST",body:{token:e}};return i=W("This form of confirmVerification(token, body?, query?) is deprecated. Consider replacing it with confirmVerification(token, options?).",i,t,n),this.client.send(this.baseCollectionPath+"/confirm-verification",i).then(()=>!0)}requestEmailChange(e,t,n){let i={method:"POST",body:{newEmail:e}};return i=W("This form of requestEmailChange(newEmail, body?, query?) is deprecated. Consider replacing it with requestEmailChange(newEmail, options?).",i,t,n),this.client.send(this.baseCollectionPath+"/request-email-change",i).then(()=>!0)}confirmEmailChange(e,t,n,i){let o={method:"POST",body:{token:e,password:t}};return o=W("This form of confirmEmailChange(token, password, body?, query?) is deprecated. Consider replacing it with confirmEmailChange(token, password, options?).",o,n,i),this.client.send(this.baseCollectionPath+"/confirm-email-change",o).then(()=>!0)}listExternalAuths(e,t){return t=Object.assign({method:"GET"},t),this.client.send(this.baseCrudPath+"/"+encodeURIComponent(e)+"/external-auths",t)}unlinkExternalAuth(e,t,n){return n=Object.assign({method:"DELETE"},n),this.client.send(this.baseCrudPath+"/"+encodeURIComponent(e)+"/external-auths/"+encodeURIComponent(t),n).then(()=>!0)}_replaceQueryParams(e,t={}){let n=e,i="";e.indexOf("?")>=0&&(n=e.substring(0,e.indexOf("?")),i=e.substring(e.indexOf("?")+1));const o={},l=i.split("&");for(const r of l){if(r=="")continue;const c=r.split("=");o[decodeURIComponent(c[0].replace(/\+/g," "))]=decodeURIComponent((c[1]||"").replace(/\+/g," "))}for(let r in t)t.hasOwnProperty(r)&&(t[r]==null?delete o[r]:o[r]=t[r]);i="";for(let r in o)o.hasOwnProperty(r)&&(i!=""&&(i+="&"),i+=encodeURIComponent(r.replace(/%20/g,"+"))+"="+encodeURIComponent(o[r].replace(/%20/g,"+")));return i!=""?n+"?"+i:n}}function mt(s){if(typeof window>"u"||!(window!=null&&window.open))throw new Y(new Error("Not in a browser context - please pass a custom urlCallback function."));let e=1024,t=768,n=window.innerWidth,i=window.innerHeight;e=e>n?n:e,t=t>i?i:t;let o=n/2-e/2,l=i/2-t/2;return window.open(s,"popup_window","width="+e+",height="+t+",top="+l+",left="+o+",resizable,menubar=no")}class An extends ot{get baseCrudPath(){return"/api/collections"}import(e,t=!1,n){return U(this,void 0,void 0,function*(){return n=Object.assign({method:"PUT",body:{collections:e,deleteMissing:t}},n),this.client.send(this.baseCrudPath+"/import",n).then(()=>!0)})}}class Nn extends fe{getRequestsList(e=1,t=30,n){return(n=Object.assign({method:"GET"},n)).query=Object.assign({page:e,perPage:t},n.query),this.client.send("/api/logs/requests",n)}getRequest(e,t){return t=Object.assign({method:"GET"},t),this.client.send("/api/logs/requests/"+encodeURIComponent(e),t)}getRequestsStats(e){return e=Object.assign({method:"GET"},e),this.client.send("/api/logs/requests/stats",e)}}class Dn extends fe{check(e){return e=Object.assign({method:"GET"},e),this.client.send("/api/health",e)}}class Fn extends fe{getUrl(e,t,n={}){if(!t||!(e!=null&&e.id)||!(e!=null&&e.collectionId)&&!(e!=null&&e.collectionName))return"";const i=[];i.push("api"),i.push("files"),i.push(encodeURIComponent(e.collectionId||e.collectionName)),i.push(encodeURIComponent(e.id)),i.push(encodeURIComponent(t));let o=this.client.buildUrl(i.join("/"));if(Object.keys(n).length){n.download===!1&&delete n.download;const l=new URLSearchParams(n);o+=(o.includes("?")?"&":"?")+l}return o}getToken(e){return e=Object.assign({method:"POST"},e),this.client.send("/api/files/token",e).then(t=>(t==null?void 0:t.token)||"")}}class Vn extends fe{getFullList(e){return e=Object.assign({method:"GET"},e),this.client.send("/api/backups",e)}create(e,t){return t=Object.assign({method:"POST",body:{name:e}},t),this.client.send("/api/backups",t).then(()=>!0)}upload(e,t){return t=Object.assign({method:"POST",body:e},t),this.client.send("/api/backups/upload",t).then(()=>!0)}delete(e,t){return t=Object.assign({method:"DELETE"},t),this.client.send(`/api/backups/${encodeURIComponent(e)}`,t).then(()=>!0)}restore(e,t){return t=Object.assign({method:"POST"},t),this.client.send(`/api/backups/${encodeURIComponent(e)}/restore`,t).then(()=>!0)}getDownloadUrl(e,t){return this.client.buildUrl(`/api/backups/${encodeURIComponent(t)}?token=${encodeURIComponent(e)}`)}}const Kn=["requestKey","$cancelKey","$autoCancel","fetch","headers","body","query","params","cache","credentials","headers","integrity","keepalive","method","mode","redirect","referrer","referrerPolicy","signal","window"];class Wn{constructor(e="/",t,n="en-US"){this.cancelControllers={},this.recordServices={},this.enableAutoCancellation=!0,this.baseUrl=e,this.lang=n,this.authStore=t||new Bn,this.admins=new Un(this),this.collections=new An(this),this.files=new Fn(this),this.logs=new Nn(this),this.settings=new Ln(this),this.realtime=new Tt(this),this.health=new Dn(this),this.backups=new Vn(this)}collection(e){return this.recordServices[e]||(this.recordServices[e]=new qn(this,e)),this.recordServices[e]}autoCancellation(e){return this.enableAutoCancellation=!!e,this}cancelRequest(e){return this.cancelControllers[e]&&(this.cancelControllers[e].abort(),delete this.cancelControllers[e]),this}cancelAllRequests(){for(let e in this.cancelControllers)this.cancelControllers[e].abort();return this.cancelControllers={},this}getFileUrl(e,t,n={}){return this.files.getUrl(e,t,n)}buildUrl(e){var t;let n=this.baseUrl;return typeof window>"u"||!window.location||n.startsWith("https://")||n.startsWith("http://")||(n=!((t=window.location.origin)===null||t===void 0)&&t.endsWith("/")?window.location.origin.substring(0,window.location.origin.length-1):window.location.origin||"",this.baseUrl.startsWith("/")||(n+=window.location.pathname||"/",n+=n.endsWith("/")?"":"/"),n+=this.baseUrl),e&&(n+=n.endsWith("/")?"":"/",n+=e.startsWith("/")?e.substring(1):e),n}send(e,t){return U(this,void 0,void 0,function*(){t=this.initSendOptions(e,t);let n=this.buildUrl(e);if(this.beforeSend){const i=Object.assign({},yield this.beforeSend(n,t));i.url!==void 0||i.options!==void 0?(n=i.url||n,t=i.options||t):Object.keys(i).length&&(t=i,console!=null&&console.warn&&console.warn("Deprecated format of beforeSend return: please use `return { url, options }`, instead of `return options`."))}if(t.query!==void 0){const i=this.serializeQueryParams(t.query);i&&(n+=(n.includes("?")?"&":"?")+i),delete t.query}return this.getHeader(t.headers,"Content-Type")=="application/json"&&t.body&&typeof t.body!="string"&&(t.body=JSON.stringify(t.body)),(t.fetch||fetch)(n,t).then(i=>U(this,void 0,void 0,function*(){let o={};try{o=yield i.json()}catch{}if(this.afterSend&&(o=yield this.afterSend(i,o)),i.status>=400)throw new Y({url:i.url,status:i.status,data:o});return o})).catch(i=>{throw new Y(i)})})}initSendOptions(e,t){(t=Object.assign({method:"GET"},t)).query=t.query||{},t.body=this.convertToFormDataIfNeeded(t.body);for(let n in t)Kn.includes(n)||(t.query[n]=t[n],delete t[n]);if(t.query=Object.assign({},t.params,t.query),t.requestKey===void 0&&(t.$autoCancel===!1||t.query.$autoCancel===!1?t.requestKey=null:(t.$cancelKey||t.query.$cancelKey)&&(t.requestKey=t.$cancelKey||t.query.$cancelKey)),delete t.$autoCancel,delete t.query.$autoCancel,delete t.$cancelKey,delete t.query.$cancelKey,this.getHeader(t.headers,"Content-Type")!==null||this.isFormData(t.body)||(t.headers=Object.assign({},t.headers,{"Content-Type":"application/json"})),this.getHeader(t.headers,"Accept-Language")===null&&(t.headers=Object.assign({},t.headers,{"Accept-Language":this.lang})),this.authStore.token&&this.getHeader(t.headers,"Authorization")===null&&(t.headers=Object.assign({},t.headers,{Authorization:this.authStore.token})),this.enableAutoCancellation&&t.requestKey!==null){const n=t.requestKey||(t.method||"GET")+e;delete t.requestKey,this.cancelRequest(n);const i=new AbortController;this.cancelControllers[n]=i,t.signal=i.signal}return t}convertToFormDataIfNeeded(e){if(typeof FormData>"u"||e===void 0||typeof e!="object"||e===null||this.isFormData(e)||!this.hasBlobField(e))return e;const t=new FormData;for(let n in e){const i=Array.isArray(e[n])?e[n]:[e[n]];for(let o of i)t.append(n,o)}return t}hasBlobField(e){for(let t in e){const n=Array.isArray(e[t])?e[t]:[e[t]];for(let i of n)if(typeof Blob<"u"&&i instanceof Blob||typeof File<"u"&&i instanceof File)return!0}return!1}getHeader(e,t){e=e||{},t=t.toLowerCase();for(let n in e)if(n.toLowerCase()==t)return e[n];return null}isFormData(e){return e&&(e.constructor.name==="FormData"||typeof FormData<"u"&&e instanceof FormData)}serializeQueryParams(e){const t=[];for(const n in e){if(e[n]===null)continue;const i=e[n],o=encodeURIComponent(n);if(Array.isArray(i))for(const l of i)t.push(o+"="+encodeURIComponent(l));else i instanceof Date?t.push(o+"="+encodeURIComponent(i.toISOString())):typeof i!==null&&typeof i=="object"?t.push(o+"="+encodeURIComponent(JSON.stringify(i))):t.push(o+"="+encodeURIComponent(i))}return t.join("&")}}const Q=new Wn(window.location.origin),le=Ct(Q.authStore.model);Q.authStore.onChange((s,e)=>{le.set(e)});const Gn="src/lib/UploadButton.svelte";function jt(s){let e;const t={c:function(){e=X("Upload")},l:function(i){e=Z(i,"Upload")},m:function(i,o){y(i,e,o)},d:function(i){i&&p(e)}};return g("SvelteRegisterBlock",{block:t,id:jt.name,type:"slot",source:"(35:0) <Button on:click={() => input.click()}>",ctx:s}),t}function De(s){let e,t,n,i,o,l;e=new pe({props:{$$slots:{default:[jt]},$$scope:{ctx:s}},$$inline:!0}),e.$on("click",s[2]);const r={c:function(){I(e.$$.fragment),t=D(),n=P("input"),this.h()},l:function(a){$(e.$$.fragment,a),t=F(a),n=O(a,"INPUT",{type:!0,class:!0}),this.h()},h:function(){C(n,"type","file"),C(n,"class","hidden"),R(n,Gn,35,0,623)},m:function(a,u){B(e,a,u),y(a,t,u),y(a,n,u),s[3](n),i=!0,o||(l=ue(n,"change",s[4]),o=!0)},p:function(a,[u]){const f={};u&256&&(f.$$scope={dirty:u,ctx:a}),e.$set(f)},i:function(a){i||(b(e.$$.fragment,a),i=!0)},o:function(a){v(e.$$.fragment,a),i=!1},d:function(a){a&&(p(t),p(n)),L(e,a),s[3](null),o=!1,l()}};return g("SvelteRegisterBlock",{block:r,id:De.name,type:"component",source:"",ctx:s}),r}function zn(s,e,t){let n;Be(le,"currentUser"),Le(s,le,m=>t(5,n=m));let{$$slots:i={},$$scope:o}=e;H("UploadButton",i,[]);const l=ce();let r=null,c=null;async function a(){let m=[];for(const T of c)m.push(Q.collection("files").create({name:T.name,file:T,owner:n.id}));await Promise.all(m),l("upload",c),t(0,c=null)}const u=[];Object.keys(e).forEach(m=>{!~u.indexOf(m)&&m.slice(0,2)!=="$$"&&m!=="slot"&&console.warn(`<UploadButton> was created with unknown prop '${m}'`)});const f=()=>r.click();function d(m){ge[m?"unshift":"push"](()=>{r=m,t(1,r)})}function h(){c=this.files,t(0,c)}return s.$capture_state=()=>({createEventDispatcher:ce,Button:pe,pb:Q,currentUser:le,dispatch:l,input:r,files:c,upload:a,$currentUser:n}),s.$inject_state=m=>{"input"in m&&t(1,r=m.input),"files"in m&&t(0,c=m.files)},e&&"$$inject"in e&&s.$inject_state(e.$$inject),s.$$.update=()=>{s.$$.dirty&1&&c&&a()},[c,r,f,d,h]}class It extends z{constructor(e){super(e),M(this,e,zn,De,G,{}),g("SvelteRegisterComponent",{component:this,tagName:"UploadButton",options:e,id:De.name})}}const $t="src/lib/TextInput.svelte";function Bt(s){let e,t,n,i=[{type:"text"},{class:s[2]},s[3]],o={};for(let r=0;r<i.length;r+=1)o=E(o,i[r]);const l={c:function(){e=P("input"),this.h()},l:function(c){e=O(c,"INPUT",{type:!0,class:!0}),this.h()},h:function(){ae(e,o),R(e,$t,26,1,438)},m:function(c,a){y(c,e,a),e.autofocus&&e.focus(),Se(e,s[0]),t||(n=ue(e,"input",s[5]),t=!0)},p:function(c,a){ae(e,o=Re(i,[{type:"text"},{class:c[2]},a&8&&c[3]])),a&1&&e.value!==c[0]&&Se(e,c[0])},d:function(c){c&&p(e),t=!1,n()}};return g("SvelteRegisterBlock",{block:l,id:Bt.name,type:"else",source:"(26:0) {:else}",ctx:s}),l}function Lt(s){let e,t,n,i=[{type:"password"},{class:s[2]},s[3]],o={};for(let r=0;r<i.length;r+=1)o=E(o,i[r]);const l={c:function(){e=P("input"),this.h()},l:function(c){e=O(c,"INPUT",{type:!0,class:!0}),this.h()},h:function(){ae(e,o),R(e,$t,24,1,361)},m:function(c,a){y(c,e,a),e.autofocus&&e.focus(),Se(e,s[0]),t||(n=ue(e,"input",s[4]),t=!0)},p:function(c,a){ae(e,o=Re(i,[{type:"password"},{class:c[2]},a&8&&c[3]])),a&1&&e.value!==c[0]&&Se(e,c[0])},d:function(c){c&&p(e),t=!1,n()}};return g("SvelteRegisterBlock",{block:l,id:Lt.name,type:"if",source:"(24:0) {#if password}",ctx:s}),l}function Fe(s){let e;function t(l,r){return l[1]?Lt:Bt}let n=t(s),i=n(s);const o={c:function(){i.c(),e=K()},l:function(r){i.l(r),e=K()},m:function(r,c){i.m(r,c),y(r,e,c)},p:function(r,[c]){n===(n=t(r))&&i?i.p(r,c):(i.d(1),i=n(r),i&&(i.c(),i.m(e.parentNode,e)))},i:N,o:N,d:function(r){r&&p(e),i.d(r)}};return g("SvelteRegisterBlock",{block:o,id:Fe.name,type:"component",source:"",ctx:s}),o}function Mn(s,e,t){const n=["password","value"];let i=he(e,n),{$$slots:o={},$$scope:l}=e;H("TextInput",o,[]);let{password:r=!1}=e,{value:c=""}=e;const a=`
		px-2
		py-1
		rounded-2xl
		border-4
		transition-all
		text-slate-100
		outline-none
		border-cyan-500
		dark:text-slate-800
		hover:border-cyan-600
		focus:border-cyan-700
		disabled:bg-cyan-200
		disabled:text-cyan-700
		disabled:border-cyan-300
	`;function u(){c=this.value,t(0,c)}function f(){c=this.value,t(0,c)}return s.$$set=d=>{e=E(E({},e),re(d)),t(3,i=he(e,n)),"password"in d&&t(1,r=d.password),"value"in d&&t(0,c=d.value)},s.$capture_state=()=>({password:r,value:c,style:a}),s.$inject_state=d=>{"password"in e&&t(1,r=d.password),"value"in e&&t(0,c=d.value)},e&&"$$inject"in e&&s.$inject_state(e.$$inject),[c,r,a,i,u,f]}class be extends z{constructor(e){super(e),M(this,e,Mn,Fe,G,{password:1,value:0}),g("SvelteRegisterComponent",{component:this,tagName:"TextInput",options:e,id:Fe.name})}get password(){throw new Error("<TextInput>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set password(e){throw new Error("<TextInput>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get value(){throw new Error("<TextInput>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set value(e){throw new Error("<TextInput>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}}const Hn="src/lib/Search.svelte";function Ve(s){let e,t,n,i,o,l;function r(u){s[2](u)}let c={placeholder:"Search..."};s[0]!==void 0&&(c.value=s[0]),t=new be({props:c,$$inline:!0}),ge.push(()=>Pe(t,"value",r));const a={c:function(){e=P("form"),I(t.$$.fragment),this.h()},l:function(f){e=O(f,"FORM",{class:!0});var d=q(e);$(t.$$.fragment,d),d.forEach(p),this.h()},h:function(){C(e,"class","contents"),R(e,Hn,14,0,236)},m:function(f,d){y(f,e,d),B(t,e,null),i=!0,o||(l=ue(e,"submit",wt(s[1]),!1,!0,!1,!1),o=!0)},p:function(f,[d]){const h={};!n&&d&1&&(n=!0,h.value=f[0],Ce(()=>n=!1)),t.$set(h)},i:function(f){i||(b(t.$$.fragment,f),i=!0)},o:function(f){v(t.$$.fragment,f),i=!1},d:function(f){f&&p(e),L(t),o=!1,l()}};return g("SvelteRegisterBlock",{block:a,id:Ve.name,type:"component",source:"",ctx:s}),a}function Jn(s,e,t){let{$$slots:n={},$$scope:i}=e;H("Search",n,[]);const o=ce();let{value:l=""}=e;function r(){o("submit",l)}const c=["value"];Object.keys(e).forEach(u=>{!~c.indexOf(u)&&u.slice(0,2)!=="$$"&&u!=="slot"&&console.warn(`<Search> was created with unknown prop '${u}'`)});function a(u){l=u,t(0,l)}return s.$$set=u=>{"value"in u&&t(0,l=u.value)},s.$capture_state=()=>({createEventDispatcher:ce,TextInput:be,dispatch:o,value:l,submit:r}),s.$inject_state=u=>{"value"in u&&t(0,l=u.value)},e&&"$$inject"in e&&s.$inject_state(e.$$inject),[l,r,a]}class Ut extends z{constructor(e){super(e),M(this,e,Jn,Ve,G,{value:0}),g("SvelteRegisterComponent",{component:this,tagName:"Search",options:e,id:Ve.name})}get value(){throw new Error("<Search>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set value(e){throw new Error("<Search>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}}const Qn="src/lib/Link.svelte";function Ke(s){let e,t,n,i,o;const l=s[4].default,r=ne(l,s,s[3],null);let c=[{class:t="text-cyan-500 hover:text-cyan-600 active:text-cyan-700 transition-all "+s[1]},{href:s[0]},s[2]],a={};for(let f=0;f<c.length;f+=1)a=E(a,c[f]);const u={c:function(){e=P("a"),r&&r.c(),this.h()},l:function(d){e=O(d,"A",{class:!0,href:!0});var h=q(e);r&&r.l(h),h.forEach(p),this.h()},h:function(){ae(e,a),R(e,Qn,6,0,117)},m:function(d,h){y(d,e,h),r&&r.m(e,null),n=!0,i||(o=ue(e,"click",s[5],!1,!1,!1,!1),i=!0)},p:function(d,[h]){r&&r.p&&(!n||h&8)&&ie(r,l,d,d[3],n?se(l,d[3],h,null):oe(d[3]),null),ae(e,a=Re(c,[(!n||h&2&&t!==(t="text-cyan-500 hover:text-cyan-600 active:text-cyan-700 transition-all "+d[1]))&&{class:t},(!n||h&1)&&{href:d[0]},h&4&&d[2]]))},i:function(d){n||(b(r,d),n=!0)},o:function(d){v(r,d),n=!1},d:function(d){d&&p(e),r&&r.d(d),i=!1,o()}};return g("SvelteRegisterBlock",{block:u,id:Ke.name,type:"component",source:"",ctx:s}),u}function Yn(s,e,t){let n;const i=["href"];let o=he(e,i),{$$slots:l={},$$scope:r}=e;H("Link",l,["default"]);let{href:c=""}=e;function a(u){hn.call(this,s,u)}return s.$$set=u=>{t(6,e=E(E({},e),re(u))),t(2,o=he(e,i)),"href"in u&&t(0,c=u.href),"$$scope"in u&&t(3,r=u.$$scope)},s.$capture_state=()=>({href:c,extraStyle:n}),s.$inject_state=u=>{t(6,e=E(E({},e),u)),"href"in e&&t(0,c=u.href),"extraStyle"in e&&t(1,n=u.extraStyle)},e&&"$$inject"in e&&s.$inject_state(e.$$inject),s.$$.update=()=>{t(1,n=e.class??"")},e=re(e),[c,n,o,r,l,a]}class de extends z{constructor(e){super(e),M(this,e,Yn,Ke,G,{href:0}),g("SvelteRegisterComponent",{component:this,tagName:"Link",options:e,id:Ke.name})}get href(){throw new Error("<Link>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set href(e){throw new Error("<Link>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}}const Te="src/lib/Pager.svelte";function pt(s,e,t){const n=s.slice();return n[7]=e[t],n}function We(s){let e,t,n,i="...",o;e=new de({props:{$$slots:{default:[qt]},$$scope:{ctx:s}},$$inline:!0}),e.$on("click",s[3]);const l={c:function(){I(e.$$.fragment),t=D(),n=P("div"),n.textContent=i,this.h()},l:function(c){$(e.$$.fragment,c),t=F(c),n=O(c,"DIV",{"data-svelte-h":!0}),St(n)!=="svelte-12rhcfw"&&(n.textContent=i),this.h()},h:function(){R(n,Te,24,2,464)},m:function(c,a){B(e,c,a),y(c,t,a),y(c,n,a),o=!0},p:function(c,a){const u={};a&1024&&(u.$$scope={dirty:a,ctx:c}),e.$set(u)},i:function(c){o||(b(e.$$.fragment,c),o=!0)},o:function(c){v(e.$$.fragment,c),o=!1},d:function(c){c&&(p(t),p(n)),L(e,c)}};return g("SvelteRegisterBlock",{block:l,id:We.name,type:"if",source:"(23:1) {#if page !== 1}",ctx:s}),l}function qt(s){let e;const t={c:function(){e=X("1")},l:function(i){e=Z(i,"1")},m:function(i,o){y(i,e,o)},d:function(i){i&&p(e)}};return g("SvelteRegisterBlock",{block:t,id:qt.name,type:"slot",source:"(24:2) <Link on:click={(ev) => select(ev, 1)}>",ctx:s}),t}function At(s){let e,t;function n(...o){return s[4](s[7],...o)}e=new de({props:{$$slots:{default:[Dt]},$$scope:{ctx:s}},$$inline:!0}),e.$on("click",n);const i={c:function(){I(e.$$.fragment)},l:function(l){$(e.$$.fragment,l)},m:function(l,r){B(e,l,r),t=!0},p:function(l,r){s=l;const c={};r&1025&&(c.$$scope={dirty:r,ctx:s}),e.$set(c)},i:function(l){t||(b(e.$$.fragment,l),t=!0)},o:function(l){v(e.$$.fragment,l),t=!1},d:function(l){L(e,l)}};return g("SvelteRegisterBlock",{block:i,id:At.name,type:"if",source:"(30:31) ",ctx:s}),i}function Nt(s){let e,t;const n={c:function(){e=P("div"),t=X(s[0]),this.h()},l:function(o){e=O(o,"DIV",{});var l=q(e);t=Z(l,s[0]),l.forEach(p),this.h()},h:function(){R(e,Te,28,3,569)},m:function(o,l){y(o,e,l),V(e,t)},p:function(o,l){l&1&&me(t,o[0])},i:N,o:N,d:function(o){o&&p(e)}};return g("SvelteRegisterBlock",{block:n,id:Nt.name,type:"if",source:"(28:2) {#if p === page}",ctx:s}),n}function Dt(s){let e=s[7]+"",t;const n={c:function(){t=X(e)},l:function(o){t=Z(o,e)},m:function(o,l){y(o,t,l)},p:function(o,l){l&1&&e!==(e=o[7]+"")&&me(t,e)},d:function(o){o&&p(t)}};return g("SvelteRegisterBlock",{block:n,id:Dt.name,type:"slot",source:"(31:3) <Link on:click={(ev) => select(ev, p)}>",ctx:s}),n}function Ge(s){let e,t,n,i;const o=[Nt,At],l=[];function r(a,u){return a[7]===a[0]?0:a[7]>1&&a[7]<a[1]?1:-1}~(e=r(s))&&(t=l[e]=o[e](s));const c={c:function(){t&&t.c(),n=K()},l:function(u){t&&t.l(u),n=K()},m:function(u,f){~e&&l[e].m(u,f),y(u,n,f),i=!0},p:function(u,f){let d=e;e=r(u),e===d?~e&&l[e].p(u,f):(t&&(x(),v(l[d],1,1,()=>{l[d]=null}),ee()),~e?(t=l[e],t?t.p(u,f):(t=l[e]=o[e](u),t.c()),b(t,1),t.m(n.parentNode,n)):t=null)},i:function(u){i||(b(t),i=!0)},o:function(u){v(t),i=!1},d:function(u){u&&p(n),~e&&l[e].d(u)}};return g("SvelteRegisterBlock",{block:c,id:Ge.name,type:"each",source:"(27:1) {#each [page - 2, page - 1, page, page + 1, page + 2] as p}",ctx:s}),c}function ze(s){let e,t="...",n,i,o;i=new de({props:{$$slots:{default:[Ft]},$$scope:{ctx:s}},$$inline:!0}),i.$on("click",s[5]);const l={c:function(){e=P("div"),e.textContent=t,n=D(),I(i.$$.fragment),this.h()},l:function(c){e=O(c,"DIV",{"data-svelte-h":!0}),St(e)!=="svelte-12rhcfw"&&(e.textContent=t),n=F(c),$(i.$$.fragment,c),this.h()},h:function(){R(e,Te,34,2,713)},m:function(c,a){y(c,e,a),y(c,n,a),B(i,c,a),o=!0},p:function(c,a){const u={};a&1026&&(u.$$scope={dirty:a,ctx:c}),i.$set(u)},i:function(c){o||(b(i.$$.fragment,c),o=!0)},o:function(c){v(i.$$.fragment,c),o=!1},d:function(c){c&&(p(e),p(n)),L(i,c)}};return g("SvelteRegisterBlock",{block:l,id:ze.name,type:"if",source:"(34:1) {#if page !== pages}",ctx:s}),l}function Ft(s){let e;const t={c:function(){e=X(s[1])},l:function(i){e=Z(i,s[1])},m:function(i,o){y(i,e,o)},p:function(i,o){o&2&&me(e,i[1])},d:function(i){i&&p(e)}};return g("SvelteRegisterBlock",{block:t,id:Ft.name,type:"slot",source:"(36:2) <Link on:click={(ev) => select(ev, pages)}>",ctx:s}),t}function Me(s){let e,t,n,i,o=s[0]!==1&&We(s),l=Oe([s[0]-2,s[0]-1,s[0],s[0]+1,s[0]+2]),r=[];for(let f=0;f<5;f+=1)r[f]=Ge(pt(s,l,f));const c=f=>v(r[f],1,1,()=>{r[f]=null});let a=s[0]!==s[1]&&ze(s);const u={c:function(){e=P("div"),o&&o.c(),t=D();for(let d=0;d<5;d+=1)r[d].c();n=D(),a&&a.c(),this.h()},l:function(d){e=O(d,"DIV",{class:!0});var h=q(e);o&&o.l(h),t=F(h);for(let m=0;m<5;m+=1)r[m].l(h);n=F(h),a&&a.l(h),h.forEach(p),this.h()},h:function(){C(e,"class","flex flex-row justify-between items-center gap-4"),R(e,Te,21,0,331)},m:function(d,h){y(d,e,h),o&&o.m(e,null),V(e,t);for(let m=0;m<5;m+=1)r[m]&&r[m].m(e,null);V(e,n),a&&a.m(e,null),i=!0},p:function(d,[h]){if(d[0]!==1?o?(o.p(d,h),h&1&&b(o,1)):(o=We(d),o.c(),b(o,1),o.m(e,t)):o&&(x(),v(o,1,1,()=>{o=null}),ee()),h&7){l=Oe([d[0]-2,d[0]-1,d[0],d[0]+1,d[0]+2]);let m;for(m=0;m<5;m+=1){const T=pt(d,l,m);r[m]?(r[m].p(T,h),b(r[m],1)):(r[m]=Ge(T),r[m].c(),b(r[m],1),r[m].m(e,n))}for(x(),m=5;m<5;m+=1)c(m);ee()}d[0]!==d[1]?a?(a.p(d,h),h&3&&b(a,1)):(a=ze(d),a.c(),b(a,1),a.m(e,null)):a&&(x(),v(a,1,1,()=>{a=null}),ee())},i:function(d){if(!i){b(o);for(let h=0;h<5;h+=1)b(r[h]);b(a),i=!0}},o:function(d){v(o),r=r.filter(Boolean);for(let h=0;h<5;h+=1)v(r[h]);v(a),i=!1},d:function(d){d&&p(e),o&&o.d(),kt(r,d),a&&a.d()}};return g("SvelteRegisterBlock",{block:u,id:Me.name,type:"component",source:"",ctx:s}),u}function Xn(s,e,t){let{$$slots:n={},$$scope:i}=e;H("Pager",n,[]);const o=ce();let{page:l=1}=e,{pages:r=1}=e;function c(h,m){h==null||h.preventDefault(),t(0,l=m),o("change",m)}const a=["page","pages"];Object.keys(e).forEach(h=>{!~a.indexOf(h)&&h.slice(0,2)!=="$$"&&h!=="slot"&&console.warn(`<Pager> was created with unknown prop '${h}'`)});const u=h=>c(h,1),f=(h,m)=>c(m,h),d=h=>c(h,r);return s.$$set=h=>{"page"in h&&t(0,l=h.page),"pages"in h&&t(1,r=h.pages)},s.$capture_state=()=>({createEventDispatcher:ce,Link:de,dispatch:o,page:l,pages:r,select:c}),s.$inject_state=h=>{"page"in h&&t(0,l=h.page),"pages"in h&&t(1,r=h.pages)},e&&"$$inject"in e&&s.$inject_state(e.$$inject),s.$$.update=()=>{s.$$.dirty&3&&l>r&&c(null,r)},[l,r,c,u,f,d]}class Vt extends z{constructor(e){super(e),M(this,e,Xn,Me,G,{page:0,pages:1}),g("SvelteRegisterComponent",{component:this,tagName:"Pager",options:e,id:Me.name})}get page(){throw new Error("<Pager>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set page(e){throw new Error("<Pager>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get pages(){throw new Error("<Pager>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set pages(e){throw new Error("<Pager>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}}const{console:Zn}=_n,gt="src/lib/Login.svelte";function Kt(s){let e;const t={c:function(){e=X("Login")},l:function(i){e=Z(i,"Login")},m:function(i,o){y(i,e,o)},d:function(i){i&&p(e)}};return g("SvelteRegisterBlock",{block:t,id:Kt.name,type:"slot",source:'(29:2) <Button type=\\"submit\\" disabled={!email || !password}>',ctx:s}),t}function Wt(s){let e,t,n,i,o,l,r,c,a,u,f,d,h,m;function T(j){s[4](j)}let _={placeholder:"E-mail address..."};s[0]!==void 0&&(_.value=s[0]),o=new be({props:_,$$inline:!0}),ge.push(()=>Pe(o,"value",T));function k(j){s[5](j)}let w={password:!0,placeholder:"Password..."};s[1]!==void 0&&(w.value=s[1]),c=new be({props:w,$$inline:!0}),ge.push(()=>Pe(c,"value",k)),f=new pe({props:{type:"submit",disabled:!s[0]||!s[1],$$slots:{default:[Kt]},$$scope:{ctx:s}},$$inline:!0});const J={c:function(){e=P("div"),t=X(s[2]),n=D(),i=P("form"),I(o.$$.fragment),r=D(),I(c.$$.fragment),u=D(),I(f.$$.fragment),this.h()},l:function(S){e=O(S,"DIV",{class:!0});var A=q(e);t=Z(A,s[2]),A.forEach(p),n=F(S),i=O(S,"FORM",{class:!0});var te=q(i);$(o.$$.fragment,te),r=F(te),$(c.$$.fragment,te),u=F(te),$(f.$$.fragment,te),te.forEach(p),this.h()},h:function(){C(e,"class","text-red-500"),rt(e,"invisible",!s[2]),R(e,gt,23,1,516),C(i,"class","flex flex-col items-end gap-4"),R(i,gt,25,1,583)},m:function(S,A){y(S,e,A),V(e,t),y(S,n,A),y(S,i,A),B(o,i,null),V(i,r),B(c,i,null),V(i,u),B(f,i,null),d=!0,h||(m=ue(i,"submit",wt(s[3]),!1,!0,!1,!1),h=!0)},p:function(S,A){(!d||A&4)&&me(t,S[2]),(!d||A&4)&&rt(e,"invisible",!S[2]);const te={};!l&&A&1&&(l=!0,te.value=S[0],Ce(()=>l=!1)),o.$set(te);const st={};!a&&A&2&&(a=!0,st.value=S[1],Ce(()=>a=!1)),c.$set(st);const Ie={};A&3&&(Ie.disabled=!S[0]||!S[1]),A&64&&(Ie.$$scope={dirty:A,ctx:S}),f.$set(Ie)},i:function(S){d||(b(o.$$.fragment,S),b(c.$$.fragment,S),b(f.$$.fragment,S),d=!0)},o:function(S){v(o.$$.fragment,S),v(c.$$.fragment,S),v(f.$$.fragment,S),d=!1},d:function(S){S&&(p(e),p(n),p(i)),L(o),L(c),L(f),h=!1,m()}};return g("SvelteRegisterBlock",{block:J,id:Wt.name,type:"slot",source:"(23:0) <Body>",ctx:s}),J}function He(s){let e,t;e=new Ee({props:{$$slots:{default:[Wt]},$$scope:{ctx:s}},$$inline:!0});const n={c:function(){I(e.$$.fragment)},l:function(o){$(e.$$.fragment,o)},m:function(o,l){B(e,o,l),t=!0},p:function(o,[l]){const r={};l&71&&(r.$$scope={dirty:l,ctx:o}),e.$set(r)},i:function(o){t||(b(e.$$.fragment,o),t=!0)},o:function(o){v(e.$$.fragment,o),t=!1},d:function(o){L(e,o)}};return g("SvelteRegisterBlock",{block:n,id:He.name,type:"component",source:"",ctx:s}),n}function xn(s,e,t){let{$$slots:n={},$$scope:i}=e;H("Login",n,[]);let o="",l="",r=null;async function c(){try{await Q.collection("users").authWithPassword(o,l)}catch(d){console.error(d),t(2,r="Incorrect login information.");return}}const a=[];Object.keys(e).forEach(d=>{!~a.indexOf(d)&&d.slice(0,2)!=="$$"&&d!=="slot"&&Zn.warn(`<Login> was created with unknown prop '${d}'`)});function u(d){o=d,t(0,o)}function f(d){l=d,t(1,l)}return s.$capture_state=()=>({TextInput:be,Button:pe,Body:Ee,pb:Q,currentUser:le,email:o,password:l,error:r,login:c}),s.$inject_state=d=>{"email"in d&&t(0,o=d.email),"password"in d&&t(1,l=d.password),"error"in d&&t(2,r=d.error)},e&&"$$inject"in e&&s.$inject_state(e.$$inject),[o,l,r,c,u,f]}class Gt extends z{constructor(e){super(e),M(this,e,xn,He,G,{}),g("SvelteRegisterComponent",{component:this,tagName:"Login",options:e,id:He.name})}}const ei="src/lib/Grid.svelte";function Je(s){let e,t,n;const i=s[2].default,o=ne(i,s,s[1],null),l={c:function(){e=P("div"),o&&o.c(),this.h()},l:function(c){e=O(c,"DIV",{class:!0});var a=q(e);o&&o.l(a),a.forEach(p),this.h()},h:function(){C(e,"class",t="flex flex-row flex-wrap justify-center items-start gap-4 "+s[0]),R(e,ei,4,0,54)},m:function(c,a){y(c,e,a),o&&o.m(e,null),n=!0},p:function(c,[a]){o&&o.p&&(!n||a&2)&&ie(o,i,c,c[1],n?se(i,c[1],a,null):oe(c[1]),null),(!n||a&1&&t!==(t="flex flex-row flex-wrap justify-center items-start gap-4 "+c[0]))&&C(e,"class",t)},i:function(c){n||(b(o,c),n=!0)},o:function(c){v(o,c),n=!1},d:function(c){c&&p(e),o&&o.d(c)}};return g("SvelteRegisterBlock",{block:l,id:Je.name,type:"component",source:"",ctx:s}),l}function ti(s,e,t){let n,{$$slots:i={},$$scope:o}=e;return H("Grid",i,["default"]),s.$$set=l=>{t(3,e=E(E({},e),re(l))),"$$scope"in l&&t(1,o=l.$$scope)},s.$capture_state=()=>({extraStyle:n}),s.$inject_state=l=>{t(3,e=E(E({},e),l)),"extraStyle"in e&&t(0,n=l.extraStyle)},e&&"$$inject"in e&&s.$inject_state(e.$$inject),s.$$.update=()=>{t(0,n=e.class)},e=re(e),[n,o,i]}class zt extends z{constructor(e){super(e),M(this,e,ti,Je,G,{}),g("SvelteRegisterComponent",{component:this,tagName:"Grid",options:e,id:Je.name})}}const Qe="src/lib/Card.svelte",ni=s=>({}),bt=s=>({}),ii=s=>({}),vt=s=>({});function Ye(s){let e,t;const n=s[5].subtitle,i=ne(n,s,s[4],bt),o={c:function(){e=P("div"),i&&i.c(),this.h()},l:function(r){e=O(r,"DIV",{class:!0});var c=q(e);i&&i.l(c),c.forEach(p),this.h()},h:function(){C(e,"class","flex flex-col items-center overflow-x-auto"),R(e,Qe,48,2,648)},m:function(r,c){y(r,e,c),i&&i.m(e,null),t=!0},p:function(r,c){i&&i.p&&(!t||c&16)&&ie(i,n,r,r[4],t?se(n,r[4],c,ni):oe(r[4]),bt)},i:function(r){t||(b(i,r),t=!0)},o:function(r){v(i,r),t=!1},d:function(r){r&&p(e),i&&i.d(r)}};return g("SvelteRegisterBlock",{block:o,id:Ye.name,type:"if",source:"(48:1) {#if $$slots['subtitle']}",ctx:s}),o}function Xe(s){let e,t,n,i,o;const l=s[5].image,r=ne(l,s,s[4],vt);let c=s[2].subtitle&&Ye(s);const a={c:function(){e=P("div"),t=P("div"),r&&r.c(),n=D(),c&&c.c(),this.h()},l:function(f){e=O(f,"DIV",{class:!0});var d=q(e);t=O(d,"DIV",{class:!0});var h=q(t);r&&r.l(h),h.forEach(p),n=F(d),c&&c.l(d),d.forEach(p),this.h()},h:function(){C(t,"class","flex flex-col grow justify-center items-stretch rounded-lg overflow-hidden transition-all group-hover:opacity-80 "),R(t,Qe,32,1,425),C(e,"class",i="group flex flex-col p-2 gap-2 rounded-2xl shadow-lg bg-slate-100 transition-all dark:bg-slate-900 dark:outline dark:outline-2 dark:outline-cyan-900 hover:shadow-xl "+s[1]+" "+s[0]),R(e,Qe,12,0,184)},m:function(f,d){y(f,e,d),V(e,t),r&&r.m(t,null),V(e,n),c&&c.m(e,null),o=!0},p:function(f,[d]){r&&r.p&&(!o||d&16)&&ie(r,l,f,f[4],o?se(l,f[4],d,ii):oe(f[4]),vt),f[2].subtitle?c?(c.p(f,d),d&4&&b(c,1)):(c=Ye(f),c.c(),b(c,1),c.m(e,null)):c&&(x(),v(c,1,1,()=>{c=null}),ee()),(!o||d&3&&i!==(i="group flex flex-col p-2 gap-2 rounded-2xl shadow-lg bg-slate-100 transition-all dark:bg-slate-900 dark:outline dark:outline-2 dark:outline-cyan-900 hover:shadow-xl "+f[1]+" "+f[0]))&&C(e,"class",i)},i:function(f){o||(b(r,f),b(c),o=!0)},o:function(f){v(r,f),v(c),o=!1},d:function(f){f&&p(e),r&&r.d(f),c&&c.d()}};return g("SvelteRegisterBlock",{block:a,id:Xe.name,type:"component",source:"",ctx:s}),a}function oi(s,e,t){let n,i,{$$slots:o={},$$scope:l}=e;H("Card",o,["image","subtitle"]);const r=mn(o);let{size:c="md"}=e;return s.$$set=a=>{t(6,e=E(E({},e),re(a))),"size"in a&&t(3,c=a.size),"$$scope"in a&&t(4,l=a.$$scope)},s.$capture_state=()=>({size:c,extraStyle:i,sizeStyle:n}),s.$inject_state=a=>{t(6,e=E(E({},e),a)),"size"in e&&t(3,c=a.size),"extraStyle"in e&&t(0,i=a.extraStyle),"sizeStyle"in e&&t(1,n=a.sizeStyle)},e&&"$$inject"in e&&s.$inject_state(e.$$inject),s.$$.update=()=>{s.$$.dirty&8&&t(1,n={sm:"w-24 h-24",md:"w-48 h-48",lg:"w-96 h-96"}[c]??"w-48 h-48"),t(0,i=e.class)},e=re(e),[i,n,r,c,l,o]}class Mt extends z{constructor(e){super(e),M(this,e,oi,Xe,G,{size:3}),g("SvelteRegisterComponent",{component:this,tagName:"Card",options:e,id:Xe.name})}get size(){throw new Error("<Card>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set size(e){throw new Error("<Card>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}}const _t="src/lib/CircularProgress.svelte";function Ze(s){let e,t;const n={c:function(){e=P("div"),t=P("div"),this.h()},l:function(o){e=O(o,"DIV",{class:!0});var l=q(e);t=O(l,"DIV",{class:!0}),q(t).forEach(p),l.forEach(p),this.h()},h:function(){C(t,"class","w-full h-full rounded-full bg-slate-200 dark:bg-slate-800 "),R(t,_t,13,1,140),C(e,"class","w-8 h-8 p-0.5 rounded-full animate-spin bg-gradient-to-r from-transparent via-transparent to-teal-500 "),R(e,_t,0,0,0)},m:function(o,l){y(o,e,l),V(e,t)},p:N,i:N,o:N,d:function(o){o&&p(e)}};return g("SvelteRegisterBlock",{block:n,id:Ze.name,type:"component",source:"",ctx:s}),n}function si(s,e){let{$$slots:t={},$$scope:n}=e;H("CircularProgress",t,[]);const i=[];return Object.keys(e).forEach(o=>{!~i.indexOf(o)&&o.slice(0,2)!=="$$"&&o!=="slot"&&console.warn(`<CircularProgress> was created with unknown prop '${o}'`)}),[]}class Ht extends z{constructor(e){super(e),M(this,e,si,Ze,G,{}),g("SvelteRegisterComponent",{component:this,tagName:"CircularProgress",options:e,id:Ze.name})}}function ri(s){return s=new URL(s),s.hash?new URLSearchParams(s.hash.substring(1)):new URLSearchParams}const li=Ct(window.location,s=>{const e=t=>{s(t.newURL)};return window.addEventListener("hashchange",e),()=>{window.removeEventListener("hashchange",e)}}),we={subscribe:vn(li,s=>ri(s)).subscribe,set:s=>{window.location.hash=s}},je="src/routes/+page.svelte";function yt(s,e,t){const n=s.slice();return n[12]=e[t],n}function Jt(s){let e,t;const n={c:function(){e=P("img"),this.h()},l:function(o){e=O(o,"IMG",{class:!0,src:!0,alt:!0}),this.h()},h:function(){C(e,"class","max-h-8"),Ue(e.src,t=Pt+"/favicon.png")||C(e,"src",t),C(e,"alt","PocketSafe"),R(e,je,94,3,1908)},m:function(o,l){y(o,e,l)},p:N,d:function(o){o&&p(e)}};return g("SvelteRegisterBlock",{block:n,id:Jt.name,type:"slot",source:'(94:2) <Link class=\\"hover:opacity-50 transition-all\\" href=\\"/\\">',ctx:s}),n}function xe(s){let e,t;e=new It({$$inline:!0}),e.$on("upload",s[10]);const n={c:function(){I(e.$$.fragment)},l:function(o){$(e.$$.fragment,o)},m:function(o,l){B(e,o,l),t=!0},p:N,i:function(o){t||(b(e.$$.fragment,o),t=!0)},o:function(o){v(e.$$.fragment,o),t=!1},d:function(o){L(e,o)}};return g("SvelteRegisterBlock",{block:n,id:xe.name,type:"if",source:"(97:2) {#if $currentUser}",ctx:s}),n}function Qt(s){let e,t,n,i;e=new de({props:{class:"hover:opacity-50 transition-all",href:"/",$$slots:{default:[Jt]},$$scope:{ctx:s}},$$inline:!0});let o=s[2]&&xe(s);const l={c:function(){I(e.$$.fragment),t=D(),o&&o.c(),n=K()},l:function(c){$(e.$$.fragment,c),t=F(c),o&&o.l(c),n=K()},m:function(c,a){B(e,c,a),y(c,t,a),o&&o.m(c,a),y(c,n,a),i=!0},p:function(c,a){const u={};a&32768&&(u.$$scope={dirty:a,ctx:c}),e.$set(u),c[2]?o?(o.p(c,a),a&4&&b(o,1)):(o=xe(c),o.c(),b(o,1),o.m(n.parentNode,n)):o&&(x(),v(o,1,1,()=>{o=null}),ee())},i:function(c){i||(b(e.$$.fragment,c),b(o),i=!0)},o:function(c){v(e.$$.fragment,c),v(o),i=!1},d:function(c){c&&(p(t),p(n)),L(e,c),o&&o.d(c)}};return g("SvelteRegisterBlock",{block:l,id:Qt.name,type:"slot",source:'(93:1) <svelte:fragment slot=\\"start\\">',ctx:s}),l}function Yt(s){let e,t,n;function i(r){s[9](r)}let o={};s[1]!==void 0&&(o.value=s[1]),e=new Ut({props:o,$$inline:!0}),ge.push(()=>Pe(e,"value",i)),e.$on("submit",s[6]);const l={c:function(){I(e.$$.fragment)},l:function(c){$(e.$$.fragment,c)},m:function(c,a){B(e,c,a),n=!0},p:function(c,a){const u={};!t&&a&2&&(t=!0,u.value=c[1],Ce(()=>t=!1)),e.$set(u)},i:function(c){n||(b(e.$$.fragment,c),n=!0)},o:function(c){v(e.$$.fragment,c),n=!1},d:function(c){L(e,c)}};return g("SvelteRegisterBlock",{block:l,id:Yt.name,type:"slot",source:'(107:1) <svelte:fragment slot=\\"middle\\">',ctx:s}),l}function et(s){let e,t=s[2].username+"",n,i,o,l;o=new pe({props:{$$slots:{default:[Xt]},$$scope:{ctx:s}},$$inline:!0}),o.$on("click",s[4]);const r={c:function(){e=P("div"),n=X(t),i=D(),I(o.$$.fragment),this.h()},l:function(a){e=O(a,"DIV",{});var u=q(e);n=Z(u,t),u.forEach(p),i=F(a),$(o.$$.fragment,a),this.h()},h:function(){R(e,je,112,3,2280)},m:function(a,u){y(a,e,u),V(e,n),y(a,i,u),B(o,a,u),l=!0},p:function(a,u){(!l||u&4)&&t!==(t=a[2].username+"")&&me(n,t);const f={};u&32768&&(f.$$scope={dirty:u,ctx:a}),o.$set(f)},i:function(a){l||(b(o.$$.fragment,a),l=!0)},o:function(a){v(o.$$.fragment,a),l=!1},d:function(a){a&&(p(e),p(i)),L(o,a)}};return g("SvelteRegisterBlock",{block:r,id:et.name,type:"if",source:"(112:2) {#if $currentUser}",ctx:s}),r}function Xt(s){let e;const t={c:function(){e=X("Logout")},l:function(i){e=Z(i,"Logout")},m:function(i,o){y(i,e,o)},d:function(i){i&&p(e)}};return g("SvelteRegisterBlock",{block:t,id:Xt.name,type:"slot",source:"(114:3) <Button on:click={logout}>",ctx:s}),t}function Zt(s){let e,t,n=s[2]&&et(s);const i={c:function(){n&&n.c(),e=K()},l:function(l){n&&n.l(l),e=K()},m:function(l,r){n&&n.m(l,r),y(l,e,r),t=!0},p:function(l,r){l[2]?n?(n.p(l,r),r&4&&b(n,1)):(n=et(l),n.c(),b(n,1),n.m(e.parentNode,e)):n&&(x(),v(n,1,1,()=>{n=null}),ee())},i:function(l){t||(b(n),t=!0)},o:function(l){v(n),t=!1},d:function(l){l&&p(e),n&&n.d(l)}};return g("SvelteRegisterBlock",{block:i,id:Zt.name,type:"slot",source:'(111:1) <svelte:fragment slot=\\"end\\">',ctx:s}),i}function xt(s){let e,t;e=new Gt({$$inline:!0});const n={c:function(){I(e.$$.fragment)},l:function(o){$(e.$$.fragment,o)},m:function(o,l){B(e,o,l),t=!0},p:N,i:function(o){t||(b(e.$$.fragment,o),t=!0)},o:function(o){v(e.$$.fragment,o),t=!1},d:function(o){L(e,o)}};return g("SvelteRegisterBlock",{block:n,id:xt.name,type:"else",source:"(145:1) {:else}",ctx:s}),n}function en(s){let e,t,n,i={ctx:s,current:null,token:null,hasCatch:!1,pending:cn,then:nn,catch:tn,value:3,blocks:[,,,]};lt(t=s[3],i);const o={c:function(){e=K(),i.block.c()},l:function(r){e=K(),i.block.l(r)},m:function(r,c){y(r,e,c),i.block.m(r,i.anchor=c),i.mount=()=>e.parentNode,i.anchor=e,n=!0},p:function(r,c){s=r,i.ctx=s,c&8&&t!==(t=s[3])&&lt(t,i)||yn(i,s,c)},i:function(r){n||(b(i.block),n=!0)},o:function(r){for(let c=0;c<3;c+=1){const a=i.blocks[c];v(a)}n=!1},d:function(r){r&&p(e),i.block.d(r),i.token=null,i=null}};return g("SvelteRegisterBlock",{block:o,id:en.name,type:"if",source:"(120:1) {#if $currentUser}",ctx:s}),o}function tn(s){const e={c:N,l:N,m:N,p:N,i:N,o:N,d:N};return g("SvelteRegisterBlock",{block:e,id:tn.name,type:"catch",source:"(1:0) <script>  import { onMount }",ctx:s}),e}function nn(s){let e,t,n,i,o,l=s[3].totalItems==0&&tt(s);t=new zt({props:{$$slots:{default:[ln]},$$scope:{ctx:s}},$$inline:!0}),i=new Vt({props:{page:s[0],pages:s[3].totalPages},$$inline:!0}),i.$on("change",s[7]);const r={c:function(){l&&l.c(),e=D(),I(t.$$.fragment),n=D(),I(i.$$.fragment)},l:function(a){l&&l.l(a),e=F(a),$(t.$$.fragment,a),n=F(a),$(i.$$.fragment,a)},m:function(a,u){l&&l.m(a,u),y(a,e,u),B(t,a,u),y(a,n,u),B(i,a,u),o=!0},p:function(a,u){a[3].totalItems==0?l||(l=tt(a),l.c(),l.m(e.parentNode,e)):l&&(l.d(1),l=null);const f={};u&32776&&(f.$$scope={dirty:u,ctx:a}),t.$set(f);const d={};u&1&&(d.page=a[0]),u&8&&(d.pages=a[3].totalPages),i.$set(d)},i:function(a){o||(b(t.$$.fragment,a),b(i.$$.fragment,a),o=!0)},o:function(a){v(t.$$.fragment,a),v(i.$$.fragment,a),o=!1},d:function(a){a&&(p(e),p(n)),l&&l.d(a),L(t,a),L(i,a)}};return g("SvelteRegisterBlock",{block:r,id:nn.name,type:"then",source:"(123:2) {:then files}",ctx:s}),r}function tt(s){let e;const t={c:function(){e=X("No files.")},l:function(i){e=Z(i,"No files.")},m:function(i,o){y(i,e,o)},d:function(i){i&&p(e)}};return g("SvelteRegisterBlock",{block:t,id:tt.name,type:"if",source:"(124:3) {#if files.totalItems == 0}",ctx:s}),t}function on(s){let e,t,n;const i={c:function(){e=P("img"),this.h()},l:function(l){e=O(l,"IMG",{slot:!0,class:!0,src:!0,alt:!0}),this.h()},h:function(){C(e,"slot","image"),C(e,"class","rounded-lg grow object-cover"),Ue(e.src,t=s[8](s[12]))||C(e,"src",t),C(e,"alt",n=s[12].file),R(e,je,130,7,2658)},m:function(l,r){y(l,e,r)},p:function(l,r){r&8&&!Ue(e.src,t=l[8](l[12]))&&C(e,"src",t),r&8&&n!==(n=l[12].file)&&C(e,"alt",n)},d:function(l){l&&p(e)}};return g("SvelteRegisterBlock",{block:i,id:on.name,type:"slot",source:"(131:7) ",ctx:s}),i}function sn(s){let e,t=s[12].name+"",n;const i={c:function(){e=P("div"),n=X(t),this.h()},l:function(l){e=O(l,"DIV",{slot:!0});var r=q(e);n=Z(r,t),r.forEach(p),this.h()},h:function(){C(e,"slot","subtitle"),R(e,je,136,7,2800)},m:function(l,r){y(l,e,r),V(e,n)},p:function(l,r){r&8&&t!==(t=l[12].name+"")&&me(n,t)},d:function(l){l&&p(e)}};return g("SvelteRegisterBlock",{block:i,id:sn.name,type:"slot",source:"(137:7) ",ctx:s}),i}function rn(s){let e,t,n;e=new Mt({props:{size:"lg",$$slots:{subtitle:[sn],image:[on]},$$scope:{ctx:s}},$$inline:!0});const i={c:function(){I(e.$$.fragment),t=D()},l:function(l){$(e.$$.fragment,l),t=F(l)},m:function(l,r){B(e,l,r),y(l,t,r),n=!0},p:function(l,r){const c={};r&32776&&(c.$$scope={dirty:r,ctx:l}),e.$set(c)},i:function(l){n||(b(e.$$.fragment,l),n=!0)},o:function(l){v(e.$$.fragment,l),n=!1},d:function(l){l&&p(t),L(e,l)}};return g("SvelteRegisterBlock",{block:i,id:rn.name,type:"slot",source:"(129:5) <Link href={pb.files.getUrl(file, file.file)}>",ctx:s}),i}function nt(s){let e,t;e=new de({props:{href:Q.files.getUrl(s[12],s[12].file),$$slots:{default:[rn]},$$scope:{ctx:s}},$$inline:!0});const n={c:function(){I(e.$$.fragment)},l:function(o){$(e.$$.fragment,o)},m:function(o,l){B(e,o,l),t=!0},p:function(o,l){const r={};l&8&&(r.href=Q.files.getUrl(o[12],o[12].file)),l&32776&&(r.$$scope={dirty:l,ctx:o}),e.$set(r)},i:function(o){t||(b(e.$$.fragment,o),t=!0)},o:function(o){v(e.$$.fragment,o),t=!1},d:function(o){L(e,o)}};return g("SvelteRegisterBlock",{block:n,id:nt.name,type:"each",source:"(128:4) {#each files.items as file}",ctx:s}),n}function ln(s){let e,t,n=Oe(s[3].items),i=[];for(let r=0;r<n.length;r+=1)i[r]=nt(yt(s,n,r));const o=r=>v(i[r],1,1,()=>{i[r]=null}),l={c:function(){for(let c=0;c<i.length;c+=1)i[c].c();e=K()},l:function(c){for(let a=0;a<i.length;a+=1)i[a].l(c);e=K()},m:function(c,a){for(let u=0;u<i.length;u+=1)i[u]&&i[u].m(c,a);y(c,e,a),t=!0},p:function(c,a){if(a&264){n=Oe(c[3].items);let u;for(u=0;u<n.length;u+=1){const f=yt(c,n,u);i[u]?(i[u].p(f,a),b(i[u],1)):(i[u]=nt(f),i[u].c(),b(i[u],1),i[u].m(e.parentNode,e))}for(x(),u=n.length;u<i.length;u+=1)o(u);ee()}},i:function(c){if(!t){for(let a=0;a<n.length;a+=1)b(i[a]);t=!0}},o:function(c){i=i.filter(Boolean);for(let a=0;a<i.length;a+=1)v(i[a]);t=!1},d:function(c){c&&p(e),kt(i,c)}};return g("SvelteRegisterBlock",{block:l,id:ln.name,type:"slot",source:"(127:3) <Grid>",ctx:s}),l}function cn(s){let e,t;e=new Ht({$$inline:!0});const n={c:function(){I(e.$$.fragment)},l:function(o){$(e.$$.fragment,o)},m:function(o,l){B(e,o,l),t=!0},p:N,i:function(o){t||(b(e.$$.fragment,o),t=!0)},o:function(o){v(e.$$.fragment,o),t=!1},d:function(o){L(e,o)}};return g("SvelteRegisterBlock",{block:n,id:cn.name,type:"pending",source:"(121:16)     <CircularProgress />   {:then files}",ctx:s}),n}function an(s){let e,t,n,i;const o=[en,xt],l=[];function r(a,u){return a[2]?0:1}e=r(s),t=l[e]=o[e](s);const c={c:function(){t.c(),n=K()},l:function(u){t.l(u),n=K()},m:function(u,f){l[e].m(u,f),y(u,n,f),i=!0},p:function(u,f){let d=e;e=r(u),e===d?l[e].p(u,f):(x(),v(l[d],1,1,()=>{l[d]=null}),ee(),t=l[e],t?t.p(u,f):(t=l[e]=o[e](u),t.c()),b(t,1),t.m(n.parentNode,n))},i:function(u){i||(b(t),i=!0)},o:function(u){v(t),i=!1},d:function(u){u&&p(n),l[e].d(u)}};return g("SvelteRegisterBlock",{block:c,id:an.name,type:"slot",source:"(119:0) <Body>",ctx:s}),c}function it(s){let e,t,n,i;e=new Ot({props:{$$slots:{end:[Zt],middle:[Yt],start:[Qt]},$$scope:{ctx:s}},$$inline:!0}),n=new Ee({props:{$$slots:{default:[an]},$$scope:{ctx:s}},$$inline:!0});const o={c:function(){I(e.$$.fragment),t=D(),I(n.$$.fragment)},l:function(r){$(e.$$.fragment,r),t=F(r),$(n.$$.fragment,r)},m:function(r,c){B(e,r,c),y(r,t,c),B(n,r,c),i=!0},p:function(r,[c]){const a={};c&32775&&(a.$$scope={dirty:c,ctx:r}),e.$set(a);const u={};c&32781&&(u.$$scope={dirty:c,ctx:r}),n.$set(u)},i:function(r){i||(b(e.$$.fragment,r),b(n.$$.fragment,r),i=!0)},o:function(r){v(e.$$.fragment,r),v(n.$$.fragment,r),i=!1},d:function(r){r&&p(t),L(e,r),L(n,r)}};return g("SvelteRegisterBlock",{block:o,id:it.name,type:"component",source:"",ctx:s}),o}function ci(s,e,t){let n,i;Be(le,"currentUser"),Le(s,le,w=>t(2,n=w)),Be(we,"fragment"),Le(s,we,w=>t(11,i=w));let{$$slots:o={},$$scope:l}=e;H("Page",o,[]);let r=null,c=1,a="";{let w=!1;const J=parseInt(i.get("page"));isNaN(J)||(c=J,w=!0);const j=i.get("filter");j&&(a=j,w=!0),w&&n&&f()}function u(w){Q.authStore.clear()}async function f(w={}){r!=null&&await r,t(3,r=Q.collection("files").getList(c,30,{sort:"-created",filter:`name~"${encodeURIComponent(a)}"`,...w}))}async function d(){t(0,c=1),await f()}async function h(w){const{detail:J}=w;t(0,c=J),await f()}function m(w){return Q.files.getUrl(w,w.file,{thumb:"96x96f"})}const T=[];Object.keys(e).forEach(w=>{!~T.indexOf(w)&&w.slice(0,2)!=="$$"&&w!=="slot"&&console.warn(`<Page> was created with unknown prop '${w}'`)});function _(w){a=w,t(1,a)}const k=()=>{t(0,c=1),f()};return s.$capture_state=()=>({onMount:pn,assets:Pt,Nav:Ot,Body:Ee,UploadButton:It,Search:Ut,Pager:Vt,Login:Gt,Grid:zt,Card:Mt,Link:de,Button:pe,CircularProgress:Ht,pb:Q,currentUser:le,fragment:we,files:r,page:c,filter:a,logout:u,loadFiles:f,search:d,changePage:h,thumbnail:m,$currentUser:n,$fragment:i}),s.$inject_state=w=>{"files"in w&&t(3,r=w.files),"page"in w&&t(0,c=w.page),"filter"in w&&t(1,a=w.filter)},e&&"$$inject"in e&&s.$inject_state(e.$$inject),s.$$.update=()=>{if(s.$$.dirty&4&&n&&f(),s.$$.dirty&3){const w=[];c!==1&&w.push(`page=${encodeURIComponent(c)}`),a&&w.push(`filter=${encodeURIComponent(a)}`),gn(we,i=w.join("&"),i)}},[c,a,n,r,u,f,d,h,m,_,k]}class di extends z{constructor(e){super(e),M(this,e,ci,it,G,{}),g("SvelteRegisterComponent",{component:this,tagName:"Page",options:e,id:it.name})}}export{di as component};
