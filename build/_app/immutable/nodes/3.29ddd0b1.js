import{s as C,n as G,h as P,f as h,i as Z,c as ae,u as le,g as ie,d as ue,b as H,k as J,e as re}from"../chunks/scheduler.59e47f41.js";import{S as L,i as O,e as K,a as m,f as d,g as v,h as y,y as b,A as N,z as j,j as q,d as k,t as w,B as Q,s as U,r as $,c as E,u as I,k as x,v as B,x as A,C as oe,w as S,m as ee,n as te,o as fe}from"../chunks/index.6bfe0adb.js";import{h as pe}from"../chunks/singletons.4d1726c8.js";import{g as z,p as ce,c as _e}from"../chunks/pocketbase.977476dd.js";const V=pe("goto");function de(a){let e,s,l,n=[{type:"text"},{class:"px-4 py-2 ring rounded-lg"},a[2]],u={};for(let t=0;t<n.length;t+=1)u=h(u,n[t]);return{c(){e=v("input"),this.h()},l(t){e=y(t,"INPUT",{type:!0,class:!0}),this.h()},h(){b(e,u)},m(t,i){m(t,e,i),e.autofocus&&e.focus(),N(e,a[0]),s||(l=j(e,"input",a[4]),s=!0)},p(t,i){b(e,u=z(n,[{type:"text"},{class:"px-4 py-2 ring rounded-lg"},i&4&&t[2]])),i&1&&e.value!==t[0]&&N(e,t[0])},d(t){t&&d(e),s=!1,l()}}}function me(a){let e,s,l,n=[{type:"password"},{class:"px-4 py-2 ring rounded-lg"},a[2]],u={};for(let t=0;t<n.length;t+=1)u=h(u,n[t]);return{c(){e=v("input"),this.h()},l(t){e=y(t,"INPUT",{type:!0,class:!0}),this.h()},h(){b(e,u)},m(t,i){m(t,e,i),e.autofocus&&e.focus(),N(e,a[0]),s||(l=j(e,"input",a[3]),s=!0)},p(t,i){b(e,u=z(n,[{type:"password"},{class:"px-4 py-2 ring rounded-lg"},i&4&&t[2]])),i&1&&e.value!==t[0]&&N(e,t[0])},d(t){t&&d(e),s=!1,l()}}}function he(a){let e;function s(u,t){return u[1]?me:de}let l=s(a),n=l(a);return{c(){n.c(),e=K()},l(u){n.l(u),e=K()},m(u,t){n.m(u,t),m(u,e,t)},p(u,[t]){l===(l=s(u))&&n?n.p(u,t):(n.d(1),n=l(u),n&&(n.c(),n.m(e.parentNode,e)))},i:G,o:G,d(u){u&&d(e),n.d(u)}}}function ge(a,e,s){const l=["password","value"];let n=P(e,l),{password:u=!1}=e,{value:t=""}=e;function i(){t=this.value,s(0,t)}function f(){t=this.value,s(0,t)}return a.$$set=p=>{e=h(h({},e),Z(p)),s(2,n=P(e,l)),"password"in p&&s(1,u=p.password),"value"in p&&s(0,t=p.value)},[t,u,n,i,f]}class X extends L{constructor(e){super(),O(this,e,ge,he,C,{password:1,value:0})}}function be(a){let e,s;const l=a[2].default,n=ae(l,a,a[1],null);let u=[{class:"btn-primary"},a[0]],t={};for(let i=0;i<u.length;i+=1)t=h(t,u[i]);return{c(){e=v("button"),n&&n.c(),this.h()},l(i){e=y(i,"BUTTON",{class:!0});var f=q(e);n&&n.l(f),f.forEach(d),this.h()},h(){b(e,t)},m(i,f){m(i,e,f),n&&n.m(e,null),e.autofocus&&e.focus(),s=!0},p(i,[f]){n&&n.p&&(!s||f&2)&&le(n,l,i,i[1],s?ue(l,i[1],f,null):ie(i[1]),null),b(e,t=z(u,[{class:"btn-primary"},f&1&&i[0]]))},i(i){s||(k(n,i),s=!0)},o(i){w(n,i),s=!1},d(i){i&&d(e),n&&n.d(i)}}}function ve(a,e,s){const l=[];let n=P(e,l),{$$slots:u={},$$scope:t}=e;return a.$$set=i=>{e=h(h({},e),Z(i)),s(0,n=P(e,l)),"$$scope"in i&&s(1,t=i.$$scope)},[n,t,u]}class ye extends L{constructor(e){super(),O(this,e,ve,be,C,{})}}function Y(a){let e,s;return{c(){e=v("span"),s=ee(a[2]),this.h()},l(l){e=y(l,"SPAN",{class:!0});var n=q(e);s=te(n,a[2]),n.forEach(d),this.h()},h(){x(e,"class","text-red-500")},m(l,n){m(l,e,n),A(e,s)},p(l,n){n&4&&fe(s,l[2])},d(l){l&&d(e)}}}function ke(a){let e;return{c(){e=ee("Login")},l(s){e=te(s,"Login")},m(s,l){m(s,e,l)},d(s){s&&d(e)}}}function we(a){let e,s,l,n,u,t,i,f,p,g,_,F,c=a[2]&&Y(a);function se(r){a[6](r)}let M={placeholder:"E-mail address..."};a[0]!==void 0&&(M.value=a[0]),l=new X({props:M}),H.push(()=>Q(l,"value",se));function ne(r){a[7](r)}let R={password:!0,placeholder:"Password..."};return a[1]!==void 0&&(R.value=a[1]),t=new X({props:R}),H.push(()=>Q(t,"value",ne)),p=new ye({props:{type:"submit",disabled:!a[0]||!a[1],$$slots:{default:[ke]},$$scope:{ctx:a}}}),{c(){c&&c.c(),e=U(),s=v("form"),$(l.$$.fragment),u=U(),$(t.$$.fragment),f=U(),$(p.$$.fragment),this.h()},l(r){c&&c.l(r),e=E(r),s=y(r,"FORM",{class:!0});var o=q(s);I(l.$$.fragment,o),u=E(o),I(t.$$.fragment,o),f=E(o),I(p.$$.fragment,o),o.forEach(d),this.h()},h(){x(s,"class","flex flex-col items-start gap-4")},m(r,o){c&&c.m(r,o),m(r,e,o),m(r,s,o),B(l,s,null),A(s,u),B(t,s,null),A(s,f),B(p,s,null),g=!0,_||(F=j(s,"submit",oe(a[3])),_=!0)},p(r,[o]){r[2]?c?c.p(r,o):(c=Y(r),c.c(),c.m(e.parentNode,e)):c&&(c.d(1),c=null);const W={};!n&&o&1&&(n=!0,W.value=r[0],J(()=>n=!1)),l.$set(W);const D={};!i&&o&2&&(i=!0,D.value=r[1],J(()=>i=!1)),t.$set(D);const T={};o&3&&(T.disabled=!r[0]||!r[1]),o&256&&(T.$$scope={dirty:o,ctx:r}),p.$set(T)},i(r){g||(k(l.$$.fragment,r),k(t.$$.fragment,r),k(p.$$.fragment,r),g=!0)},o(r){w(l.$$.fragment,r),w(t.$$.fragment,r),w(p.$$.fragment,r),g=!1},d(r){r&&(d(e),d(s)),c&&c.d(r),S(l),S(t),S(p),_=!1,F()}}}function Pe(a,e,s){let l;re(a,_e,_=>s(5,l=_));let{redirect:n="/"}=e,u="",t="",i="";async function f(){try{await ce.collection("users").authWithPassword(u,t),await V(n)}catch(_){console.error(_),s(2,i=i(400,"Incorrect login information."))}}function p(_){u=_,s(0,u)}function g(_){t=_,s(1,t)}return a.$$set=_=>{"redirect"in _&&s(4,n=_.redirect)},a.$$.update=()=>{a.$$.dirty&48&&l&&V(n)},[u,t,i,f,n,l,p,g]}class Ee extends L{constructor(e){super(),O(this,e,Pe,we,C,{redirect:4})}}export{Ee as component};
