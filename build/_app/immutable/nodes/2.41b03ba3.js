import{i as ce,f as re,h as q,j as ue,s as F,c as T,k as I,u as J,g as K,d as O,l as W,m as N,p as ae,e as fe,b as oe,n as $,q as X}from"../chunks/scheduler.c0af0a0f.js";import{p as Q,t as b,b as R,d as p,S as B,i as H,g as L,h as z,j as G,f as h,y as Y,a as g,z as ne,k,x as V,e as S,r as U,s as E,m as v,u as j,c as A,n as w,v as C,o as ie,w as D,A as me}from"../chunks/index.8a19a5c7.js";import{g as _e,p as y,c as he}from"../chunks/pocketbase.336cc0bb.js";function Z(s,e){const t=e.token={};function l(n,a,r,c){if(e.token!==t)return;e.resolved=c;let u=e.ctx;r!==void 0&&(u=u.slice(),u[r]=c);const _=n&&(e.current=n)(u);let f=!1;e.block&&(e.blocks?e.blocks.forEach((i,m)=>{m!==a&&i&&(Q(),b(i,1,1,()=>{e.blocks[m]===i&&(e.blocks[m]=null)}),R())}):e.block.d(1),_.c(),p(_,1),_.m(e.mount(),e.anchor),f=!0),e.block=_,e.blocks&&(e.blocks[a]=_),f&&ue()}if(ce(s)){const n=re();if(s.then(a=>{q(n),l(e.then,1,e.value,a),q(null)},a=>{if(q(n),l(e.catch,2,e.error,a),q(null),!e.hasCatch)throw a}),e.current!==e.pending)return l(e.pending,0),!0}else{if(e.current!==e.then)return l(e.then,1,e.value,s),!0;e.resolved=s}}function de(s,e,t){const l=e.slice(),{resolved:n}=s;s.current===s.then&&(l[s.value]=n),s.current===s.catch&&(l[s.error]=n),s.block.p(l,t)}function x(s){return(s==null?void 0:s.length)!==void 0?s:Array.from(s)}function ge(s){let e,t,l,n,a;const r=s[7].default,c=T(r,s,s[6],null);let u=[{class:t=s[2]+" "+s[1]},{href:s[0]},s[3]],_={};for(let f=0;f<u.length;f+=1)_=I(_,u[f]);return{c(){e=L("a"),c&&c.c(),this.h()},l(f){e=z(f,"A",{class:!0,href:!0});var i=G(e);c&&c.l(i),i.forEach(h),this.h()},h(){Y(e,_)},m(f,i){g(f,e,i),c&&c.m(e,null),l=!0,n||(a=ne(e,"click",s[8]),n=!0)},p(f,[i]){c&&c.p&&(!l||i&64)&&J(c,r,f,f[6],l?O(r,f[6],i,null):K(f[6]),null),Y(e,_=_e(u,[(!l||i&6&&t!==(t=f[2]+" "+f[1]))&&{class:t},(!l||i&1)&&{href:f[0]},i&8&&f[3]]))},i(f){l||(p(c,f),l=!0)},o(f){b(c,f),l=!1},d(f){f&&h(e),c&&c.d(f),n=!1,a()}}}function pe(s,e,t){let l,n;const a=["href","button","secondary"];let r=W(e,a),{$$slots:c={},$$scope:u}=e,{href:_="#"}=e,{button:f=!1}=e,{secondary:i=!1}=e;function m(o){ae.call(this,s,o)}return s.$$set=o=>{t(9,e=I(I({},e),N(o))),t(3,r=W(e,a)),"href"in o&&t(0,_=o.href),"button"in o&&t(4,f=o.button),"secondary"in o&&t(5,i=o.secondary),"$$scope"in o&&t(6,u=o.$$scope)},s.$$.update=()=>{s.$$.dirty&48&&t(2,l=f?"btn "+(i?"btn-secondary":"btn-primary"):"text-cyan-500 hover:text-cyan-700 active:text-cyan-600"),t(1,n=e.class??"")},e=N(e),[_,n,l,r,f,i,u,c,m]}class M extends B{constructor(e){super(),H(this,e,pe,ge,F,{href:0,button:4,secondary:5})}}const be=s=>({}),ee=s=>({});function ke(s){let e,t,l,n;const a=s[4].image,r=T(a,s,s[3],ee);return{c(){e=L("div"),t=L("div"),r&&r.c(),this.h()},l(c){e=z(c,"DIV",{class:!0});var u=G(e);t=z(u,"DIV",{class:!0});var _=G(t);r&&r.l(_),_.forEach(h),u.forEach(h),this.h()},h(){k(t,"class","flex grow justify-center items-center"),k(e,"class",l=s[1]+" flex flex-col p-2 rounded-lg shadow-lg "+s[0])},m(c,u){g(c,e,u),V(e,t),r&&r.m(t,null),n=!0},p(c,[u]){r&&r.p&&(!n||u&8)&&J(r,a,c,c[3],n?O(a,c[3],u,be):K(c[3]),ee),(!n||u&3&&l!==(l=c[1]+" flex flex-col p-2 rounded-lg shadow-lg "+c[0]))&&k(e,"class",l)},i(c){n||(p(r,c),n=!0)},o(c){b(r,c),n=!1},d(c){c&&h(e),r&&r.d(c)}}}function $e(s,e,t){let l,n,{$$slots:a={},$$scope:r}=e,{size:c="md"}=e;return s.$$set=u=>{t(5,e=I(I({},e),N(u))),"size"in u&&t(2,c=u.size),"$$scope"in u&&t(3,r=u.$$scope)},s.$$.update=()=>{s.$$.dirty&4&&t(1,l={sm:"w-24 h-24",md:"w-48 h-48",lg:"w-96 h-96"}[c]??"w-48 h-48"),t(0,n=e.class)},e=N(e),[n,l,c,r,a]}class ve extends B{constructor(e){super(),H(this,e,$e,ke,F,{size:2})}}function we(s){let e,t,l;const n=s[2].default,a=T(n,s,s[1],null);return{c(){e=L("div"),a&&a.c(),this.h()},l(r){e=z(r,"DIV",{class:!0});var c=G(e);a&&a.l(c),c.forEach(h),this.h()},h(){k(e,"class",t="flex flex-row flex-wrap justify-center items-start gap-4 "+s[0])},m(r,c){g(r,e,c),a&&a.m(e,null),l=!0},p(r,[c]){a&&a.p&&(!l||c&2)&&J(a,n,r,r[1],l?O(n,r[1],c,null):K(r[1]),null),(!l||c&1&&t!==(t="flex flex-row flex-wrap justify-center items-start gap-4 "+r[0]))&&k(e,"class",t)},i(r){l||(p(a,r),l=!0)},o(r){b(a,r),l=!1},d(r){r&&h(e),a&&a.d(r)}}}function ye(s,e,t){let l,{$$slots:n={},$$scope:a}=e;return s.$$set=r=>{t(3,e=I(I({},e),N(r))),"$$scope"in r&&t(1,a=r.$$scope)},s.$$.update=()=>{t(0,l=e.class)},e=N(e),[l,a,n]}class Ie extends B{constructor(e){super(),H(this,e,ye,we,F,{})}}function te(s,e,t){const l=s.slice();return l[10]=e[t],l}function Le(s){let e,t,l,n,a=s[1].username+"",r,c,u,_,f,i;e=new M({props:{button:!0,$$slots:{default:[Ne]},$$scope:{ctx:s}}}),e.$on("click",s[4]);let m={ctx:s,current:null,token:null,hasCatch:!1,pending:De,then:Ue,catch:Se,value:3,blocks:[,,,]};return Z(f=s[3],m),{c(){U(e.$$.fragment),t=E(),l=L("h2"),n=v("Greetings, "),r=v(a),c=v("."),u=E(),_=S(),m.block.c()},l(o){j(e.$$.fragment,o),t=A(o),l=z(o,"H2",{});var d=G(l);n=w(d,"Greetings, "),r=w(d,a),c=w(d,"."),d.forEach(h),u=A(o),_=S(),m.block.l(o)},m(o,d){C(e,o,d),g(o,t,d),g(o,l,d),V(l,n),V(l,r),V(l,c),g(o,u,d),g(o,_,d),m.block.m(o,m.anchor=d),m.mount=()=>_.parentNode,m.anchor=_,i=!0},p(o,d){s=o;const P={};d&8192&&(P.$$scope={dirty:d,ctx:s}),e.$set(P),(!i||d&2)&&a!==(a=s[1].username+"")&&ie(r,a),m.ctx=s,d&8&&f!==(f=s[3])&&Z(f,m)||de(m,s,d)},i(o){i||(p(e.$$.fragment,o),p(m.block),i=!0)},o(o){b(e.$$.fragment,o);for(let d=0;d<3;d+=1){const P=m.blocks[d];b(P)}i=!1},d(o){o&&(h(t),h(l),h(u),h(_)),D(e,o),m.block.d(o),m.token=null,m=null}}}function ze(s){let e,t;return e=new M({props:{button:!0,href:"/login",$$slots:{default:[Ge]},$$scope:{ctx:s}}}),{c(){U(e.$$.fragment)},l(l){j(e.$$.fragment,l)},m(l,n){C(e,l,n),t=!0},p(l,n){const a={};n&8192&&(a.$$scope={dirty:n,ctx:l}),e.$set(a)},i(l){t||(p(e.$$.fragment,l),t=!0)},o(l){b(e.$$.fragment,l),t=!1},d(l){D(e,l)}}}function Ne(s){let e;return{c(){e=v("Logout")},l(t){e=w(t,"Logout")},m(t,l){g(t,e,l)},d(t){t&&h(e)}}}function Se(s){return{c:$,l:$,m:$,p:$,i:$,o:$,d:$}}function Ue(s){let e,t,l,n,a,r=s[3].totalItems==0&&le();return t=new M({props:{button:!0,$$slots:{default:[Ee]},$$scope:{ctx:s}}}),t.$on("click",s[5]),n=new Ie({props:{$$slots:{default:[Ce]},$$scope:{ctx:s}}}),{c(){r&&r.c(),e=E(),U(t.$$.fragment),l=E(),U(n.$$.fragment)},l(c){r&&r.l(c),e=A(c),j(t.$$.fragment,c),l=A(c),j(n.$$.fragment,c)},m(c,u){r&&r.m(c,u),g(c,e,u),C(t,c,u),g(c,l,u),C(n,c,u),a=!0},p(c,u){c[3].totalItems==0?r||(r=le(),r.c(),r.m(e.parentNode,e)):r&&(r.d(1),r=null);const _={};u&8192&&(_.$$scope={dirty:u,ctx:c}),t.$set(_);const f={};u&8205&&(f.$$scope={dirty:u,ctx:c}),n.$set(f)},i(c){a||(p(t.$$.fragment,c),p(n.$$.fragment,c),a=!0)},o(c){b(t.$$.fragment,c),b(n.$$.fragment,c),a=!1},d(c){c&&(h(e),h(l)),r&&r.d(c),D(t,c),D(n,c)}}}function le(s){let e;return{c(){e=v("No files.")},l(t){e=w(t,"No files.")},m(t,l){g(t,e,l)},d(t){t&&h(e)}}}function Ee(s){let e;return{c(){e=v("Add")},l(t){e=w(t,"Add")},m(t,l){g(t,e,l)},d(t){t&&h(e)}}}function je(s){let e,t,l;return{c(){e=L("img"),this.h()},l(n){e=z(n,"IMG",{slot:!0,src:!0,alt:!0}),this.h()},h(){k(e,"slot","image"),X(e.src,t=y.files.getUrl(s[10],s[10].file,{thumb:"96x96f"}))||k(e,"src",t),k(e,"alt",l=s[10].name)},m(n,a){g(n,e,a)},p(n,a){a&8&&!X(e.src,t=y.files.getUrl(n[10],n[10].file,{thumb:"96x96f"}))&&k(e,"src",t),a&8&&l!==(l=n[10].name)&&k(e,"alt",l)},d(n){n&&h(e)}}}function Ae(s){let e,t,l;return e=new ve({props:{size:"lg",$$slots:{image:[je]},$$scope:{ctx:s}}}),{c(){U(e.$$.fragment),t=E()},l(n){j(e.$$.fragment,n),t=A(n)},m(n,a){C(e,n,a),g(n,t,a),l=!0},p(n,a){const r={};a&8200&&(r.$$scope={dirty:a,ctx:n}),e.$set(r)},i(n){l||(p(e.$$.fragment,n),l=!0)},o(n){b(e.$$.fragment,n),l=!1},d(n){n&&h(t),D(e,n)}}}function se(s){let e,t;return e=new M({props:{href:y.files.getUrl(s[10],s[10].file),$$slots:{default:[Ae]},$$scope:{ctx:s}}}),{c(){U(e.$$.fragment)},l(l){j(e.$$.fragment,l)},m(l,n){C(e,l,n),t=!0},p(l,n){const a={};n&8&&(a.href=y.files.getUrl(l[10],l[10].file)),n&8200&&(a.$$scope={dirty:n,ctx:l}),e.$set(a)},i(l){t||(p(e.$$.fragment,l),t=!0)},o(l){b(e.$$.fragment,l),t=!1},d(l){D(e,l)}}}function Ce(s){let e,t,l,n,a,r,c=x(s[3].items),u=[];for(let f=0;f<c.length;f+=1)u[f]=se(te(s,c,f));const _=f=>b(u[f],1,1,()=>{u[f]=null});return{c(){e=L("input"),t=E();for(let f=0;f<u.length;f+=1)u[f].c();l=S(),this.h()},l(f){e=z(f,"INPUT",{type:!0,class:!0}),t=A(f);for(let i=0;i<u.length;i+=1)u[i].l(f);l=S(),this.h()},h(){k(e,"type","file"),k(e,"class","hidden")},m(f,i){g(f,e,i),s[6](e),g(f,t,i);for(let m=0;m<u.length;m+=1)u[m]&&u[m].m(f,i);g(f,l,i),n=!0,a||(r=ne(e,"change",s[7]),a=!0)},p(f,i){if(i&8){c=x(f[3].items);let m;for(m=0;m<c.length;m+=1){const o=te(f,c,m);u[m]?(u[m].p(o,i),p(u[m],1)):(u[m]=se(o),u[m].c(),p(u[m],1),u[m].m(l.parentNode,l))}for(Q(),m=c.length;m<u.length;m+=1)_(m);R()}},i(f){if(!n){for(let i=0;i<c.length;i+=1)p(u[i]);n=!0}},o(f){u=u.filter(Boolean);for(let i=0;i<u.length;i+=1)b(u[i]);n=!1},d(f){f&&(h(e),h(t),h(l)),s[6](null),me(u,f),a=!1,r()}}}function De(s){let e;return{c(){e=v("Loading...")},l(t){e=w(t,"Loading...")},m(t,l){g(t,e,l)},p:$,i:$,o:$,d(t){t&&h(e)}}}function Ge(s){let e;return{c(){e=v("Login")},l(t){e=w(t,"Login")},m(t,l){g(t,e,l)},d(t){t&&h(e)}}}function Pe(s){let e,t,l,n;const a=[ze,Le],r=[];function c(u,_){return u[1]?1:0}return e=c(s),t=r[e]=a[e](s),{c(){t.c(),l=S()},l(u){t.l(u),l=S()},m(u,_){r[e].m(u,_),g(u,l,_),n=!0},p(u,[_]){let f=e;e=c(u),e===f?r[e].p(u,_):(Q(),b(r[f],1,1,()=>{r[f]=null}),R(),t=r[e],t?t.p(u,_):(t=r[e]=a[e](u),t.c()),p(t,1),t.m(l.parentNode,l))},i(u){n||(p(t),n=!0)},o(u){b(t),n=!1},d(u){u&&h(l),r[e].d(u)}}}function qe(s,e,t){let l;fe(s,he,o=>t(1,l=o));let n=null,a=null,r=null;function c(o){o.preventDefault(),y.authStore.clear()}function u(){t(3,n=y.collection("files").getList(1,30,{sort:"-created"}))}async function _(){let o=[];for(const d of r)o.push(y.collection("files").create({name:d.name,file:d,owner:l.id}));await Promise.all(o),t(0,r=null),await u()}const f=()=>a.click();function i(o){oe[o?"unshift":"push"](()=>{a=o,t(2,a)})}function m(){r=this.files,t(0,r)}return s.$$.update=()=>{s.$$.dirty&1&&r&&_(),s.$$.dirty&2&&l&&u()},[r,l,a,n,c,f,i,m]}class He extends B{constructor(e){super(),H(this,e,qe,Pe,F,{})}}export{He as component};
