import{i as le,f as ne,h as D,j as se,s as y,c as re,k as H,u as ce,g as ue,d as oe,l as K,m as ae,p as fe,e as ie,b as _e,n as w,q as O}from"../chunks/scheduler.c0af0a0f.js";import{p as M,t as $,b as T,d as k,S as x,i as ee,g as P,h as j,j as V,f as d,y as Q,a as b,z as te,e as F,r as q,s as A,m as L,u as G,c as C,n as U,v as S,x as E,o as me,w as z,k as I,A as he}from"../chunks/index.8a19a5c7.js";import{g as pe,p as N,c as de}from"../chunks/pocketbase.336cc0bb.js";function R(n,e){const t=e.token={};function l(s,c,o,p){if(e.token!==t)return;e.resolved=p;let i=e.ctx;o!==void 0&&(i=i.slice(),i[o]=p);const u=s&&(e.current=s)(i);let f=!1;e.block&&(e.blocks?e.blocks.forEach((m,a)=>{a!==c&&m&&(M(),$(m,1,1,()=>{e.blocks[a]===m&&(e.blocks[a]=null)}),T())}):e.block.d(1),u.c(),k(u,1),u.m(e.mount(),e.anchor),f=!0),e.block=u,e.blocks&&(e.blocks[c]=u),f&&se()}if(le(n)){const s=ne();if(n.then(c=>{D(s),l(e.then,1,e.value,c),D(null)},c=>{if(D(s),l(e.catch,2,e.error,c),D(null),!e.hasCatch)throw c}),e.current!==e.pending)return l(e.pending,0),!0}else{if(e.current!==e.then)return l(e.then,1,e.value,n),!0;e.resolved=n}}function be(n,e,t){const l=e.slice(),{resolved:s}=n;n.current===n.then&&(l[n.value]=s),n.current===n.catch&&(l[n.error]=s),n.block.p(l,t)}function W(n){return(n==null?void 0:n.length)!==void 0?n:Array.from(n)}function ge(n){let e,t,l,s;const c=n[5].default,o=re(c,n,n[4],null);let p=[{class:n[1]},{href:n[0]},n[2]],i={};for(let u=0;u<p.length;u+=1)i=H(i,p[u]);return{c(){e=P("a"),o&&o.c(),this.h()},l(u){e=j(u,"A",{class:!0,href:!0});var f=V(e);o&&o.l(f),f.forEach(d),this.h()},h(){Q(e,i)},m(u,f){b(u,e,f),o&&o.m(e,null),t=!0,l||(s=te(e,"click",n[6]),l=!0)},p(u,[f]){o&&o.p&&(!t||f&16)&&ce(o,c,u,u[4],t?oe(c,u[4],f,null):ue(u[4]),null),Q(e,i=pe(p,[(!t||f&2)&&{class:u[1]},(!t||f&1)&&{href:u[0]},f&4&&u[2]]))},i(u){t||(k(o,u),t=!0)},o(u){$(o,u),t=!1},d(u){u&&d(e),o&&o.d(u),l=!1,s()}}}function ke(n,e,t){let l;const s=["href","button"];let c=K(e,s),{$$slots:o={},$$scope:p}=e,{href:i="#"}=e,{button:u=!1}=e;function f(m){fe.call(this,n,m)}return n.$$set=m=>{e=H(H({},e),ae(m)),t(2,c=K(e,s)),"href"in m&&t(0,i=m.href),"button"in m&&t(3,u=m.button),"$$scope"in m&&t(4,p=m.$$scope)},n.$$.update=()=>{n.$$.dirty&8&&t(1,l=u?"btn-primary":"text-sky-500 hover:text-sky-700 active:text-sky-600")},[i,l,c,u,p,o,f]}class B extends x{constructor(e){super(),ee(this,e,ke,ge,y,{href:0,button:3})}}function X(n,e,t){const l=n.slice();return l[10]=e[t],l}function $e(n){let e,t,l,s,c=n[1].username+"",o,p,i,u,f,m;e=new B({props:{button:!0,$$slots:{default:[we]},$$scope:{ctx:n}}}),e.$on("click",n[4]);let a={ctx:n,current:null,token:null,hasCatch:!1,pending:Ce,then:Ue,catch:Le,value:3,blocks:[,,,]};return R(f=n[3],a),{c(){q(e.$$.fragment),t=A(),l=P("h2"),s=L("Greetings, "),o=L(c),p=L("."),i=A(),u=F(),a.block.c()},l(_){G(e.$$.fragment,_),t=C(_),l=j(_,"H2",{});var r=V(l);s=U(r,"Greetings, "),o=U(r,c),p=U(r,"."),r.forEach(d),i=C(_),u=F(),a.block.l(_)},m(_,r){S(e,_,r),b(_,t,r),b(_,l,r),E(l,s),E(l,o),E(l,p),b(_,i,r),b(_,u,r),a.block.m(_,a.anchor=r),a.mount=()=>u.parentNode,a.anchor=u,m=!0},p(_,r){n=_;const h={};r&8192&&(h.$$scope={dirty:r,ctx:n}),e.$set(h),(!m||r&2)&&c!==(c=n[1].username+"")&&me(o,c),a.ctx=n,r&8&&f!==(f=n[3])&&R(f,a)||be(a,n,r)},i(_){m||(k(e.$$.fragment,_),k(a.block),m=!0)},o(_){$(e.$$.fragment,_);for(let r=0;r<3;r+=1){const h=a.blocks[r];$(h)}m=!1},d(_){_&&(d(t),d(l),d(i),d(u)),z(e,_),a.block.d(_),a.token=null,a=null}}}function ve(n){let e,t;return e=new B({props:{button:!0,href:"/login",$$slots:{default:[Ee]},$$scope:{ctx:n}}}),{c(){q(e.$$.fragment)},l(l){G(e.$$.fragment,l)},m(l,s){S(e,l,s),t=!0},p(l,s){const c={};s&8192&&(c.$$scope={dirty:s,ctx:l}),e.$set(c)},i(l){t||(k(e.$$.fragment,l),t=!0)},o(l){$(e.$$.fragment,l),t=!1},d(l){z(e,l)}}}function we(n){let e;return{c(){e=L("Logout")},l(t){e=U(t,"Logout")},m(t,l){b(t,e,l)},d(t){t&&d(e)}}}function Le(n){return{c:w,l:w,m:w,p:w,i:w,o:w,d:w}}function Ue(n){let e,t,l,s,c,o,p,i,u,f=n[3].totalItems==0&&Y();t=new B({props:{button:!0,$$slots:{default:[Ie]},$$scope:{ctx:n}}}),t.$on("click",n[5]);let m=W(n[3].items),a=[];for(let r=0;r<m.length;r+=1)a[r]=Z(X(n,m,r));const _=r=>$(a[r],1,1,()=>{a[r]=null});return{c(){f&&f.c(),e=A(),q(t.$$.fragment),l=A(),s=P("div"),c=P("input"),o=A();for(let r=0;r<a.length;r+=1)a[r].c();this.h()},l(r){f&&f.l(r),e=C(r),G(t.$$.fragment,r),l=C(r),s=j(r,"DIV",{class:!0});var h=V(s);c=j(h,"INPUT",{type:!0,class:!0}),o=C(h);for(let v=0;v<a.length;v+=1)a[v].l(h);h.forEach(d),this.h()},h(){I(c,"type","file"),I(c,"class","hidden"),I(s,"class","flex flex-row flex-wrap justify-center items-start gap-4")},m(r,h){f&&f.m(r,h),b(r,e,h),S(t,r,h),b(r,l,h),b(r,s,h),E(s,c),n[6](c),E(s,o);for(let v=0;v<a.length;v+=1)a[v]&&a[v].m(s,null);p=!0,i||(u=te(c,"change",n[7]),i=!0)},p(r,h){r[3].totalItems==0?f||(f=Y(),f.c(),f.m(e.parentNode,e)):f&&(f.d(1),f=null);const v={};if(h&8192&&(v.$$scope={dirty:h,ctx:r}),t.$set(v),h&8){m=W(r[3].items);let g;for(g=0;g<m.length;g+=1){const J=X(r,m,g);a[g]?(a[g].p(J,h),k(a[g],1)):(a[g]=Z(J),a[g].c(),k(a[g],1),a[g].m(s,null))}for(M(),g=m.length;g<a.length;g+=1)_(g);T()}},i(r){if(!p){k(t.$$.fragment,r);for(let h=0;h<m.length;h+=1)k(a[h]);p=!0}},o(r){$(t.$$.fragment,r),a=a.filter(Boolean);for(let h=0;h<a.length;h+=1)$(a[h]);p=!1},d(r){r&&(d(e),d(l),d(s)),f&&f.d(r),z(t,r),n[6](null),he(a,r),i=!1,u()}}}function Y(n){let e;return{c(){e=L("No files.")},l(t){e=U(t,"No files.")},m(t,l){b(t,e,l)},d(t){t&&d(e)}}}function Ie(n){let e;return{c(){e=L("Add")},l(t){e=U(t,"Add")},m(t,l){b(t,e,l)},d(t){t&&d(e)}}}function Ne(n){let e,t,l;return{c(){e=P("img"),this.h()},l(s){e=j(s,"IMG",{src:!0,alt:!0}),this.h()},h(){O(e.src,t=N.files.getUrl(n[10],n[10].file,{thumb:"96x96f"}))||I(e,"src",t),I(e,"alt",l=n[10].name)},m(s,c){b(s,e,c)},p(s,c){c&8&&!O(e.src,t=N.files.getUrl(s[10],s[10].file,{thumb:"96x96f"}))&&I(e,"src",t),c&8&&l!==(l=s[10].name)&&I(e,"alt",l)},d(s){s&&d(e)}}}function Ae(n){let e,t,l;return e=new Card({props:{size:"lg",$$slots:{default:[Ne]},$$scope:{ctx:n}}}),{c(){q(e.$$.fragment),t=A()},l(s){G(e.$$.fragment,s),t=C(s)},m(s,c){S(e,s,c),b(s,t,c),l=!0},p(s,c){const o={};c&8200&&(o.$$scope={dirty:c,ctx:s}),e.$set(o)},i(s){l||(k(e.$$.fragment,s),l=!0)},o(s){$(e.$$.fragment,s),l=!1},d(s){s&&d(t),z(e,s)}}}function Z(n){let e,t;return e=new B({props:{href:N.files.getUrl(n[10],n[10].file),$$slots:{default:[Ae]},$$scope:{ctx:n}}}),{c(){q(e.$$.fragment)},l(l){G(e.$$.fragment,l)},m(l,s){S(e,l,s),t=!0},p(l,s){const c={};s&8&&(c.href=N.files.getUrl(l[10],l[10].file)),s&8200&&(c.$$scope={dirty:s,ctx:l}),e.$set(c)},i(l){t||(k(e.$$.fragment,l),t=!0)},o(l){$(e.$$.fragment,l),t=!1},d(l){z(e,l)}}}function Ce(n){let e;return{c(){e=L("Loading...")},l(t){e=U(t,"Loading...")},m(t,l){b(t,e,l)},p:w,i:w,o:w,d(t){t&&d(e)}}}function Ee(n){let e;return{c(){e=L("Login")},l(t){e=U(t,"Login")},m(t,l){b(t,e,l)},d(t){t&&d(e)}}}function Pe(n){let e,t,l,s;const c=[ve,$e],o=[];function p(i,u){return i[1]?1:0}return e=p(n),t=o[e]=c[e](n),{c(){t.c(),l=F()},l(i){t.l(i),l=F()},m(i,u){o[e].m(i,u),b(i,l,u),s=!0},p(i,[u]){let f=e;e=p(i),e===f?o[e].p(i,u):(M(),$(o[f],1,1,()=>{o[f]=null}),T(),t=o[e],t?t.p(i,u):(t=o[e]=c[e](i),t.c()),k(t,1),t.m(l.parentNode,l))},i(i){s||(k(t),s=!0)},o(i){$(t),s=!1},d(i){i&&d(l),o[e].d(i)}}}function je(n,e,t){let l;ie(n,de,_=>t(1,l=_));let s=null,c=null,o=null;function p(_){_.preventDefault(),N.authStore.clear()}function i(){t(3,s=N.collection("files").getList(1,30,{sort:"-created"}))}async function u(){let _=[];for(const r of o)_.push(N.collection("files").create({name:r.name,file:r,owner:l.id}));await Promise.all(_),t(0,o=null),await i()}const f=()=>c.click();function m(_){_e[_?"unshift":"push"](()=>{c=_,t(2,c)})}function a(){o=this.files,t(0,o)}return n.$$.update=()=>{n.$$.dirty&1&&o&&u(),n.$$.dirty&2&&l&&i()},[o,l,c,s,p,f,m,a]}class ze extends x{constructor(e){super(),ee(this,e,je,Pe,y,{})}}export{ze as component};
