import{i as Z,f as y,h as U,j as x,s as T,c as ee,k as E,u as te,g as le,d as ne,l as H,m as se,p as ce,e as re,n as k}from"../chunks/scheduler.e97a849c.js";import{p as w,t as g,b as B,d,S as V,i as W,g as G,h as I,j as X,f as p,y as R,a as b,z as oe,e as L,r as P,s as S,m as $,u as q,c as j,n as v,v as z,x as C,o as Y,w as D,A as ue}from"../chunks/index.86b2b028.js";import{g as ae,p as A,c as fe}from"../chunks/pocketbase.ff9970f2.js";function J(n,e){const t=e.token={};function l(s,a,r,f){if(e.token!==t)return;e.resolved=f;let c=e.ctx;r!==void 0&&(c=c.slice(),c[r]=f);const o=s&&(e.current=s)(c);let u=!1;e.block&&(e.blocks?e.blocks.forEach((i,h)=>{h!==a&&i&&(w(),g(i,1,1,()=>{e.blocks[h]===i&&(e.blocks[h]=null)}),B())}):e.block.d(1),o.c(),d(o,1),o.m(e.mount(),e.anchor),u=!0),e.block=o,e.blocks&&(e.blocks[a]=o),u&&x()}if(Z(n)){const s=y();if(n.then(a=>{U(s),l(e.then,1,e.value,a),U(null)},a=>{if(U(s),l(e.catch,2,e.error,a),U(null),!e.hasCatch)throw a}),e.current!==e.pending)return l(e.pending,0),!0}else{if(e.current!==e.then)return l(e.then,1,e.value,n),!0;e.resolved=n}}function ie(n,e,t){const l=e.slice(),{resolved:s}=n;n.current===n.then&&(l[n.value]=s),n.current===n.catch&&(l[n.error]=s),n.block.p(l,t)}function K(n){return(n==null?void 0:n.length)!==void 0?n:Array.from(n)}function _e(n){let e,t,l,s;const a=n[5].default,r=ee(a,n,n[4],null);let f=[{class:n[1]},{href:n[0]},n[2]],c={};for(let o=0;o<f.length;o+=1)c=E(c,f[o]);return{c(){e=G("a"),r&&r.c(),this.h()},l(o){e=I(o,"A",{class:!0,href:!0});var u=X(e);r&&r.l(u),u.forEach(p),this.h()},h(){R(e,c)},m(o,u){b(o,e,u),r&&r.m(e,null),t=!0,l||(s=oe(e,"click",n[6]),l=!0)},p(o,[u]){r&&r.p&&(!t||u&16)&&te(r,a,o,o[4],t?ne(a,o[4],u,null):le(o[4]),null),R(e,c=ae(f,[{class:o[1]},(!t||u&1)&&{href:o[0]},u&4&&o[2]]))},i(o){t||(d(r,o),t=!0)},o(o){g(r,o),t=!1},d(o){o&&p(e),r&&r.d(o),l=!1,s()}}}function me(n,e,t){const l=["href","button"];let s=H(e,l),{$$slots:a={},$$scope:r}=e,{href:f="#"}=e,{button:c=!1}=e;const o=c?"btn-primary":"mx-4 my-2";function u(i){ce.call(this,n,i)}return n.$$set=i=>{e=E(E({},e),se(i)),t(2,s=H(e,l)),"href"in i&&t(0,f=i.href),"button"in i&&t(3,c=i.button),"$$scope"in i&&t(4,r=i.$$scope)},[f,o,s,c,r,a,u]}class F extends V{constructor(e){super(),W(this,e,me,_e,T,{href:0,button:3})}}function M(n,e,t){const l=n.slice();return l[4]=e[t],l}function he(n){let e,t,l,s,a=n[0].username+"",r,f,c,o,u,i;e=new F({props:{button:!0,$$slots:{default:[be]},$$scope:{ctx:n}}}),e.$on("click",n[2]);let h={ctx:n,current:null,token:null,hasCatch:!1,pending:$e,then:ke,catch:de,value:1,blocks:[,,,]};return J(u=n[1],h),{c(){P(e.$$.fragment),t=S(),l=G("h2"),s=$("Greetings, "),r=$(a),f=$("."),c=S(),o=L(),h.block.c()},l(_){q(e.$$.fragment,_),t=j(_),l=I(_,"H2",{});var m=X(l);s=v(m,"Greetings, "),r=v(m,a),f=v(m,"."),m.forEach(p),c=j(_),o=L(),h.block.l(_)},m(_,m){z(e,_,m),b(_,t,m),b(_,l,m),C(l,s),C(l,r),C(l,f),b(_,c,m),b(_,o,m),h.block.m(_,h.anchor=m),h.mount=()=>o.parentNode,h.anchor=o,i=!0},p(_,m){n=_;const N={};m&128&&(N.$$scope={dirty:m,ctx:n}),e.$set(N),(!i||m&1)&&a!==(a=n[0].username+"")&&Y(r,a),h.ctx=n,m&2&&u!==(u=n[1])&&J(u,h)||ie(h,n,m)},i(_){i||(d(e.$$.fragment,_),d(h.block),i=!0)},o(_){g(e.$$.fragment,_);for(let m=0;m<3;m+=1){const N=h.blocks[m];g(N)}i=!1},d(_){_&&(p(t),p(l),p(c),p(o)),D(e,_),h.block.d(_),h.token=null,h=null}}}function pe(n){let e,t;return e=new F({props:{button:!0,href:"/login",$$slots:{default:[ve]},$$scope:{ctx:n}}}),{c(){P(e.$$.fragment)},l(l){q(e.$$.fragment,l)},m(l,s){z(e,l,s),t=!0},p(l,s){const a={};s&128&&(a.$$scope={dirty:s,ctx:l}),e.$set(a)},i(l){t||(d(e.$$.fragment,l),t=!0)},o(l){g(e.$$.fragment,l),t=!1},d(l){D(e,l)}}}function be(n){let e;return{c(){e=$("Logout")},l(t){e=v(t,"Logout")},m(t,l){b(t,e,l)},d(t){t&&p(e)}}}function de(n){return{c:k,l:k,m:k,p:k,i:k,o:k,d:k}}function ke(n){let e,t,l,s=n[1].totalItems==0&&O(),a=K(n[1].items),r=[];for(let c=0;c<a.length;c+=1)r[c]=Q(M(n,a,c));const f=c=>g(r[c],1,1,()=>{r[c]=null});return{c(){s&&s.c(),e=S();for(let c=0;c<r.length;c+=1)r[c].c();t=L()},l(c){s&&s.l(c),e=j(c);for(let o=0;o<r.length;o+=1)r[o].l(c);t=L()},m(c,o){s&&s.m(c,o),b(c,e,o);for(let u=0;u<r.length;u+=1)r[u]&&r[u].m(c,o);b(c,t,o),l=!0},p(c,o){if(c[1].totalItems==0?s||(s=O(),s.c(),s.m(e.parentNode,e)):s&&(s.d(1),s=null),o&2){a=K(c[1].items);let u;for(u=0;u<a.length;u+=1){const i=M(c,a,u);r[u]?(r[u].p(i,o),d(r[u],1)):(r[u]=Q(i),r[u].c(),d(r[u],1),r[u].m(t.parentNode,t))}for(w(),u=a.length;u<r.length;u+=1)f(u);B()}},i(c){if(!l){for(let o=0;o<a.length;o+=1)d(r[o]);l=!0}},o(c){r=r.filter(Boolean);for(let o=0;o<r.length;o+=1)g(r[o]);l=!1},d(c){c&&(p(e),p(t)),s&&s.d(c),ue(r,c)}}}function O(n){let e;return{c(){e=$("No files.")},l(t){e=v(t,"No files.")},m(t,l){b(t,e,l)},d(t){t&&p(e)}}}function ge(n){let e=n[4].name+"",t;return{c(){t=$(e)},l(l){t=v(l,e)},m(l,s){b(l,t,s)},p(l,s){s&2&&e!==(e=l[4].name+"")&&Y(t,e)},d(l){l&&p(t)}}}function Q(n){let e,t,l;return e=new F({props:{href:A.files.getUrl(n[4],n[4].file),$$slots:{default:[ge]},$$scope:{ctx:n}}}),{c(){P(e.$$.fragment),t=G("br")},l(s){q(e.$$.fragment,s),t=I(s,"BR",{})},m(s,a){z(e,s,a),b(s,t,a),l=!0},p(s,a){const r={};a&2&&(r.href=A.files.getUrl(s[4],s[4].file)),a&130&&(r.$$scope={dirty:a,ctx:s}),e.$set(r)},i(s){l||(d(e.$$.fragment,s),l=!0)},o(s){g(e.$$.fragment,s),l=!1},d(s){s&&p(t),D(e,s)}}}function $e(n){let e;return{c(){e=$("Loading...")},l(t){e=v(t,"Loading...")},m(t,l){b(t,e,l)},p:k,i:k,o:k,d(t){t&&p(e)}}}function ve(n){let e;return{c(){e=$("Login")},l(t){e=v(t,"Login")},m(t,l){b(t,e,l)},d(t){t&&p(e)}}}function Le(n){let e,t,l,s;const a=[pe,he],r=[];function f(c,o){return c[0]?1:0}return e=f(n),t=r[e]=a[e](n),{c(){t.c(),l=L()},l(c){t.l(c),l=L()},m(c,o){r[e].m(c,o),b(c,l,o),s=!0},p(c,[o]){let u=e;e=f(c),e===u?r[e].p(c,o):(w(),g(r[u],1,1,()=>{r[u]=null}),B(),t=r[e],t?t.p(c,o):(t=r[e]=a[e](c),t.c()),d(t,1),t.m(l.parentNode,l))},i(c){s||(d(t),s=!0)},o(c){g(t),s=!1},d(c){c&&p(l),r[e].d(c)}}}function Ne(n,e,t){let l;re(n,fe,f=>t(0,l=f));function s(f){f.preventDefault(),A.authStore.clear()}async function a(){return await A.collection("files").getList(1,30)}let r=null;return n.$$.update=()=>{n.$$.dirty&1&&l&&t(1,r=a())},[l,r,s]}class Ee extends V{constructor(e){super(),W(this,e,Ne,Le,T,{})}}export{Ee as component};
