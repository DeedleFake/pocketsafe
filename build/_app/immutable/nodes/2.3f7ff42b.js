import{A as ce,B as re,C as y,D as ue,s as V,r as J,E as L,f as z,g as E,h as B,d as h,F as W,i as p,G as ne,u as K,v as M,w as T,H as X,I as N,J as ae,j as $,x as F,e as S,z as oe,p as ie,a as U,l as v,c as A,m as w,n as fe,y as k,K as _e,L as Y}from"../chunks/scheduler.b9bf408d.js";import{g as O,t as b,c as Q,a as g,S as q,i as H,b as C,d as D,m as G,e as j}from"../chunks/index.726d12b8.js";import{g as me,p as I,B as R,c as he}from"../chunks/pocketbase.c391ef18.js";function Z(s,e){const t=e.token={};function l(n,a,r,c){if(e.token!==t)return;e.resolved=c;let u=e.ctx;r!==void 0&&(u=u.slice(),u[r]=c);const _=n&&(e.current=n)(u);let o=!1;e.block&&(e.blocks?e.blocks.forEach((f,i)=>{i!==a&&f&&(O(),b(f,1,1,()=>{e.blocks[i]===f&&(e.blocks[i]=null)}),Q())}):e.block.d(1),_.c(),g(_,1),_.m(e.mount(),e.anchor),o=!0),e.block=_,e.blocks&&(e.blocks[a]=_),o&&ue()}if(ce(s)){const n=re();if(s.then(a=>{y(n),l(e.then,1,e.value,a),y(null)},a=>{if(y(n),l(e.catch,2,e.error,a),y(null),!e.hasCatch)throw a}),e.current!==e.pending)return l(e.pending,0),!0}else{if(e.current!==e.then)return l(e.then,1,e.value,s),!0;e.resolved=s}}function de(s,e,t){const l=e.slice(),{resolved:n}=s;s.current===s.then&&(l[s.value]=n),s.current===s.catch&&(l[s.error]=n),s.block.p(l,t)}function x(s){return(s==null?void 0:s.length)!==void 0?s:Array.from(s)}function pe(s){let e,t,l,n,a;const r=s[3].default,c=J(r,s,s[2],null);let u=[{class:t="text-cyan-500 hover:text-cyan-600 active:text-cyan-700 "+s[0]},s[1]],_={};for(let o=0;o<u.length;o+=1)_=L(_,u[o]);return{c(){e=z("a"),c&&c.c(),this.h()},l(o){e=E(o,"A",{class:!0});var f=B(e);c&&c.l(f),f.forEach(h),this.h()},h(){W(e,_)},m(o,f){p(o,e,f),c&&c.m(e,null),l=!0,n||(a=ne(e,"click",s[4]),n=!0)},p(o,[f]){c&&c.p&&(!l||f&4)&&K(c,r,o,o[2],l?T(r,o[2],f,null):M(o[2]),null),W(e,_=me(u,[(!l||f&1&&t!==(t="text-cyan-500 hover:text-cyan-600 active:text-cyan-700 "+o[0]))&&{class:t},f&2&&o[1]]))},i(o){l||(g(c,o),l=!0)},o(o){b(c,o),l=!1},d(o){o&&h(e),c&&c.d(o),n=!1,a()}}}function ge(s,e,t){let l;const n=[];let a=X(e,n),{$$slots:r={},$$scope:c}=e;function u(_){ae.call(this,s,_)}return s.$$set=_=>{t(5,e=L(L({},e),N(_))),t(1,a=X(e,n)),"$$scope"in _&&t(2,c=_.$$scope)},s.$$.update=()=>{t(0,l=e.class??"")},e=N(e),[l,a,c,r,u]}class be extends q{constructor(e){super(),H(this,e,ge,pe,V,{})}}const $e=s=>({}),ee=s=>({});function ke(s){let e,t,l,n;const a=s[4].image,r=J(a,s,s[3],ee);return{c(){e=z("div"),t=z("div"),r&&r.c(),this.h()},l(c){e=E(c,"DIV",{class:!0});var u=B(e);t=E(u,"DIV",{class:!0});var _=B(t);r&&r.l(_),_.forEach(h),u.forEach(h),this.h()},h(){$(t,"class","flex grow justify-center items-center"),$(e,"class",l=s[1]+" flex flex-col p-2 rounded-lg shadow-lg "+s[0])},m(c,u){p(c,e,u),F(e,t),r&&r.m(t,null),n=!0},p(c,[u]){r&&r.p&&(!n||u&8)&&K(r,a,c,c[3],n?T(a,c[3],u,$e):M(c[3]),ee),(!n||u&3&&l!==(l=c[1]+" flex flex-col p-2 rounded-lg shadow-lg "+c[0]))&&$(e,"class",l)},i(c){n||(g(r,c),n=!0)},o(c){b(r,c),n=!1},d(c){c&&h(e),r&&r.d(c)}}}function ve(s,e,t){let l,n,{$$slots:a={},$$scope:r}=e,{size:c="md"}=e;return s.$$set=u=>{t(5,e=L(L({},e),N(u))),"size"in u&&t(2,c=u.size),"$$scope"in u&&t(3,r=u.$$scope)},s.$$.update=()=>{s.$$.dirty&4&&t(1,l={sm:"w-24 h-24",md:"w-48 h-48",lg:"w-96 h-96"}[c]??"w-48 h-48"),t(0,n=e.class)},e=N(e),[n,l,c,r,a]}class we extends q{constructor(e){super(),H(this,e,ve,ke,V,{size:2})}}function Ie(s){let e,t,l;const n=s[2].default,a=J(n,s,s[1],null);return{c(){e=z("div"),a&&a.c(),this.h()},l(r){e=E(r,"DIV",{class:!0});var c=B(e);a&&a.l(c),c.forEach(h),this.h()},h(){$(e,"class",t="flex flex-row flex-wrap justify-center items-start gap-4 "+s[0])},m(r,c){p(r,e,c),a&&a.m(e,null),l=!0},p(r,[c]){a&&a.p&&(!l||c&2)&&K(a,n,r,r[1],l?T(n,r[1],c,null):M(r[1]),null),(!l||c&1&&t!==(t="flex flex-row flex-wrap justify-center items-start gap-4 "+r[0]))&&$(e,"class",t)},i(r){l||(g(a,r),l=!0)},o(r){b(a,r),l=!1},d(r){r&&h(e),a&&a.d(r)}}}function Le(s,e,t){let l,{$$slots:n={},$$scope:a}=e;return s.$$set=r=>{t(3,e=L(L({},e),N(r))),"$$scope"in r&&t(1,a=r.$$scope)},s.$$.update=()=>{t(0,l=e.class)},e=N(e),[l,a,n]}class ze extends q{constructor(e){super(),H(this,e,Le,Ie,V,{})}}function te(s,e,t){const l=s.slice();return l[10]=e[t],l}function Ee(s){let e,t,l,n,a=s[1].username+"",r,c,u,_,o,f;e=new R({props:{$$slots:{default:[Se]},$$scope:{ctx:s}}}),e.$on("click",s[4]);let i={ctx:s,current:null,token:null,hasCatch:!1,pending:Be,then:Ae,catch:Ue,value:3,blocks:[,,,]};return Z(o=s[3],i),{c(){C(e.$$.fragment),t=U(),l=z("h2"),n=v("Greetings, "),r=v(a),c=v("."),u=U(),_=S(),i.block.c()},l(m){D(e.$$.fragment,m),t=A(m),l=E(m,"H2",{});var d=B(l);n=w(d,"Greetings, "),r=w(d,a),c=w(d,"."),d.forEach(h),u=A(m),_=S(),i.block.l(m)},m(m,d){G(e,m,d),p(m,t,d),p(m,l,d),F(l,n),F(l,r),F(l,c),p(m,u,d),p(m,_,d),i.block.m(m,i.anchor=d),i.mount=()=>_.parentNode,i.anchor=_,f=!0},p(m,d){s=m;const P={};d&8192&&(P.$$scope={dirty:d,ctx:s}),e.$set(P),(!f||d&2)&&a!==(a=s[1].username+"")&&fe(r,a),i.ctx=s,d&8&&o!==(o=s[3])&&Z(o,i)||de(i,s,d)},i(m){f||(g(e.$$.fragment,m),g(i.block),f=!0)},o(m){b(e.$$.fragment,m);for(let d=0;d<3;d+=1){const P=i.blocks[d];b(P)}f=!1},d(m){m&&(h(t),h(l),h(u),h(_)),j(e,m),i.block.d(m),i.token=null,i=null}}}function Ne(s){let e,t;return e=new R({props:{href:"/login",$$slots:{default:[Pe]},$$scope:{ctx:s}}}),{c(){C(e.$$.fragment)},l(l){D(e.$$.fragment,l)},m(l,n){G(e,l,n),t=!0},p(l,n){const a={};n&8192&&(a.$$scope={dirty:n,ctx:l}),e.$set(a)},i(l){t||(g(e.$$.fragment,l),t=!0)},o(l){b(e.$$.fragment,l),t=!1},d(l){j(e,l)}}}function Se(s){let e;return{c(){e=v("Logout")},l(t){e=w(t,"Logout")},m(t,l){p(t,e,l)},d(t){t&&h(e)}}}function Ue(s){return{c:k,l:k,m:k,p:k,i:k,o:k,d:k}}function Ae(s){let e,t,l,n,a,r=s[3].totalItems==0&&le();return t=new R({props:{$$slots:{default:[Ce]},$$scope:{ctx:s}}}),t.$on("click",s[5]),n=new ze({props:{$$slots:{default:[je]},$$scope:{ctx:s}}}),{c(){r&&r.c(),e=U(),C(t.$$.fragment),l=U(),C(n.$$.fragment)},l(c){r&&r.l(c),e=A(c),D(t.$$.fragment,c),l=A(c),D(n.$$.fragment,c)},m(c,u){r&&r.m(c,u),p(c,e,u),G(t,c,u),p(c,l,u),G(n,c,u),a=!0},p(c,u){c[3].totalItems==0?r||(r=le(),r.c(),r.m(e.parentNode,e)):r&&(r.d(1),r=null);const _={};u&8192&&(_.$$scope={dirty:u,ctx:c}),t.$set(_);const o={};u&8205&&(o.$$scope={dirty:u,ctx:c}),n.$set(o)},i(c){a||(g(t.$$.fragment,c),g(n.$$.fragment,c),a=!0)},o(c){b(t.$$.fragment,c),b(n.$$.fragment,c),a=!1},d(c){c&&(h(e),h(l)),r&&r.d(c),j(t,c),j(n,c)}}}function le(s){let e;return{c(){e=v("No files.")},l(t){e=w(t,"No files.")},m(t,l){p(t,e,l)},d(t){t&&h(e)}}}function Ce(s){let e;return{c(){e=v("Add")},l(t){e=w(t,"Add")},m(t,l){p(t,e,l)},d(t){t&&h(e)}}}function De(s){let e,t,l;return{c(){e=z("img"),this.h()},l(n){e=E(n,"IMG",{slot:!0,src:!0,alt:!0}),this.h()},h(){$(e,"slot","image"),Y(e.src,t=I.files.getUrl(s[10],s[10].file,{thumb:"96x96f"}))||$(e,"src",t),$(e,"alt",l=s[10].name)},m(n,a){p(n,e,a)},p(n,a){a&8&&!Y(e.src,t=I.files.getUrl(n[10],n[10].file,{thumb:"96x96f"}))&&$(e,"src",t),a&8&&l!==(l=n[10].name)&&$(e,"alt",l)},d(n){n&&h(e)}}}function Ge(s){let e,t,l;return e=new we({props:{size:"lg",$$slots:{image:[De]},$$scope:{ctx:s}}}),{c(){C(e.$$.fragment),t=U()},l(n){D(e.$$.fragment,n),t=A(n)},m(n,a){G(e,n,a),p(n,t,a),l=!0},p(n,a){const r={};a&8200&&(r.$$scope={dirty:a,ctx:n}),e.$set(r)},i(n){l||(g(e.$$.fragment,n),l=!0)},o(n){b(e.$$.fragment,n),l=!1},d(n){n&&h(t),j(e,n)}}}function se(s){let e,t;return e=new be({props:{href:I.files.getUrl(s[10],s[10].file),$$slots:{default:[Ge]},$$scope:{ctx:s}}}),{c(){C(e.$$.fragment)},l(l){D(e.$$.fragment,l)},m(l,n){G(e,l,n),t=!0},p(l,n){const a={};n&8&&(a.href=I.files.getUrl(l[10],l[10].file)),n&8200&&(a.$$scope={dirty:n,ctx:l}),e.$set(a)},i(l){t||(g(e.$$.fragment,l),t=!0)},o(l){b(e.$$.fragment,l),t=!1},d(l){j(e,l)}}}function je(s){let e,t,l,n,a,r,c=x(s[3].items),u=[];for(let o=0;o<c.length;o+=1)u[o]=se(te(s,c,o));const _=o=>b(u[o],1,1,()=>{u[o]=null});return{c(){e=z("input"),t=U();for(let o=0;o<u.length;o+=1)u[o].c();l=S(),this.h()},l(o){e=E(o,"INPUT",{type:!0,class:!0}),t=A(o);for(let f=0;f<u.length;f+=1)u[f].l(o);l=S(),this.h()},h(){$(e,"type","file"),$(e,"class","hidden")},m(o,f){p(o,e,f),s[6](e),p(o,t,f);for(let i=0;i<u.length;i+=1)u[i]&&u[i].m(o,f);p(o,l,f),n=!0,a||(r=ne(e,"change",s[7]),a=!0)},p(o,f){if(f&8){c=x(o[3].items);let i;for(i=0;i<c.length;i+=1){const m=te(o,c,i);u[i]?(u[i].p(m,f),g(u[i],1)):(u[i]=se(m),u[i].c(),g(u[i],1),u[i].m(l.parentNode,l))}for(O(),i=c.length;i<u.length;i+=1)_(i);Q()}},i(o){if(!n){for(let f=0;f<c.length;f+=1)g(u[f]);n=!0}},o(o){u=u.filter(Boolean);for(let f=0;f<u.length;f+=1)b(u[f]);n=!1},d(o){o&&(h(e),h(t),h(l)),s[6](null),_e(u,o),a=!1,r()}}}function Be(s){let e;return{c(){e=v("Loading...")},l(t){e=w(t,"Loading...")},m(t,l){p(t,e,l)},p:k,i:k,o:k,d(t){t&&h(e)}}}function Pe(s){let e;return{c(){e=v("Login")},l(t){e=w(t,"Login")},m(t,l){p(t,e,l)},d(t){t&&h(e)}}}function ye(s){let e,t,l,n;const a=[Ne,Ee],r=[];function c(u,_){return u[1]?1:0}return e=c(s),t=r[e]=a[e](s),{c(){t.c(),l=S()},l(u){t.l(u),l=S()},m(u,_){r[e].m(u,_),p(u,l,_),n=!0},p(u,[_]){let o=e;e=c(u),e===o?r[e].p(u,_):(O(),b(r[o],1,1,()=>{r[o]=null}),Q(),t=r[e],t?t.p(u,_):(t=r[e]=a[e](u),t.c()),g(t,1),t.m(l.parentNode,l))},i(u){n||(g(t),n=!0)},o(u){b(t),n=!1},d(u){u&&h(l),r[e].d(u)}}}function Fe(s,e,t){let l;oe(s,he,m=>t(1,l=m));let n=null,a=null,r=null;function c(m){m.preventDefault(),I.authStore.clear()}function u(){t(3,n=I.collection("files").getList(1,30,{sort:"-created"}))}async function _(){let m=[];for(const d of r)m.push(I.collection("files").create({name:d.name,file:d,owner:l.id}));await Promise.all(m),t(0,r=null),await u()}const o=()=>a.click();function f(m){ie[m?"unshift":"push"](()=>{a=m,t(2,a)})}function i(){r=this.files,t(0,r)}return s.$$.update=()=>{s.$$.dirty&1&&r&&_(),s.$$.dirty&2&&l&&u()},[r,l,a,n,c,o,f,i]}class Je extends q{constructor(e){super(),H(this,e,Fe,ye,V,{})}}export{Je as component};
