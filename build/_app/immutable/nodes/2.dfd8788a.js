import{A as nt,B as st,C as ue,D as it,s as V,r as Y,f as k,a as q,g as $,h as A,d as h,c as L,j as y,i as b,x as U,u as X,v as Z,w as x,E as D,F as ne,G as ie,H as re,I as be,J as te,z as ye,l as G,m as H,p as ae,e as F,y as j,K as fe,L as Qe,M as pe,N as ot,O as Ye,P as Se,n as le,Q as Te,R as rt,S as lt,T as ke}from"../chunks/scheduler.672d8adf.js";import{g as z,t as m,c as J,a as f,S as B,i as W,b as O,d as P,m as T,e as I,f as me}from"../chunks/index.57ce78f3.js";import{j as at,w as Xe,k as ct,l as ut}from"../chunks/singletons.ea836d13.js";function Ie(r,e){const t=e.token={};function n(s,i,o,l){if(e.token!==t)return;e.resolved=l;let a=e.ctx;o!==void 0&&(a=a.slice(),a[o]=l);const c=s&&(e.current=s)(a);let u=!1;e.block&&(e.blocks?e.blocks.forEach((d,p)=>{p!==i&&d&&(z(),m(d,1,1,()=>{e.blocks[p]===d&&(e.blocks[p]=null)}),J())}):e.block.d(1),c.c(),f(c,1),c.m(e.mount(),e.anchor),u=!0),e.block=c,e.blocks&&(e.blocks[i]=c),u&&it()}if(nt(r)){const s=st();if(r.then(i=>{ue(s),n(e.then,1,e.value,i),ue(null)},i=>{if(ue(s),n(e.catch,2,e.error,i),ue(null),!e.hasCatch)throw i}),e.current!==e.pending)return n(e.pending,0),!0}else{if(e.current!==e.then)return n(e.then,1,e.value,r),!0;e.resolved=r}}function dt(r,e,t){const n=e.slice(),{resolved:s}=r;r.current===r.then&&(n[r.value]=s),r.current===r.catch&&(n[r.error]=s),r.block.p(n,t)}function ge(r){return(r==null?void 0:r.length)!==void 0?r:Array.from(r)}function ve(r,e){const t={},n={},s={$$scope:1};let i=r.length;for(;i--;){const o=r[i],l=e[i];if(l){for(const a in o)a in l||(n[a]=1);for(const a in l)s[a]||(t[a]=l[a],s[a]=1);r[i]=l}else for(const a in o)s[a]=1}for(const o in n)o in t||(t[o]=void 0);return t}const ht=r=>({}),Ee=r=>({}),ft=r=>({}),Re=r=>({}),pt=r=>({}),je=r=>({});function mt(r){let e,t,n,s,i,o,l;const a=r[1].start,c=Y(a,r,r[0],je),u=r[1].middle,d=Y(u,r,r[0],Re),p=r[1].end,_=Y(p,r,r[0],Ee);return{c(){e=k("div"),t=k("div"),c&&c.c(),n=q(),s=k("div"),d&&d.c(),i=q(),o=k("div"),_&&_.c(),this.h()},l(g){e=$(g,"DIV",{class:!0});var v=A(e);t=$(v,"DIV",{class:!0});var S=A(t);c&&c.l(S),S.forEach(h),n=L(v),s=$(v,"DIV",{class:!0});var C=A(s);d&&d.l(C),C.forEach(h),i=L(v),o=$(v,"DIV",{class:!0});var Q=A(o);_&&_.l(Q),Q.forEach(h),v.forEach(h),this.h()},h(){y(t,"class","flex flex-row gap-2 items-center"),y(s,"class","flex flex-row gap-2 items-center"),y(o,"class","flex flex-row gap-2 items-center"),y(e,"class","min-h-8 p-2 flex flex-row justify-between outline outline-2 outline-slate-300 dark:outline-slate-700 ")},m(g,v){b(g,e,v),U(e,t),c&&c.m(t,null),U(e,n),U(e,s),d&&d.m(s,null),U(e,i),U(e,o),_&&_.m(o,null),l=!0},p(g,[v]){c&&c.p&&(!l||v&1)&&X(c,a,g,g[0],l?x(a,g[0],v,pt):Z(g[0]),je),d&&d.p&&(!l||v&1)&&X(d,u,g,g[0],l?x(u,g[0],v,ft):Z(g[0]),Re),_&&_.p&&(!l||v&1)&&X(_,p,g,g[0],l?x(p,g[0],v,ht):Z(g[0]),Ee)},i(g){l||(f(c,g),f(d,g),f(_,g),l=!0)},o(g){m(c,g),m(d,g),m(_,g),l=!1},d(g){g&&h(e),c&&c.d(g),d&&d.d(g),_&&_.d(g)}}}function gt(r,e,t){let{$$slots:n={},$$scope:s}=e;return r.$$set=i=>{"$$scope"in i&&t(0,s=i.$$scope)},[s,n]}class bt extends B{constructor(e){super(),W(this,e,gt,mt,V,{})}}function vt(r){let e,t;const n=r[1].default,s=Y(n,r,r[0],null);return{c(){e=k("div"),s&&s.c(),this.h()},l(i){e=$(i,"DIV",{class:!0});var o=A(e);s&&s.l(o),o.forEach(h),this.h()},h(){y(e,"class","flex flex-col grow justify-center items-center gap-2")},m(i,o){b(i,e,o),s&&s.m(e,null),t=!0},p(i,[o]){s&&s.p&&(!t||o&1)&&X(s,n,i,i[0],t?x(n,i[0],o,null):Z(i[0]),null)},i(i){t||(f(s,i),t=!0)},o(i){m(s,i),t=!1},d(i){i&&h(e),s&&s.d(i)}}}function _t(r,e,t){let{$$slots:n={},$$scope:s}=e;return r.$$set=i=>{"$$scope"in i&&t(0,s=i.$$scope)},[s,n]}class Ze extends B{constructor(e){super(),W(this,e,_t,vt,V,{})}}const wt=at("goto");function yt(r){let e,t,n,s,i;const o=r[7].default,l=Y(o,r,r[6],null);let a=[{class:t="px-2 border-4 rounded-2xl text-white transition-all "+r[1]+" "+r[0]},r[3]],c={};for(let u=0;u<a.length;u+=1)c=D(c,a[u]);return{c(){e=k("button"),l&&l.c(),this.h()},l(u){e=$(u,"BUTTON",{class:!0});var d=A(e);l&&l.l(d),d.forEach(h),this.h()},h(){ne(e,c)},m(u,d){b(u,e,d),l&&l.m(e,null),e.autofocus&&e.focus(),n=!0,s||(i=ie(e,"click",r[2]),s=!0)},p(u,[d]){l&&l.p&&(!n||d&64)&&X(l,o,u,u[6],n?x(o,u[6],d,null):Z(u[6]),null),ne(e,c=ve(a,[(!n||d&3&&t!==(t="px-2 border-4 rounded-2xl text-white transition-all "+u[1]+" "+u[0]))&&{class:t},d&8&&u[3]]))},i(u){n||(f(l,u),n=!0)},o(u){m(l,u),n=!1},d(u){u&&h(e),l&&l.d(u),s=!1,i()}}}function kt(r,e,t){let n,s;const i=["href","secondary"];let o=re(e,i),{$$slots:l={},$$scope:a}=e,{href:c=null}=e,{secondary:u=!1}=e;const d=be();async function p(_){d("click",_,{cancelable:!0})&&c&&await wt(c)}return r.$$set=_=>{t(9,e=D(D({},e),te(_))),t(3,o=re(e,i)),"href"in _&&t(4,c=_.href),"secondary"in _&&t(5,u=_.secondary),"$$scope"in _&&t(6,a=_.$$scope)},r.$$.update=()=>{r.$$.dirty&32&&t(1,n=u?`
			bg-teal-500
			border-teal-400
			hover:bg-teal-600
			hover:border-teal-500
			active:bg-teal-700
			active:border-teal-600
			disabled:bg-teal-200
			disabled:text-teal-700
			disabled:border-teal-300
			`:`
			bg-cyan-500
			border-cyan-400
			hover:bg-cyan-600
			hover:border-cyan-500
			active:bg-cyan-700
			active:border-cyan-600
			disabled:bg-cyan-200
			disabled:text-cyan-700
			disabled:border-cyan-300
			`),t(0,s=e.class??"")},e=te(e),[s,n,p,o,c,u,a,l]}class Ce extends B{constructor(e){super(),W(this,e,kt,yt,V,{href:4,secondary:5})}}function E(r,e,t,n){return new(t||(t=Promise))(function(s,i){function o(c){try{a(n.next(c))}catch(u){i(u)}}function l(c){try{a(n.throw(c))}catch(u){i(u)}}function a(c){c.done?s(c.value):function(d){return d instanceof t?d:new t(function(p){p(d)})}(c.value).then(o,l)}a((n=n.apply(r,e||[])).next())})}class M extends Error{constructor(e){var t,n,s,i;super("ClientResponseError"),this.url="",this.status=0,this.response={},this.isAbort=!1,this.originalError=null,Object.setPrototypeOf(this,M.prototype),e!==null&&typeof e=="object"&&(this.url=typeof e.url=="string"?e.url:"",this.status=typeof e.status=="number"?e.status:0,this.isAbort=!!e.isAbort,this.originalError=e.originalError,e.response!==null&&typeof e.response=="object"?this.response=e.response:e.data!==null&&typeof e.data=="object"?this.response=e.data:this.response={}),this.originalError||e instanceof M||(this.originalError=e),typeof DOMException<"u"&&e instanceof DOMException&&(this.isAbort=!0),this.name="ClientResponseError "+this.status,this.message=(t=this.response)===null||t===void 0?void 0:t.message,this.message||(this.isAbort?this.message="The request was autocancelled. You can find more info in https://github.com/pocketbase/js-sdk#auto-cancellation.":!((i=(s=(n=this.originalError)===null||n===void 0?void 0:n.cause)===null||s===void 0?void 0:s.message)===null||i===void 0)&&i.includes("ECONNREFUSED ::1")?this.message="Failed to connect to the PocketBase server. Try changing the SDK URL from localhost to 127.0.0.1 (https://github.com/pocketbase/js-sdk/issues/21).":this.message="Something went wrong while processing your request.")}get data(){return this.response}toJSON(){return Object.assign({},this)}}const de=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/;function $t(r,e){const t={};if(typeof r!="string")return t;const n=Object.assign({},e||{}).decode||St;let s=0;for(;s<r.length;){const i=r.indexOf("=",s);if(i===-1)break;let o=r.indexOf(";",s);if(o===-1)o=r.length;else if(o<i){s=r.lastIndexOf(";",i-1)+1;continue}const l=r.slice(s,i).trim();if(t[l]===void 0){let a=r.slice(i+1,o).trim();a.charCodeAt(0)===34&&(a=a.slice(1,-1));try{t[l]=n(a)}catch{t[l]=a}}s=o+1}return t}function Ae(r,e,t){const n=Object.assign({},t||{}),s=n.encode||Ct;if(!de.test(r))throw new TypeError("argument name is invalid");const i=s(e);if(i&&!de.test(i))throw new TypeError("argument val is invalid");let o=r+"="+i;if(n.maxAge!=null){const l=n.maxAge-0;if(isNaN(l)||!isFinite(l))throw new TypeError("option maxAge is invalid");o+="; Max-Age="+Math.floor(l)}if(n.domain){if(!de.test(n.domain))throw new TypeError("option domain is invalid");o+="; Domain="+n.domain}if(n.path){if(!de.test(n.path))throw new TypeError("option path is invalid");o+="; Path="+n.path}if(n.expires){if(!function(a){return Object.prototype.toString.call(a)==="[object Date]"||a instanceof Date}(n.expires)||isNaN(n.expires.valueOf()))throw new TypeError("option expires is invalid");o+="; Expires="+n.expires.toUTCString()}if(n.httpOnly&&(o+="; HttpOnly"),n.secure&&(o+="; Secure"),n.priority)switch(typeof n.priority=="string"?n.priority.toLowerCase():n.priority){case"low":o+="; Priority=Low";break;case"medium":o+="; Priority=Medium";break;case"high":o+="; Priority=High";break;default:throw new TypeError("option priority is invalid")}if(n.sameSite)switch(typeof n.sameSite=="string"?n.sameSite.toLowerCase():n.sameSite){case!0:o+="; SameSite=Strict";break;case"lax":o+="; SameSite=Lax";break;case"strict":o+="; SameSite=Strict";break;case"none":o+="; SameSite=None";break;default:throw new TypeError("option sameSite is invalid")}return o}function St(r){return r.indexOf("%")!==-1?decodeURIComponent(r):r}function Ct(r){return encodeURIComponent(r)}let xe;function he(r){if(r)try{const e=decodeURIComponent(xe(r.split(".")[1]).split("").map(function(t){return"%"+("00"+t.charCodeAt(0).toString(16)).slice(-2)}).join(""));return JSON.parse(e)||{}}catch{}return{}}function et(r,e=0){let t=he(r);return!(Object.keys(t).length>0&&(!t.exp||t.exp-e>Date.now()/1e3))}xe=typeof atob=="function"?atob:r=>{let e=String(r).replace(/=+$/,"");if(e.length%4==1)throw new Error("'atob' failed: The string to be decoded is not correctly encoded.");for(var t,n,s=0,i=0,o="";n=e.charAt(i++);~n&&(t=s%4?64*t+n:n,s++%4)?o+=String.fromCharCode(255&t>>(-2*s&6)):0)n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(n);return o};const qe="pb_auth";class Ot{constructor(){this.baseToken="",this.baseModel=null,this._onChangeCallbacks=[]}get token(){return this.baseToken}get model(){return this.baseModel}get isValid(){return!et(this.token)}get isAdmin(){return he(this.token).type==="admin"}get isAuthRecord(){return he(this.token).type==="authRecord"}save(e,t){this.baseToken=e||"",this.baseModel=t||null,this.triggerChange()}clear(){this.baseToken="",this.baseModel=null,this.triggerChange()}loadFromCookie(e,t=qe){const n=$t(e||"")[t]||"";let s={};try{s=JSON.parse(n),(typeof s===null||typeof s!="object"||Array.isArray(s))&&(s={})}catch{}this.save(s.token||"",s.model||null)}exportToCookie(e,t=qe){var n,s;const i={secure:!0,sameSite:!0,httpOnly:!0,path:"/"},o=he(this.token);o!=null&&o.exp?i.expires=new Date(1e3*o.exp):i.expires=new Date("1970-01-01"),e=Object.assign({},i,e);const l={token:this.token,model:this.model?JSON.parse(JSON.stringify(this.model)):null};let a=Ae(t,JSON.stringify(l),e);const c=typeof Blob<"u"?new Blob([a]).size:a.length;if(l.model&&c>4096){l.model={id:(n=l==null?void 0:l.model)===null||n===void 0?void 0:n.id,email:(s=l==null?void 0:l.model)===null||s===void 0?void 0:s.email};const u=["collectionId","username","verified"];for(const d in this.model)u.includes(d)&&(l.model[d]=this.model[d]);a=Ae(t,JSON.stringify(l),e)}return a}onChange(e,t=!1){return this._onChangeCallbacks.push(e),t&&e(this.token,this.model),()=>{for(let n=this._onChangeCallbacks.length-1;n>=0;n--)if(this._onChangeCallbacks[n]==e)return delete this._onChangeCallbacks[n],void this._onChangeCallbacks.splice(n,1)}}triggerChange(){for(const e of this._onChangeCallbacks)e&&e(this.token,this.model)}}class Pt extends Ot{constructor(e="pocketbase_auth"){super(),this.storageFallback={},this.storageKey=e,this._bindStorageEvent()}get token(){return(this._storageGet(this.storageKey)||{}).token||""}get model(){return(this._storageGet(this.storageKey)||{}).model||null}save(e,t){this._storageSet(this.storageKey,{token:e,model:t}),super.save(e,t)}clear(){this._storageRemove(this.storageKey),super.clear()}_storageGet(e){if(typeof window<"u"&&(window!=null&&window.localStorage)){const t=window.localStorage.getItem(e)||"";try{return JSON.parse(t)}catch{return t}}return this.storageFallback[e]}_storageSet(e,t){if(typeof window<"u"&&(window!=null&&window.localStorage)){let n=t;typeof t!="string"&&(n=JSON.stringify(t)),window.localStorage.setItem(e,n)}else this.storageFallback[e]=t}_storageRemove(e){var t;typeof window<"u"&&(window!=null&&window.localStorage)&&((t=window.localStorage)===null||t===void 0||t.removeItem(e)),delete this.storageFallback[e]}_bindStorageEvent(){typeof window<"u"&&(window!=null&&window.localStorage)&&window.addEventListener&&window.addEventListener("storage",e=>{if(e.key!=this.storageKey)return;const t=this._storageGet(this.storageKey)||{};super.save(t.token||"",t.model||null)})}}class oe{constructor(e){this.client=e}}class Tt extends oe{getAll(e){return e=Object.assign({method:"GET"},e),this.client.send("/api/settings",e)}update(e,t){return t=Object.assign({method:"PATCH",body:e},t),this.client.send("/api/settings",t)}testS3(e="storage",t){return t=Object.assign({method:"POST",body:{filesystem:e}},t),this.client.send("/api/settings/test/s3",t).then(()=>!0)}testEmail(e,t,n){return n=Object.assign({method:"POST",body:{email:e,template:t}},n),this.client.send("/api/settings/test/email",n).then(()=>!0)}generateAppleClientSecret(e,t,n,s,i,o){return o=Object.assign({method:"POST",body:{clientId:e,teamId:t,keyId:n,privateKey:s,duration:i}},o),this.client.send("/api/settings/apple/generate-client-secret",o)}}class Oe extends oe{decode(e){return e}getFullList(e,t){if(typeof e=="number")return this._getFullList(e,t);let n=500;return(t=Object.assign({},e,t)).batch&&(n=t.batch,delete t.batch),this._getFullList(n,t)}getList(e=1,t=30,n){return(n=Object.assign({method:"GET"},n)).query=Object.assign({page:e,perPage:t},n.query),this.client.send(this.baseCrudPath,n).then(s=>{var i;return s.items=((i=s.items)===null||i===void 0?void 0:i.map(o=>this.decode(o)))||[],s})}getFirstListItem(e,t){return(t=Object.assign({requestKey:"one_by_filter_"+this.baseCrudPath+"_"+e},t)).query=Object.assign({filter:e,skipTotal:1},t.query),this.getList(1,1,t).then(n=>{var s;if(!(!((s=n==null?void 0:n.items)===null||s===void 0)&&s.length))throw new M({status:404,data:{code:404,message:"The requested resource wasn't found.",data:{}}});return n.items[0]})}getOne(e,t){return t=Object.assign({method:"GET"},t),this.client.send(this.baseCrudPath+"/"+encodeURIComponent(e),t).then(n=>this.decode(n))}create(e,t){return t=Object.assign({method:"POST",body:e},t),this.client.send(this.baseCrudPath,t).then(n=>this.decode(n))}update(e,t,n){return n=Object.assign({method:"PATCH",body:t},n),this.client.send(this.baseCrudPath+"/"+encodeURIComponent(e),n).then(s=>this.decode(s))}delete(e,t){return t=Object.assign({method:"DELETE"},t),this.client.send(this.baseCrudPath+"/"+encodeURIComponent(e),t).then(()=>!0)}_getFullList(e=500,t){(t=t||{}).query=Object.assign({skipTotal:1},t.query);let n=[],s=i=>E(this,void 0,void 0,function*(){return this.getList(i,e||500,t).then(o=>{const l=o.items;return n=n.concat(l),l.length==o.perPage?s(i+1):n})});return s(1)}}function K(r,e,t,n){const s=n!==void 0;return s||t!==void 0?s?(console.warn(r),e.body=Object.assign({},e.body,t),e.query=Object.assign({},e.query,n),e):Object.assign(e,t):e}function we(r){var e,t;(t=(e=r)._resetAutoRefresh)===null||t===void 0||t.call(e)}class It extends Oe{get baseCrudPath(){return"/api/admins"}update(e,t,n){return super.update(e,t,n).then(s=>{var i,o;return((i=this.client.authStore.model)===null||i===void 0?void 0:i.id)===s.id&&((o=this.client.authStore.model)===null||o===void 0?void 0:o.collectionId)===void 0&&this.client.authStore.save(this.client.authStore.token,s),s})}delete(e,t){return super.delete(e,t).then(n=>{var s,i;return n&&((s=this.client.authStore.model)===null||s===void 0?void 0:s.id)===e&&((i=this.client.authStore.model)===null||i===void 0?void 0:i.collectionId)===void 0&&this.client.authStore.clear(),n})}authResponse(e){const t=this.decode((e==null?void 0:e.admin)||{});return e!=null&&e.token&&(e!=null&&e.admin)&&this.client.authStore.save(e.token,t),Object.assign({},e,{token:(e==null?void 0:e.token)||"",admin:t})}authWithPassword(e,t,n,s){return E(this,void 0,void 0,function*(){let i={method:"POST",body:{identity:e,password:t}};i=K("This form of authWithPassword(email, pass, body?, query?) is deprecated. Consider replacing it with authWithPassword(email, pass, options?).",i,n,s);const o=i.autoRefreshThreshold;delete i.autoRefreshThreshold,i.autoRefresh||we(this.client);let l=yield this.client.send(this.baseCrudPath+"/auth-with-password",i);return l=this.authResponse(l),o&&function(c,u,d,p){we(c);const _=c.beforeSend,g=c.authStore.model,v=c.authStore.onChange((S,C)=>{(!S||(C==null?void 0:C.id)!=(g==null?void 0:g.id)||(C!=null&&C.collectionId||g!=null&&g.collectionId)&&(C==null?void 0:C.collectionId)!=(g==null?void 0:g.collectionId))&&we(c)});c._resetAutoRefresh=function(){v(),c.beforeSend=_,delete c._resetAutoRefresh},c.beforeSend=(S,C)=>E(this,void 0,void 0,function*(){var Q;const w=c.authStore.token;if(!((Q=C.query)===null||Q===void 0)&&Q.autoRefresh)return _?_(S,C):{url:S,sendOptions:C};let R=c.authStore.isValid;if(R&&et(c.authStore.token,u))try{yield d()}catch{R=!1}R||(yield p());const N=C.headers||{};for(let se in N)if(se.toLowerCase()=="authorization"&&w==N[se]&&c.authStore.token){N[se]=c.authStore.token;break}return C.headers=N,_?_(S,C):{url:S,sendOptions:C}})}(this.client,o,()=>this.authRefresh({autoRefresh:!0}),()=>this.authWithPassword(e,t,Object.assign({autoRefresh:!0},i))),l})}authRefresh(e,t){let n={method:"POST"};return n=K("This form of authRefresh(body?, query?) is deprecated. Consider replacing it with authRefresh(options?).",n,e,t),this.client.send(this.baseCrudPath+"/auth-refresh",n).then(this.authResponse.bind(this))}requestPasswordReset(e,t,n){let s={method:"POST",body:{email:e}};return s=K("This form of requestPasswordReset(email, body?, query?) is deprecated. Consider replacing it with requestPasswordReset(email, options?).",s,t,n),this.client.send(this.baseCrudPath+"/request-password-reset",s).then(()=>!0)}confirmPasswordReset(e,t,n,s,i){let o={method:"POST",body:{token:e,password:t,passwordConfirm:n}};return o=K("This form of confirmPasswordReset(resetToken, password, passwordConfirm, body?, query?) is deprecated. Consider replacing it with confirmPasswordReset(resetToken, password, passwordConfirm, options?).",o,s,i),this.client.send(this.baseCrudPath+"/confirm-password-reset",o).then(()=>!0)}}class tt extends oe{constructor(){super(...arguments),this.clientId="",this.eventSource=null,this.subscriptions={},this.lastSentTopics=[],this.maxConnectTimeout=15e3,this.reconnectAttempts=0,this.maxReconnectAttempts=1/0,this.predefinedReconnectIntervals=[200,300,500,1e3,1200,1500,2e3],this.pendingConnects=[]}get isConnected(){return!!this.eventSource&&!!this.clientId&&!this.pendingConnects.length}subscribe(e,t){var n;return E(this,void 0,void 0,function*(){if(!e)throw new Error("topic must be set.");const s=function(i){const o=i;let l;try{l=JSON.parse(o==null?void 0:o.data)}catch{}t(l||{})};return this.subscriptions[e]||(this.subscriptions[e]=[]),this.subscriptions[e].push(s),this.isConnected?this.subscriptions[e].length===1?yield this.submitSubscriptions():(n=this.eventSource)===null||n===void 0||n.addEventListener(e,s):yield this.connect(),()=>E(this,void 0,void 0,function*(){return this.unsubscribeByTopicAndListener(e,s)})})}unsubscribe(e){var t;return E(this,void 0,void 0,function*(){if(this.hasSubscriptionListeners(e)){if(e){for(let n of this.subscriptions[e])(t=this.eventSource)===null||t===void 0||t.removeEventListener(e,n);delete this.subscriptions[e]}else this.subscriptions={};this.hasSubscriptionListeners()?this.hasSubscriptionListeners(e)||(yield this.submitSubscriptions()):this.disconnect()}})}unsubscribeByPrefix(e){var t;return E(this,void 0,void 0,function*(){let n=!1;for(let s in this.subscriptions)if(s.startsWith(e)){n=!0;for(let i of this.subscriptions[s])(t=this.eventSource)===null||t===void 0||t.removeEventListener(s,i);delete this.subscriptions[s]}n&&(this.hasSubscriptionListeners()?yield this.submitSubscriptions():this.disconnect())})}unsubscribeByTopicAndListener(e,t){var n;return E(this,void 0,void 0,function*(){if(!Array.isArray(this.subscriptions[e])||!this.subscriptions[e].length)return;let s=!1;for(let i=this.subscriptions[e].length-1;i>=0;i--)this.subscriptions[e][i]===t&&(s=!0,delete this.subscriptions[e][i],this.subscriptions[e].splice(i,1),(n=this.eventSource)===null||n===void 0||n.removeEventListener(e,t));s&&(this.subscriptions[e].length||delete this.subscriptions[e],this.hasSubscriptionListeners()?this.hasSubscriptionListeners(e)||(yield this.submitSubscriptions()):this.disconnect())})}hasSubscriptionListeners(e){var t,n;if(this.subscriptions=this.subscriptions||{},e)return!!(!((t=this.subscriptions[e])===null||t===void 0)&&t.length);for(let s in this.subscriptions)if(!((n=this.subscriptions[s])===null||n===void 0)&&n.length)return!0;return!1}submitSubscriptions(){return E(this,void 0,void 0,function*(){if(this.clientId)return this.addAllSubscriptionListeners(),this.lastSentTopics=this.getNonEmptySubscriptionTopics(),this.client.send("/api/realtime",{method:"POST",body:{clientId:this.clientId,subscriptions:this.lastSentTopics},query:{requestKey:this.getSubscriptionsCancelKey()}}).catch(e=>{if(!(e!=null&&e.isAbort))throw e})})}getSubscriptionsCancelKey(){return"realtime_"+this.clientId}getNonEmptySubscriptionTopics(){const e=[];for(let t in this.subscriptions)this.subscriptions[t].length&&e.push(t);return e}addAllSubscriptionListeners(){if(this.eventSource){this.removeAllSubscriptionListeners();for(let e in this.subscriptions)for(let t of this.subscriptions[e])this.eventSource.addEventListener(e,t)}}removeAllSubscriptionListeners(){if(this.eventSource)for(let e in this.subscriptions)for(let t of this.subscriptions[e])this.eventSource.removeEventListener(e,t)}connect(){return E(this,void 0,void 0,function*(){if(!(this.reconnectAttempts>0))return new Promise((e,t)=>{this.pendingConnects.push({resolve:e,reject:t}),this.pendingConnects.length>1||this.initConnect()})})}initConnect(){this.disconnect(!0),clearTimeout(this.connectTimeoutId),this.connectTimeoutId=setTimeout(()=>{this.connectErrorHandler(new Error("EventSource connect took too long."))},this.maxConnectTimeout),this.eventSource=new EventSource(this.client.buildUrl("/api/realtime")),this.eventSource.onerror=e=>{this.connectErrorHandler(new Error("Failed to establish realtime connection."))},this.eventSource.addEventListener("PB_CONNECT",e=>{const t=e;this.clientId=t==null?void 0:t.lastEventId,this.submitSubscriptions().then(()=>E(this,void 0,void 0,function*(){let n=3;for(;this.hasUnsentSubscriptions()&&n>0;)n--,yield this.submitSubscriptions()})).then(()=>{for(let n of this.pendingConnects)n.resolve();this.pendingConnects=[],this.reconnectAttempts=0,clearTimeout(this.reconnectTimeoutId),clearTimeout(this.connectTimeoutId)}).catch(n=>{this.clientId="",this.connectErrorHandler(n)})})}hasUnsentSubscriptions(){const e=this.getNonEmptySubscriptionTopics();if(e.length!=this.lastSentTopics.length)return!0;for(const t of e)if(!this.lastSentTopics.includes(t))return!0;return!1}connectErrorHandler(e){if(clearTimeout(this.connectTimeoutId),clearTimeout(this.reconnectTimeoutId),!this.clientId&&!this.reconnectAttempts||this.reconnectAttempts>this.maxReconnectAttempts){for(let n of this.pendingConnects)n.reject(new M(e));return this.pendingConnects=[],void this.disconnect()}this.disconnect(!0);const t=this.predefinedReconnectIntervals[this.reconnectAttempts]||this.predefinedReconnectIntervals[this.predefinedReconnectIntervals.length-1];this.reconnectAttempts++,this.reconnectTimeoutId=setTimeout(()=>{this.initConnect()},t)}disconnect(e=!1){var t;if(clearTimeout(this.connectTimeoutId),clearTimeout(this.reconnectTimeoutId),this.removeAllSubscriptionListeners(),this.client.cancelRequest(this.getSubscriptionsCancelKey()),(t=this.eventSource)===null||t===void 0||t.close(),this.eventSource=null,this.clientId="",!e){this.reconnectAttempts=0;for(let n of this.pendingConnects)n.resolve();this.pendingConnects=[]}}}class Et extends Oe{constructor(e,t){super(e),this.collectionIdOrName=t}get baseCrudPath(){return this.baseCollectionPath+"/records"}get baseCollectionPath(){return"/api/collections/"+encodeURIComponent(this.collectionIdOrName)}subscribeOne(e,t){return E(this,void 0,void 0,function*(){return console.warn("PocketBase: subscribeOne(recordId, callback) is deprecated. Please replace it with subscribe(recordId, callback)."),this.client.realtime.subscribe(this.collectionIdOrName+"/"+e,t)})}subscribe(e,t){return E(this,void 0,void 0,function*(){if(typeof e=="function")return console.warn("PocketBase: subscribe(callback) is deprecated. Please replace it with subscribe('*', callback)."),this.client.realtime.subscribe(this.collectionIdOrName,e);if(!t)throw new Error("Missing subscription callback.");if(e==="")throw new Error("Missing topic.");let n=this.collectionIdOrName;return e!=="*"&&(n+="/"+e),this.client.realtime.subscribe(n,t)})}unsubscribe(e){return E(this,void 0,void 0,function*(){return e==="*"?this.client.realtime.unsubscribe(this.collectionIdOrName):e?this.client.realtime.unsubscribe(this.collectionIdOrName+"/"+e):this.client.realtime.unsubscribeByPrefix(this.collectionIdOrName)})}getFullList(e,t){if(typeof e=="number")return super.getFullList(e,t);const n=Object.assign({},e,t);return super.getFullList(n)}getList(e=1,t=30,n){return super.getList(e,t,n)}getFirstListItem(e,t){return super.getFirstListItem(e,t)}getOne(e,t){return super.getOne(e,t)}create(e,t){return super.create(e,t)}update(e,t,n){return super.update(e,t,n).then(s=>{var i,o,l;return((i=this.client.authStore.model)===null||i===void 0?void 0:i.id)!==(s==null?void 0:s.id)||((o=this.client.authStore.model)===null||o===void 0?void 0:o.collectionId)!==this.collectionIdOrName&&((l=this.client.authStore.model)===null||l===void 0?void 0:l.collectionName)!==this.collectionIdOrName||this.client.authStore.save(this.client.authStore.token,s),s})}delete(e,t){return super.delete(e,t).then(n=>{var s,i,o;return!n||((s=this.client.authStore.model)===null||s===void 0?void 0:s.id)!==e||((i=this.client.authStore.model)===null||i===void 0?void 0:i.collectionId)!==this.collectionIdOrName&&((o=this.client.authStore.model)===null||o===void 0?void 0:o.collectionName)!==this.collectionIdOrName||this.client.authStore.clear(),n})}authResponse(e){const t=this.decode((e==null?void 0:e.record)||{});return this.client.authStore.save(e==null?void 0:e.token,t),Object.assign({},e,{token:(e==null?void 0:e.token)||"",record:t})}listAuthMethods(e){return e=Object.assign({method:"GET"},e),this.client.send(this.baseCollectionPath+"/auth-methods",e).then(t=>Object.assign({},t,{usernamePassword:!!(t!=null&&t.usernamePassword),emailPassword:!!(t!=null&&t.emailPassword),authProviders:Array.isArray(t==null?void 0:t.authProviders)?t==null?void 0:t.authProviders:[]}))}authWithPassword(e,t,n,s){let i={method:"POST",body:{identity:e,password:t}};return i=K("This form of authWithPassword(usernameOrEmail, pass, body?, query?) is deprecated. Consider replacing it with authWithPassword(usernameOrEmail, pass, options?).",i,n,s),this.client.send(this.baseCollectionPath+"/auth-with-password",i).then(o=>this.authResponse(o))}authWithOAuth2Code(e,t,n,s,i,o,l){let a={method:"POST",body:{provider:e,code:t,codeVerifier:n,redirectUrl:s,createData:i}};return a=K("This form of authWithOAuth2Code(provider, code, codeVerifier, redirectUrl, createData?, body?, query?) is deprecated. Consider replacing it with authWithOAuth2Code(provider, code, codeVerifier, redirectUrl, createData?, options?).",a,o,l),this.client.send(this.baseCollectionPath+"/auth-with-oauth2",a).then(c=>this.authResponse(c))}authWithOAuth2(...e){return E(this,void 0,void 0,function*(){if(e.length>1||typeof(e==null?void 0:e[0])=="string")return console.warn("PocketBase: This form of authWithOAuth2() is deprecated and may get removed in the future. Please replace with authWithOAuth2Code() OR use the authWithOAuth2() realtime form as shown in https://pocketbase.io/docs/authentication/#oauth2-integration."),this.authWithOAuth2Code((e==null?void 0:e[0])||"",(e==null?void 0:e[1])||"",(e==null?void 0:e[2])||"",(e==null?void 0:e[3])||"",(e==null?void 0:e[4])||{},(e==null?void 0:e[5])||{},(e==null?void 0:e[6])||{});const t=(e==null?void 0:e[0])||{},n=(yield this.listAuthMethods()).authProviders.find(a=>a.name===t.provider);if(!n)throw new M(new Error(`Missing or invalid provider "${t.provider}".`));const s=this.client.buildUrl("/api/oauth2-redirect"),i=new tt(this.client);let o=null;function l(){o==null||o.close(),i.unsubscribe()}return t.urlCallback||(o=Le(void 0)),new Promise((a,c)=>E(this,void 0,void 0,function*(){var u;try{yield i.subscribe("@oauth2",g=>E(this,void 0,void 0,function*(){const v=i.clientId;try{if(!g.state||v!==g.state)throw new Error("State parameters don't match.");const S=Object.assign({},t);delete S.provider,delete S.scopes,delete S.createData,delete S.urlCallback;const C=yield this.authWithOAuth2Code(n.name,g.code,n.codeVerifier,s,t.createData,S);a(C)}catch(S){c(new M(S))}l()}));const d={state:i.clientId};!((u=t.scopes)===null||u===void 0)&&u.length&&(d.scope=t.scopes.join(" "));const p=this._replaceQueryParams(n.authUrl+s,d);yield(t.urlCallback||function(g){o?o.location.href=g:o=Le(g)})(p)}catch(d){l(),c(new M(d))}}))})}authRefresh(e,t){let n={method:"POST"};return n=K("This form of authRefresh(body?, query?) is deprecated. Consider replacing it with authRefresh(options?).",n,e,t),this.client.send(this.baseCollectionPath+"/auth-refresh",n).then(s=>this.authResponse(s))}requestPasswordReset(e,t,n){let s={method:"POST",body:{email:e}};return s=K("This form of requestPasswordReset(email, body?, query?) is deprecated. Consider replacing it with requestPasswordReset(email, options?).",s,t,n),this.client.send(this.baseCollectionPath+"/request-password-reset",s).then(()=>!0)}confirmPasswordReset(e,t,n,s,i){let o={method:"POST",body:{token:e,password:t,passwordConfirm:n}};return o=K("This form of confirmPasswordReset(token, password, passwordConfirm, body?, query?) is deprecated. Consider replacing it with confirmPasswordReset(token, password, passwordConfirm, options?).",o,s,i),this.client.send(this.baseCollectionPath+"/confirm-password-reset",o).then(()=>!0)}requestVerification(e,t,n){let s={method:"POST",body:{email:e}};return s=K("This form of requestVerification(email, body?, query?) is deprecated. Consider replacing it with requestVerification(email, options?).",s,t,n),this.client.send(this.baseCollectionPath+"/request-verification",s).then(()=>!0)}confirmVerification(e,t,n){let s={method:"POST",body:{token:e}};return s=K("This form of confirmVerification(token, body?, query?) is deprecated. Consider replacing it with confirmVerification(token, options?).",s,t,n),this.client.send(this.baseCollectionPath+"/confirm-verification",s).then(()=>!0)}requestEmailChange(e,t,n){let s={method:"POST",body:{newEmail:e}};return s=K("This form of requestEmailChange(newEmail, body?, query?) is deprecated. Consider replacing it with requestEmailChange(newEmail, options?).",s,t,n),this.client.send(this.baseCollectionPath+"/request-email-change",s).then(()=>!0)}confirmEmailChange(e,t,n,s){let i={method:"POST",body:{token:e,password:t}};return i=K("This form of confirmEmailChange(token, password, body?, query?) is deprecated. Consider replacing it with confirmEmailChange(token, password, options?).",i,n,s),this.client.send(this.baseCollectionPath+"/confirm-email-change",i).then(()=>!0)}listExternalAuths(e,t){return t=Object.assign({method:"GET"},t),this.client.send(this.baseCrudPath+"/"+encodeURIComponent(e)+"/external-auths",t)}unlinkExternalAuth(e,t,n){return n=Object.assign({method:"DELETE"},n),this.client.send(this.baseCrudPath+"/"+encodeURIComponent(e)+"/external-auths/"+encodeURIComponent(t),n).then(()=>!0)}_replaceQueryParams(e,t={}){let n=e,s="";e.indexOf("?")>=0&&(n=e.substring(0,e.indexOf("?")),s=e.substring(e.indexOf("?")+1));const i={},o=s.split("&");for(const l of o){if(l=="")continue;const a=l.split("=");i[decodeURIComponent(a[0].replace(/\+/g," "))]=decodeURIComponent((a[1]||"").replace(/\+/g," "))}for(let l in t)t.hasOwnProperty(l)&&(t[l]==null?delete i[l]:i[l]=t[l]);s="";for(let l in i)i.hasOwnProperty(l)&&(s!=""&&(s+="&"),s+=encodeURIComponent(l.replace(/%20/g,"+"))+"="+encodeURIComponent(i[l].replace(/%20/g,"+")));return s!=""?n+"?"+s:n}}function Le(r){if(typeof window>"u"||!(window!=null&&window.open))throw new M(new Error("Not in a browser context - please pass a custom urlCallback function."));let e=1024,t=768,n=window.innerWidth,s=window.innerHeight;e=e>n?n:e,t=t>s?s:t;let i=n/2-e/2,o=s/2-t/2;return window.open(r,"popup_window","width="+e+",height="+t+",top="+o+",left="+i+",resizable,menubar=no")}class Rt extends Oe{get baseCrudPath(){return"/api/collections"}import(e,t=!1,n){return E(this,void 0,void 0,function*(){return n=Object.assign({method:"PUT",body:{collections:e,deleteMissing:t}},n),this.client.send(this.baseCrudPath+"/import",n).then(()=>!0)})}}class jt extends oe{getRequestsList(e=1,t=30,n){return(n=Object.assign({method:"GET"},n)).query=Object.assign({page:e,perPage:t},n.query),this.client.send("/api/logs/requests",n)}getRequest(e,t){return t=Object.assign({method:"GET"},t),this.client.send("/api/logs/requests/"+encodeURIComponent(e),t)}getRequestsStats(e){return e=Object.assign({method:"GET"},e),this.client.send("/api/logs/requests/stats",e)}}class At extends oe{check(e){return e=Object.assign({method:"GET"},e),this.client.send("/api/health",e)}}class qt extends oe{getUrl(e,t,n={}){if(!t||!(e!=null&&e.id)||!(e!=null&&e.collectionId)&&!(e!=null&&e.collectionName))return"";const s=[];s.push("api"),s.push("files"),s.push(encodeURIComponent(e.collectionId||e.collectionName)),s.push(encodeURIComponent(e.id)),s.push(encodeURIComponent(t));let i=this.client.buildUrl(s.join("/"));if(Object.keys(n).length){n.download===!1&&delete n.download;const o=new URLSearchParams(n);i+=(i.includes("?")?"&":"?")+o}return i}getToken(e){return e=Object.assign({method:"POST"},e),this.client.send("/api/files/token",e).then(t=>(t==null?void 0:t.token)||"")}}class Lt extends oe{getFullList(e){return e=Object.assign({method:"GET"},e),this.client.send("/api/backups",e)}create(e,t){return t=Object.assign({method:"POST",body:{name:e}},t),this.client.send("/api/backups",t).then(()=>!0)}upload(e,t){return t=Object.assign({method:"POST",body:e},t),this.client.send("/api/backups/upload",t).then(()=>!0)}delete(e,t){return t=Object.assign({method:"DELETE"},t),this.client.send(`/api/backups/${encodeURIComponent(e)}`,t).then(()=>!0)}restore(e,t){return t=Object.assign({method:"POST"},t),this.client.send(`/api/backups/${encodeURIComponent(e)}/restore`,t).then(()=>!0)}getDownloadUrl(e,t){return this.client.buildUrl(`/api/backups/${encodeURIComponent(t)}?token=${encodeURIComponent(e)}`)}}const Ut=["requestKey","$cancelKey","$autoCancel","fetch","headers","body","query","params","cache","credentials","headers","integrity","keepalive","method","mode","redirect","referrer","referrerPolicy","signal","window"];class Nt{constructor(e="/",t,n="en-US"){this.cancelControllers={},this.recordServices={},this.enableAutoCancellation=!0,this.baseUrl=e,this.lang=n,this.authStore=t||new Pt,this.admins=new It(this),this.collections=new Rt(this),this.files=new qt(this),this.logs=new jt(this),this.settings=new Tt(this),this.realtime=new tt(this),this.health=new At(this),this.backups=new Lt(this)}collection(e){return this.recordServices[e]||(this.recordServices[e]=new Et(this,e)),this.recordServices[e]}autoCancellation(e){return this.enableAutoCancellation=!!e,this}cancelRequest(e){return this.cancelControllers[e]&&(this.cancelControllers[e].abort(),delete this.cancelControllers[e]),this}cancelAllRequests(){for(let e in this.cancelControllers)this.cancelControllers[e].abort();return this.cancelControllers={},this}getFileUrl(e,t,n={}){return this.files.getUrl(e,t,n)}buildUrl(e){var t;let n=this.baseUrl;return typeof window>"u"||!window.location||n.startsWith("https://")||n.startsWith("http://")||(n=!((t=window.location.origin)===null||t===void 0)&&t.endsWith("/")?window.location.origin.substring(0,window.location.origin.length-1):window.location.origin||"",this.baseUrl.startsWith("/")||(n+=window.location.pathname||"/",n+=n.endsWith("/")?"":"/"),n+=this.baseUrl),e&&(n+=n.endsWith("/")?"":"/",n+=e.startsWith("/")?e.substring(1):e),n}send(e,t){return E(this,void 0,void 0,function*(){t=this.initSendOptions(e,t);let n=this.buildUrl(e);if(this.beforeSend){const s=Object.assign({},yield this.beforeSend(n,t));s.url!==void 0||s.options!==void 0?(n=s.url||n,t=s.options||t):Object.keys(s).length&&(t=s,console!=null&&console.warn&&console.warn("Deprecated format of beforeSend return: please use `return { url, options }`, instead of `return options`."))}if(t.query!==void 0){const s=this.serializeQueryParams(t.query);s&&(n+=(n.includes("?")?"&":"?")+s),delete t.query}return this.getHeader(t.headers,"Content-Type")=="application/json"&&t.body&&typeof t.body!="string"&&(t.body=JSON.stringify(t.body)),(t.fetch||fetch)(n,t).then(s=>E(this,void 0,void 0,function*(){let i={};try{i=yield s.json()}catch{}if(this.afterSend&&(i=yield this.afterSend(s,i)),s.status>=400)throw new M({url:s.url,status:s.status,data:i});return i})).catch(s=>{throw new M(s)})})}initSendOptions(e,t){(t=Object.assign({method:"GET"},t)).query=t.query||{},t.body=this.convertToFormDataIfNeeded(t.body);for(let n in t)Ut.includes(n)||(t.query[n]=t[n],delete t[n]);if(t.query=Object.assign({},t.params,t.query),t.requestKey===void 0&&(t.$autoCancel===!1||t.query.$autoCancel===!1?t.requestKey=null:(t.$cancelKey||t.query.$cancelKey)&&(t.requestKey=t.$cancelKey||t.query.$cancelKey)),delete t.$autoCancel,delete t.query.$autoCancel,delete t.$cancelKey,delete t.query.$cancelKey,this.getHeader(t.headers,"Content-Type")!==null||this.isFormData(t.body)||(t.headers=Object.assign({},t.headers,{"Content-Type":"application/json"})),this.getHeader(t.headers,"Accept-Language")===null&&(t.headers=Object.assign({},t.headers,{"Accept-Language":this.lang})),this.authStore.token&&this.getHeader(t.headers,"Authorization")===null&&(t.headers=Object.assign({},t.headers,{Authorization:this.authStore.token})),this.enableAutoCancellation&&t.requestKey!==null){const n=t.requestKey||(t.method||"GET")+e;delete t.requestKey,this.cancelRequest(n);const s=new AbortController;this.cancelControllers[n]=s,t.signal=s.signal}return t}convertToFormDataIfNeeded(e){if(typeof FormData>"u"||e===void 0||typeof e!="object"||e===null||this.isFormData(e)||!this.hasBlobField(e))return e;const t=new FormData;for(let n in e){const s=Array.isArray(e[n])?e[n]:[e[n]];for(let i of s)t.append(n,i)}return t}hasBlobField(e){for(let t in e){const n=Array.isArray(e[t])?e[t]:[e[t]];for(let s of n)if(typeof Blob<"u"&&s instanceof Blob||typeof File<"u"&&s instanceof File)return!0}return!1}getHeader(e,t){e=e||{},t=t.toLowerCase();for(let n in e)if(n.toLowerCase()==t)return e[n];return null}isFormData(e){return e&&(e.constructor.name==="FormData"||typeof FormData<"u"&&e instanceof FormData)}serializeQueryParams(e){const t=[];for(const n in e){if(e[n]===null)continue;const s=e[n],i=encodeURIComponent(n);if(Array.isArray(s))for(const o of s)t.push(i+"="+encodeURIComponent(o));else s instanceof Date?t.push(i+"="+encodeURIComponent(s.toISOString())):typeof s!==null&&typeof s=="object"?t.push(i+"="+encodeURIComponent(JSON.stringify(s))):t.push(i+"="+encodeURIComponent(s))}return t.join("&")}}const ee=new Nt(window.location.origin),Pe=Xe(ee.authStore.model);ee.authStore.onChange((r,e)=>{Pe.set(e)});function Dt(r){let e;return{c(){e=G("Upload")},l(t){e=H(t,"Upload")},m(t,n){b(t,e,n)},d(t){t&&h(e)}}}function Ft(r){let e,t,n,s,i,o;return e=new Ce({props:{$$slots:{default:[Dt]},$$scope:{ctx:r}}}),e.$on("click",r[2]),{c(){O(e.$$.fragment),t=q(),n=k("input"),this.h()},l(l){P(e.$$.fragment,l),t=L(l),n=$(l,"INPUT",{type:!0,class:!0}),this.h()},h(){y(n,"type","file"),y(n,"class","hidden")},m(l,a){T(e,l,a),b(l,t,a),b(l,n,a),r[3](n),s=!0,i||(o=ie(n,"change",r[4]),i=!0)},p(l,[a]){const c={};a&256&&(c.$$scope={dirty:a,ctx:l}),e.$set(c)},i(l){s||(f(e.$$.fragment,l),s=!0)},o(l){m(e.$$.fragment,l),s=!1},d(l){l&&(h(t),h(n)),I(e,l),r[3](null),i=!1,o()}}}function Kt(r,e,t){let n;ye(r,Pe,d=>t(5,n=d));const s=be();let i=null,o=null;async function l(){let d=[];for(const p of o)d.push(ee.collection("files").create({name:p.name,file:p,owner:n.id}));await Promise.all(d),s("upload",o),t(0,o=null)}const a=()=>i.click();function c(d){ae[d?"unshift":"push"](()=>{i=d,t(1,i)})}function u(){o=this.files,t(0,o)}return r.$$.update=()=>{r.$$.dirty&1&&o&&l()},[o,i,a,c,u]}class Vt extends B{constructor(e){super(),W(this,e,Kt,Ft,V,{})}}function Bt(r){let e,t,n,s=[{type:"text"},{class:r[2]},r[3]],i={};for(let o=0;o<s.length;o+=1)i=D(i,s[o]);return{c(){e=k("input"),this.h()},l(o){e=$(o,"INPUT",{type:!0,class:!0}),this.h()},h(){ne(e,i)},m(o,l){b(o,e,l),e.autofocus&&e.focus(),fe(e,r[0]),t||(n=ie(e,"input",r[5]),t=!0)},p(o,l){ne(e,i=ve(s,[{type:"text"},{class:o[2]},l&8&&o[3]])),l&1&&e.value!==o[0]&&fe(e,o[0])},d(o){o&&h(e),t=!1,n()}}}function Wt(r){let e,t,n,s=[{type:"password"},{class:r[2]},r[3]],i={};for(let o=0;o<s.length;o+=1)i=D(i,s[o]);return{c(){e=k("input"),this.h()},l(o){e=$(o,"INPUT",{type:!0,class:!0}),this.h()},h(){ne(e,i)},m(o,l){b(o,e,l),e.autofocus&&e.focus(),fe(e,r[0]),t||(n=ie(e,"input",r[4]),t=!0)},p(o,l){ne(e,i=ve(s,[{type:"password"},{class:o[2]},l&8&&o[3]])),l&1&&e.value!==o[0]&&fe(e,o[0])},d(o){o&&h(e),t=!1,n()}}}function Mt(r){let e;function t(i,o){return i[1]?Wt:Bt}let n=t(r),s=n(r);return{c(){s.c(),e=F()},l(i){s.l(i),e=F()},m(i,o){s.m(i,o),b(i,e,o)},p(i,[o]){n===(n=t(i))&&s?s.p(i,o):(s.d(1),s=n(i),s&&(s.c(),s.m(e.parentNode,e)))},i:j,o:j,d(i){i&&h(e),s.d(i)}}}function Gt(r,e,t){const n=["password","value"];let s=re(e,n),{password:i=!1}=e,{value:o=""}=e;const l=`
		px-2
		py-1
		rounded-2xl
		border-4
		transition-all
		text-slate-100
		outline-none
		border-cyan-500
		dark:text-slate-800
		hover:border-cyan-600
		focus:border-cyan-700
		disabled:bg-cyan-200
		disabled:text-cyan-700
		disabled:border-cyan-300
	`;function a(){o=this.value,t(0,o)}function c(){o=this.value,t(0,o)}return r.$$set=u=>{e=D(D({},e),te(u)),t(3,s=re(e,n)),"password"in u&&t(1,i=u.password),"value"in u&&t(0,o=u.value)},[o,i,l,s,a,c]}class $e extends B{constructor(e){super(),W(this,e,Gt,Mt,V,{password:1,value:0})}}function Ht(r){let e,t,n,s,i,o;function l(c){r[2](c)}let a={placeholder:"Search..."};return r[0]!==void 0&&(a.value=r[0]),t=new $e({props:a}),ae.push(()=>me(t,"value",l)),{c(){e=k("form"),O(t.$$.fragment),this.h()},l(c){e=$(c,"FORM",{class:!0});var u=A(e);P(t.$$.fragment,u),u.forEach(h),this.h()},h(){y(e,"class","contents")},m(c,u){b(c,e,u),T(t,e,null),s=!0,i||(o=ie(e,"submit",Qe(r[1])),i=!0)},p(c,[u]){const d={};!n&&u&1&&(n=!0,d.value=c[0],pe(()=>n=!1)),t.$set(d)},i(c){s||(f(t.$$.fragment,c),s=!0)},o(c){m(t.$$.fragment,c),s=!1},d(c){c&&h(e),I(t),i=!1,o()}}}function zt(r,e,t){const n=be();let{value:s=""}=e;function i(){n("submit",s)}function o(l){s=l,t(0,s)}return r.$$set=l=>{"value"in l&&t(0,s=l.value)},[s,i,o]}class Jt extends B{constructor(e){super(),W(this,e,zt,Ht,V,{value:0})}}function Qt(r){let e,t,n,s,i;const o=r[4].default,l=Y(o,r,r[3],null);let a=[{class:t="text-cyan-500 hover:text-cyan-600 active:text-cyan-700 transition-all "+r[1]},{href:r[0]},r[2]],c={};for(let u=0;u<a.length;u+=1)c=D(c,a[u]);return{c(){e=k("a"),l&&l.c(),this.h()},l(u){e=$(u,"A",{class:!0,href:!0});var d=A(e);l&&l.l(d),d.forEach(h),this.h()},h(){ne(e,c)},m(u,d){b(u,e,d),l&&l.m(e,null),n=!0,s||(i=ie(e,"click",r[5]),s=!0)},p(u,[d]){l&&l.p&&(!n||d&8)&&X(l,o,u,u[3],n?x(o,u[3],d,null):Z(u[3]),null),ne(e,c=ve(a,[(!n||d&2&&t!==(t="text-cyan-500 hover:text-cyan-600 active:text-cyan-700 transition-all "+u[1]))&&{class:t},(!n||d&1)&&{href:u[0]},d&4&&u[2]]))},i(u){n||(f(l,u),n=!0)},o(u){m(l,u),n=!1},d(u){u&&h(e),l&&l.d(u),s=!1,i()}}}function Yt(r,e,t){let n;const s=["href"];let i=re(e,s),{$$slots:o={},$$scope:l}=e,{href:a=""}=e;function c(u){ot.call(this,r,u)}return r.$$set=u=>{t(6,e=D(D({},e),te(u))),t(2,i=re(e,s)),"href"in u&&t(0,a=u.href),"$$scope"in u&&t(3,l=u.$$scope)},r.$$.update=()=>{t(1,n=e.class??"")},e=te(e),[a,n,i,l,o,c]}class ce extends B{constructor(e){super(),W(this,e,Yt,Qt,V,{href:0})}}function Ue(r,e,t){const n=r.slice();return n[7]=e[t],n}function Ne(r){let e,t,n,s="...",i;return e=new ce({props:{$$slots:{default:[Xt]},$$scope:{ctx:r}}}),e.$on("click",r[3]),{c(){O(e.$$.fragment),t=q(),n=k("div"),n.textContent=s},l(o){P(e.$$.fragment,o),t=L(o),n=$(o,"DIV",{"data-svelte-h":!0}),Se(n)!=="svelte-12rhcfw"&&(n.textContent=s)},m(o,l){T(e,o,l),b(o,t,l),b(o,n,l),i=!0},p(o,l){const a={};l&1024&&(a.$$scope={dirty:l,ctx:o}),e.$set(a)},i(o){i||(f(e.$$.fragment,o),i=!0)},o(o){m(e.$$.fragment,o),i=!1},d(o){o&&(h(t),h(n)),I(e,o)}}}function Xt(r){let e;return{c(){e=G("1")},l(t){e=H(t,"1")},m(t,n){b(t,e,n)},d(t){t&&h(e)}}}function Zt(r){let e,t;function n(...s){return r[4](r[7],...s)}return e=new ce({props:{$$slots:{default:[en]},$$scope:{ctx:r}}}),e.$on("click",n),{c(){O(e.$$.fragment)},l(s){P(e.$$.fragment,s)},m(s,i){T(e,s,i),t=!0},p(s,i){r=s;const o={};i&1025&&(o.$$scope={dirty:i,ctx:r}),e.$set(o)},i(s){t||(f(e.$$.fragment,s),t=!0)},o(s){m(e.$$.fragment,s),t=!1},d(s){I(e,s)}}}function xt(r){let e,t;return{c(){e=k("div"),t=G(r[0])},l(n){e=$(n,"DIV",{});var s=A(e);t=H(s,r[0]),s.forEach(h)},m(n,s){b(n,e,s),U(e,t)},p(n,s){s&1&&le(t,n[0])},i:j,o:j,d(n){n&&h(e)}}}function en(r){let e=r[7]+"",t;return{c(){t=G(e)},l(n){t=H(n,e)},m(n,s){b(n,t,s)},p(n,s){s&1&&e!==(e=n[7]+"")&&le(t,e)},d(n){n&&h(t)}}}function De(r){let e,t,n,s;const i=[xt,Zt],o=[];function l(a,c){return a[7]===a[0]?0:a[7]>1&&a[7]<a[1]?1:-1}return~(e=l(r))&&(t=o[e]=i[e](r)),{c(){t&&t.c(),n=F()},l(a){t&&t.l(a),n=F()},m(a,c){~e&&o[e].m(a,c),b(a,n,c),s=!0},p(a,c){let u=e;e=l(a),e===u?~e&&o[e].p(a,c):(t&&(z(),m(o[u],1,1,()=>{o[u]=null}),J()),~e?(t=o[e],t?t.p(a,c):(t=o[e]=i[e](a),t.c()),f(t,1),t.m(n.parentNode,n)):t=null)},i(a){s||(f(t),s=!0)},o(a){m(t),s=!1},d(a){a&&h(n),~e&&o[e].d(a)}}}function Fe(r){let e,t="...",n,s,i;return s=new ce({props:{$$slots:{default:[tn]},$$scope:{ctx:r}}}),s.$on("click",r[5]),{c(){e=k("div"),e.textContent=t,n=q(),O(s.$$.fragment)},l(o){e=$(o,"DIV",{"data-svelte-h":!0}),Se(e)!=="svelte-12rhcfw"&&(e.textContent=t),n=L(o),P(s.$$.fragment,o)},m(o,l){b(o,e,l),b(o,n,l),T(s,o,l),i=!0},p(o,l){const a={};l&1026&&(a.$$scope={dirty:l,ctx:o}),s.$set(a)},i(o){i||(f(s.$$.fragment,o),i=!0)},o(o){m(s.$$.fragment,o),i=!1},d(o){o&&(h(e),h(n)),I(s,o)}}}function tn(r){let e;return{c(){e=G(r[1])},l(t){e=H(t,r[1])},m(t,n){b(t,e,n)},p(t,n){n&2&&le(e,t[1])},d(t){t&&h(e)}}}function nn(r){let e,t,n,s,i=r[0]!==1&&Ne(r),o=ge([r[0]-2,r[0]-1,r[0],r[0]+1,r[0]+2]),l=[];for(let u=0;u<5;u+=1)l[u]=De(Ue(r,o,u));const a=u=>m(l[u],1,1,()=>{l[u]=null});let c=r[0]!==r[1]&&Fe(r);return{c(){e=k("div"),i&&i.c(),t=q();for(let u=0;u<5;u+=1)l[u].c();n=q(),c&&c.c(),this.h()},l(u){e=$(u,"DIV",{class:!0});var d=A(e);i&&i.l(d),t=L(d);for(let p=0;p<5;p+=1)l[p].l(d);n=L(d),c&&c.l(d),d.forEach(h),this.h()},h(){y(e,"class","flex flex-row justify-between items-center gap-4")},m(u,d){b(u,e,d),i&&i.m(e,null),U(e,t);for(let p=0;p<5;p+=1)l[p]&&l[p].m(e,null);U(e,n),c&&c.m(e,null),s=!0},p(u,[d]){if(u[0]!==1?i?(i.p(u,d),d&1&&f(i,1)):(i=Ne(u),i.c(),f(i,1),i.m(e,t)):i&&(z(),m(i,1,1,()=>{i=null}),J()),d&7){o=ge([u[0]-2,u[0]-1,u[0],u[0]+1,u[0]+2]);let p;for(p=0;p<5;p+=1){const _=Ue(u,o,p);l[p]?(l[p].p(_,d),f(l[p],1)):(l[p]=De(_),l[p].c(),f(l[p],1),l[p].m(e,n))}for(z(),p=5;p<5;p+=1)a(p);J()}u[0]!==u[1]?c?(c.p(u,d),d&3&&f(c,1)):(c=Fe(u),c.c(),f(c,1),c.m(e,null)):c&&(z(),m(c,1,1,()=>{c=null}),J())},i(u){if(!s){f(i);for(let d=0;d<5;d+=1)f(l[d]);f(c),s=!0}},o(u){m(i),l=l.filter(Boolean);for(let d=0;d<5;d+=1)m(l[d]);m(c),s=!1},d(u){u&&h(e),i&&i.d(),Ye(l,u),c&&c.d()}}}function sn(r,e,t){const n=be();let{page:s=1}=e,{pages:i=1}=e;function o(u,d){u==null||u.preventDefault(),t(0,s=d),n("change",d)}const l=u=>o(u,1),a=(u,d)=>o(d,u),c=u=>o(u,i);return r.$$set=u=>{"page"in u&&t(0,s=u.page),"pages"in u&&t(1,i=u.pages)},r.$$.update=()=>{r.$$.dirty&3&&s>i&&o(null,i)},[s,i,o,l,a,c]}class on extends B{constructor(e){super(),W(this,e,sn,nn,V,{page:0,pages:1})}}function rn(r){let e;return{c(){e=G("Login")},l(t){e=H(t,"Login")},m(t,n){b(t,e,n)},d(t){t&&h(e)}}}function ln(r){let e,t,n,s,i,o,l,a,c,u,d,p,_,g;function v(w){r[4](w)}let S={placeholder:"E-mail address..."};r[0]!==void 0&&(S.value=r[0]),i=new $e({props:S}),ae.push(()=>me(i,"value",v));function C(w){r[5](w)}let Q={password:!0,placeholder:"Password..."};return r[1]!==void 0&&(Q.value=r[1]),a=new $e({props:Q}),ae.push(()=>me(a,"value",C)),d=new Ce({props:{type:"submit",disabled:!r[0]||!r[1],$$slots:{default:[rn]},$$scope:{ctx:r}}}),{c(){e=k("div"),t=G(r[2]),n=q(),s=k("form"),O(i.$$.fragment),l=q(),O(a.$$.fragment),u=q(),O(d.$$.fragment),this.h()},l(w){e=$(w,"DIV",{class:!0});var R=A(e);t=H(R,r[2]),R.forEach(h),n=L(w),s=$(w,"FORM",{class:!0});var N=A(s);P(i.$$.fragment,N),l=L(N),P(a.$$.fragment,N),u=L(N),P(d.$$.fragment,N),N.forEach(h),this.h()},h(){y(e,"class","text-red-500"),Te(e,"invisible",!r[2]),y(s,"class","flex flex-col items-end gap-4")},m(w,R){b(w,e,R),U(e,t),b(w,n,R),b(w,s,R),T(i,s,null),U(s,l),T(a,s,null),U(s,u),T(d,s,null),p=!0,_||(g=ie(s,"submit",Qe(r[3])),_=!0)},p(w,R){(!p||R&4)&&le(t,w[2]),(!p||R&4)&&Te(e,"invisible",!w[2]);const N={};!o&&R&1&&(o=!0,N.value=w[0],pe(()=>o=!1)),i.$set(N);const se={};!c&&R&2&&(c=!0,se.value=w[1],pe(()=>c=!1)),a.$set(se);const _e={};R&3&&(_e.disabled=!w[0]||!w[1]),R&64&&(_e.$$scope={dirty:R,ctx:w}),d.$set(_e)},i(w){p||(f(i.$$.fragment,w),f(a.$$.fragment,w),f(d.$$.fragment,w),p=!0)},o(w){m(i.$$.fragment,w),m(a.$$.fragment,w),m(d.$$.fragment,w),p=!1},d(w){w&&(h(e),h(n),h(s)),I(i),I(a),I(d),_=!1,g()}}}function an(r){let e,t;return e=new Ze({props:{$$slots:{default:[ln]},$$scope:{ctx:r}}}),{c(){O(e.$$.fragment)},l(n){P(e.$$.fragment,n)},m(n,s){T(e,n,s),t=!0},p(n,[s]){const i={};s&71&&(i.$$scope={dirty:s,ctx:n}),e.$set(i)},i(n){t||(f(e.$$.fragment,n),t=!0)},o(n){m(e.$$.fragment,n),t=!1},d(n){I(e,n)}}}function cn(r,e,t){let n="",s="",i=null;async function o(){try{await ee.collection("users").authWithPassword(n,s)}catch(c){console.error(c),t(2,i="Incorrect login information.");return}}function l(c){n=c,t(0,n)}function a(c){s=c,t(1,s)}return[n,s,i,o,l,a]}class un extends B{constructor(e){super(),W(this,e,cn,an,V,{})}}function dn(r){let e,t,n;const s=r[2].default,i=Y(s,r,r[1],null);return{c(){e=k("div"),i&&i.c(),this.h()},l(o){e=$(o,"DIV",{class:!0});var l=A(e);i&&i.l(l),l.forEach(h),this.h()},h(){y(e,"class",t="flex flex-row flex-wrap justify-center items-start gap-4 "+r[0])},m(o,l){b(o,e,l),i&&i.m(e,null),n=!0},p(o,[l]){i&&i.p&&(!n||l&2)&&X(i,s,o,o[1],n?x(s,o[1],l,null):Z(o[1]),null),(!n||l&1&&t!==(t="flex flex-row flex-wrap justify-center items-start gap-4 "+o[0]))&&y(e,"class",t)},i(o){n||(f(i,o),n=!0)},o(o){m(i,o),n=!1},d(o){o&&h(e),i&&i.d(o)}}}function hn(r,e,t){let n,{$$slots:s={},$$scope:i}=e;return r.$$set=o=>{t(3,e=D(D({},e),te(o))),"$$scope"in o&&t(1,i=o.$$scope)},r.$$.update=()=>{t(0,n=e.class)},e=te(e),[n,i,s]}class fn extends B{constructor(e){super(),W(this,e,hn,dn,V,{})}}const pn=r=>({}),Ke=r=>({}),mn=r=>({}),Ve=r=>({});function Be(r){let e,t;const n=r[5].subtitle,s=Y(n,r,r[4],Ke);return{c(){e=k("div"),s&&s.c(),this.h()},l(i){e=$(i,"DIV",{class:!0});var o=A(e);s&&s.l(o),o.forEach(h),this.h()},h(){y(e,"class","flex flex-col items-center overflow-x-auto")},m(i,o){b(i,e,o),s&&s.m(e,null),t=!0},p(i,o){s&&s.p&&(!t||o&16)&&X(s,n,i,i[4],t?x(n,i[4],o,pn):Z(i[4]),Ke)},i(i){t||(f(s,i),t=!0)},o(i){m(s,i),t=!1},d(i){i&&h(e),s&&s.d(i)}}}function gn(r){let e,t,n,s,i;const o=r[5].image,l=Y(o,r,r[4],Ve);let a=r[2].subtitle&&Be(r);return{c(){e=k("div"),t=k("div"),l&&l.c(),n=q(),a&&a.c(),this.h()},l(c){e=$(c,"DIV",{class:!0});var u=A(e);t=$(u,"DIV",{class:!0});var d=A(t);l&&l.l(d),d.forEach(h),n=L(u),a&&a.l(u),u.forEach(h),this.h()},h(){y(t,"class","flex flex-col grow justify-center items-stretch rounded-lg overflow-hidden transition-all group-hover:opacity-80 "),y(e,"class",s="group flex flex-col p-2 gap-2 rounded-2xl shadow-lg bg-slate-100 transition-all dark:bg-slate-900 dark:outline dark:outline-2 dark:outline-cyan-900 hover:shadow-xl "+r[1]+" "+r[0])},m(c,u){b(c,e,u),U(e,t),l&&l.m(t,null),U(e,n),a&&a.m(e,null),i=!0},p(c,[u]){l&&l.p&&(!i||u&16)&&X(l,o,c,c[4],i?x(o,c[4],u,mn):Z(c[4]),Ve),c[2].subtitle?a?(a.p(c,u),u&4&&f(a,1)):(a=Be(c),a.c(),f(a,1),a.m(e,null)):a&&(z(),m(a,1,1,()=>{a=null}),J()),(!i||u&3&&s!==(s="group flex flex-col p-2 gap-2 rounded-2xl shadow-lg bg-slate-100 transition-all dark:bg-slate-900 dark:outline dark:outline-2 dark:outline-cyan-900 hover:shadow-xl "+c[1]+" "+c[0]))&&y(e,"class",s)},i(c){i||(f(l,c),f(a),i=!0)},o(c){m(l,c),m(a),i=!1},d(c){c&&h(e),l&&l.d(c),a&&a.d()}}}function bn(r,e,t){let n,s,{$$slots:i={},$$scope:o}=e;const l=rt(i);let{size:a="md"}=e;return r.$$set=c=>{t(6,e=D(D({},e),te(c))),"size"in c&&t(3,a=c.size),"$$scope"in c&&t(4,o=c.$$scope)},r.$$.update=()=>{r.$$.dirty&8&&t(1,n={sm:"w-24 h-24",md:"w-48 h-48",lg:"w-96 h-96"}[a]??"w-48 h-48"),t(0,s=e.class)},e=te(e),[s,n,l,a,o,i]}class vn extends B{constructor(e){super(),W(this,e,bn,gn,V,{size:3})}}function _n(r){let e,t='<div class="w-full h-full rounded-full bg-slate-200 dark:bg-slate-800 "></div>';return{c(){e=k("div"),e.innerHTML=t,this.h()},l(n){e=$(n,"DIV",{class:!0,"data-svelte-h":!0}),Se(e)!=="svelte-1vv7ujx"&&(e.innerHTML=t),this.h()},h(){y(e,"class","w-8 h-8 p-0.5 rounded-full animate-spin bg-gradient-to-r from-transparent via-transparent to-teal-500 ")},m(n,s){b(n,e,s)},p:j,i:j,o:j,d(n){n&&h(e)}}}class wn extends B{constructor(e){super(),W(this,e,null,_n,V,{})}}function yn(r){return r=new URL(r),r.hash?new URLSearchParams(r.hash.substring(1)):new URLSearchParams}const kn=Xe(window.location,r=>{const e=t=>{r(t.newURL)};return window.addEventListener("hashchange",e),()=>{window.removeEventListener("hashchange",e)}}),We={subscribe:ct(kn,r=>yn(r)).subscribe,set:r=>{window.location.hash=r}};function Me(r,e,t){const n=r.slice();return n[12]=e[t],n}function $n(r){let e,t;return{c(){e=k("img"),this.h()},l(n){e=$(n,"IMG",{class:!0,src:!0,alt:!0}),this.h()},h(){y(e,"class","max-h-8"),ke(e.src,t=ut+"/favicon.png")||y(e,"src",t),y(e,"alt","PocketSafe")},m(n,s){b(n,e,s)},p:j,d(n){n&&h(e)}}}function Ge(r){let e,t;return e=new Vt({}),e.$on("upload",r[10]),{c(){O(e.$$.fragment)},l(n){P(e.$$.fragment,n)},m(n,s){T(e,n,s),t=!0},p:j,i(n){t||(f(e.$$.fragment,n),t=!0)},o(n){m(e.$$.fragment,n),t=!1},d(n){I(e,n)}}}function Sn(r){let e,t,n,s;e=new ce({props:{class:"hover:opacity-50 transition-all",href:"/",$$slots:{default:[$n]},$$scope:{ctx:r}}});let i=r[2]&&Ge(r);return{c(){O(e.$$.fragment),t=q(),i&&i.c(),n=F()},l(o){P(e.$$.fragment,o),t=L(o),i&&i.l(o),n=F()},m(o,l){T(e,o,l),b(o,t,l),i&&i.m(o,l),b(o,n,l),s=!0},p(o,l){const a={};l&32768&&(a.$$scope={dirty:l,ctx:o}),e.$set(a),o[2]?i?(i.p(o,l),l&4&&f(i,1)):(i=Ge(o),i.c(),f(i,1),i.m(n.parentNode,n)):i&&(z(),m(i,1,1,()=>{i=null}),J())},i(o){s||(f(e.$$.fragment,o),f(i),s=!0)},o(o){m(e.$$.fragment,o),m(i),s=!1},d(o){o&&(h(t),h(n)),I(e,o),i&&i.d(o)}}}function Cn(r){let e,t,n;function s(o){r[9](o)}let i={};return r[1]!==void 0&&(i.value=r[1]),e=new Jt({props:i}),ae.push(()=>me(e,"value",s)),e.$on("submit",r[6]),{c(){O(e.$$.fragment)},l(o){P(e.$$.fragment,o)},m(o,l){T(e,o,l),n=!0},p(o,l){const a={};!t&&l&2&&(t=!0,a.value=o[1],pe(()=>t=!1)),e.$set(a)},i(o){n||(f(e.$$.fragment,o),n=!0)},o(o){m(e.$$.fragment,o),n=!1},d(o){I(e,o)}}}function He(r){let e,t=r[2].username+"",n,s,i,o;return i=new Ce({props:{$$slots:{default:[On]},$$scope:{ctx:r}}}),i.$on("click",r[4]),{c(){e=k("div"),n=G(t),s=q(),O(i.$$.fragment)},l(l){e=$(l,"DIV",{});var a=A(e);n=H(a,t),a.forEach(h),s=L(l),P(i.$$.fragment,l)},m(l,a){b(l,e,a),U(e,n),b(l,s,a),T(i,l,a),o=!0},p(l,a){(!o||a&4)&&t!==(t=l[2].username+"")&&le(n,t);const c={};a&32768&&(c.$$scope={dirty:a,ctx:l}),i.$set(c)},i(l){o||(f(i.$$.fragment,l),o=!0)},o(l){m(i.$$.fragment,l),o=!1},d(l){l&&(h(e),h(s)),I(i,l)}}}function On(r){let e;return{c(){e=G("Logout")},l(t){e=H(t,"Logout")},m(t,n){b(t,e,n)},d(t){t&&h(e)}}}function Pn(r){let e,t,n=r[2]&&He(r);return{c(){n&&n.c(),e=F()},l(s){n&&n.l(s),e=F()},m(s,i){n&&n.m(s,i),b(s,e,i),t=!0},p(s,i){s[2]?n?(n.p(s,i),i&4&&f(n,1)):(n=He(s),n.c(),f(n,1),n.m(e.parentNode,e)):n&&(z(),m(n,1,1,()=>{n=null}),J())},i(s){t||(f(n),t=!0)},o(s){m(n),t=!1},d(s){s&&h(e),n&&n.d(s)}}}function Tn(r){let e,t;return e=new un({}),{c(){O(e.$$.fragment)},l(n){P(e.$$.fragment,n)},m(n,s){T(e,n,s),t=!0},p:j,i(n){t||(f(e.$$.fragment,n),t=!0)},o(n){m(e.$$.fragment,n),t=!1},d(n){I(e,n)}}}function In(r){let e,t,n,s={ctx:r,current:null,token:null,hasCatch:!1,pending:Un,then:Rn,catch:En,value:3,blocks:[,,,]};return Ie(t=r[3],s),{c(){e=F(),s.block.c()},l(i){e=F(),s.block.l(i)},m(i,o){b(i,e,o),s.block.m(i,s.anchor=o),s.mount=()=>e.parentNode,s.anchor=e,n=!0},p(i,o){r=i,s.ctx=r,o&8&&t!==(t=r[3])&&Ie(t,s)||dt(s,r,o)},i(i){n||(f(s.block),n=!0)},o(i){for(let o=0;o<3;o+=1){const l=s.blocks[o];m(l)}n=!1},d(i){i&&h(e),s.block.d(i),s.token=null,s=null}}}function En(r){return{c:j,l:j,m:j,p:j,i:j,o:j,d:j}}function Rn(r){let e,t,n,s,i,o=r[3].totalItems==0&&ze();return t=new fn({props:{$$slots:{default:[Ln]},$$scope:{ctx:r}}}),s=new on({props:{page:r[0],pages:r[3].totalPages}}),s.$on("change",r[7]),{c(){o&&o.c(),e=q(),O(t.$$.fragment),n=q(),O(s.$$.fragment)},l(l){o&&o.l(l),e=L(l),P(t.$$.fragment,l),n=L(l),P(s.$$.fragment,l)},m(l,a){o&&o.m(l,a),b(l,e,a),T(t,l,a),b(l,n,a),T(s,l,a),i=!0},p(l,a){l[3].totalItems==0?o||(o=ze(),o.c(),o.m(e.parentNode,e)):o&&(o.d(1),o=null);const c={};a&32776&&(c.$$scope={dirty:a,ctx:l}),t.$set(c);const u={};a&1&&(u.page=l[0]),a&8&&(u.pages=l[3].totalPages),s.$set(u)},i(l){i||(f(t.$$.fragment,l),f(s.$$.fragment,l),i=!0)},o(l){m(t.$$.fragment,l),m(s.$$.fragment,l),i=!1},d(l){l&&(h(e),h(n)),o&&o.d(l),I(t,l),I(s,l)}}}function ze(r){let e;return{c(){e=G("No files.")},l(t){e=H(t,"No files.")},m(t,n){b(t,e,n)},d(t){t&&h(e)}}}function jn(r){let e,t,n;return{c(){e=k("img"),this.h()},l(s){e=$(s,"IMG",{slot:!0,class:!0,src:!0,alt:!0}),this.h()},h(){y(e,"slot","image"),y(e,"class","rounded-lg grow object-cover"),ke(e.src,t=r[8](r[12]))||y(e,"src",t),y(e,"alt",n=r[12].file)},m(s,i){b(s,e,i)},p(s,i){i&8&&!ke(e.src,t=s[8](s[12]))&&y(e,"src",t),i&8&&n!==(n=s[12].file)&&y(e,"alt",n)},d(s){s&&h(e)}}}function An(r){let e,t=r[12].name+"",n;return{c(){e=k("div"),n=G(t),this.h()},l(s){e=$(s,"DIV",{slot:!0});var i=A(e);n=H(i,t),i.forEach(h),this.h()},h(){y(e,"slot","subtitle")},m(s,i){b(s,e,i),U(e,n)},p(s,i){i&8&&t!==(t=s[12].name+"")&&le(n,t)},d(s){s&&h(e)}}}function qn(r){let e,t,n;return e=new vn({props:{size:"lg",$$slots:{subtitle:[An],image:[jn]},$$scope:{ctx:r}}}),{c(){O(e.$$.fragment),t=q()},l(s){P(e.$$.fragment,s),t=L(s)},m(s,i){T(e,s,i),b(s,t,i),n=!0},p(s,i){const o={};i&32776&&(o.$$scope={dirty:i,ctx:s}),e.$set(o)},i(s){n||(f(e.$$.fragment,s),n=!0)},o(s){m(e.$$.fragment,s),n=!1},d(s){s&&h(t),I(e,s)}}}function Je(r){let e,t;return e=new ce({props:{href:ee.files.getUrl(r[12],r[12].file),$$slots:{default:[qn]},$$scope:{ctx:r}}}),{c(){O(e.$$.fragment)},l(n){P(e.$$.fragment,n)},m(n,s){T(e,n,s),t=!0},p(n,s){const i={};s&8&&(i.href=ee.files.getUrl(n[12],n[12].file)),s&32776&&(i.$$scope={dirty:s,ctx:n}),e.$set(i)},i(n){t||(f(e.$$.fragment,n),t=!0)},o(n){m(e.$$.fragment,n),t=!1},d(n){I(e,n)}}}function Ln(r){let e,t,n=ge(r[3].items),s=[];for(let o=0;o<n.length;o+=1)s[o]=Je(Me(r,n,o));const i=o=>m(s[o],1,1,()=>{s[o]=null});return{c(){for(let o=0;o<s.length;o+=1)s[o].c();e=F()},l(o){for(let l=0;l<s.length;l+=1)s[l].l(o);e=F()},m(o,l){for(let a=0;a<s.length;a+=1)s[a]&&s[a].m(o,l);b(o,e,l),t=!0},p(o,l){if(l&264){n=ge(o[3].items);let a;for(a=0;a<n.length;a+=1){const c=Me(o,n,a);s[a]?(s[a].p(c,l),f(s[a],1)):(s[a]=Je(c),s[a].c(),f(s[a],1),s[a].m(e.parentNode,e))}for(z(),a=n.length;a<s.length;a+=1)i(a);J()}},i(o){if(!t){for(let l=0;l<n.length;l+=1)f(s[l]);t=!0}},o(o){s=s.filter(Boolean);for(let l=0;l<s.length;l+=1)m(s[l]);t=!1},d(o){o&&h(e),Ye(s,o)}}}function Un(r){let e,t;return e=new wn({}),{c(){O(e.$$.fragment)},l(n){P(e.$$.fragment,n)},m(n,s){T(e,n,s),t=!0},p:j,i(n){t||(f(e.$$.fragment,n),t=!0)},o(n){m(e.$$.fragment,n),t=!1},d(n){I(e,n)}}}function Nn(r){let e,t,n,s;const i=[In,Tn],o=[];function l(a,c){return a[2]?0:1}return e=l(r),t=o[e]=i[e](r),{c(){t.c(),n=F()},l(a){t.l(a),n=F()},m(a,c){o[e].m(a,c),b(a,n,c),s=!0},p(a,c){let u=e;e=l(a),e===u?o[e].p(a,c):(z(),m(o[u],1,1,()=>{o[u]=null}),J(),t=o[e],t?t.p(a,c):(t=o[e]=i[e](a),t.c()),f(t,1),t.m(n.parentNode,n))},i(a){s||(f(t),s=!0)},o(a){m(t),s=!1},d(a){a&&h(n),o[e].d(a)}}}function Dn(r){let e,t,n,s;return e=new bt({props:{$$slots:{end:[Pn],middle:[Cn],start:[Sn]},$$scope:{ctx:r}}}),n=new Ze({props:{$$slots:{default:[Nn]},$$scope:{ctx:r}}}),{c(){O(e.$$.fragment),t=q(),O(n.$$.fragment)},l(i){P(e.$$.fragment,i),t=L(i),P(n.$$.fragment,i)},m(i,o){T(e,i,o),b(i,t,o),T(n,i,o),s=!0},p(i,[o]){const l={};o&32775&&(l.$$scope={dirty:o,ctx:i}),e.$set(l);const a={};o&32781&&(a.$$scope={dirty:o,ctx:i}),n.$set(a)},i(i){s||(f(e.$$.fragment,i),f(n.$$.fragment,i),s=!0)},o(i){m(e.$$.fragment,i),m(n.$$.fragment,i),s=!1},d(i){i&&h(t),I(e,i),I(n,i)}}}function Fn(r,e,t){let n,s;ye(r,Pe,v=>t(2,n=v)),ye(r,We,v=>t(11,s=v));let i=null,o=1,l="";{let v=!1;const S=parseInt(s.get("page"));isNaN(S)||(o=S,v=!0);const C=s.get("filter");C&&(l=C,v=!0),v&&n&&c()}function a(v){ee.authStore.clear()}async function c(v={}){i!=null&&await i,t(3,i=ee.collection("files").getList(o,30,{sort:"-created",filter:`name~"${encodeURIComponent(l)}"`,...v}))}async function u(){t(0,o=1),await c()}async function d(v){const{detail:S}=v;t(0,o=S),await c()}function p(v){return ee.files.getUrl(v,v.file,{thumb:"96x96f"})}function _(v){l=v,t(1,l)}const g=()=>{t(0,o=1),c()};return r.$$.update=()=>{if(r.$$.dirty&4&&n&&c(),r.$$.dirty&3){const v=[];o!==1&&v.push(`page=${encodeURIComponent(o)}`),l&&v.push(`filter=${encodeURIComponent(l)}`),lt(We,s=v.join("&"),s)}},[o,l,n,i,a,c,u,d,p,_,g]}class Wn extends B{constructor(e){super(),W(this,e,Fn,Dn,V,{})}}export{Wn as component};
